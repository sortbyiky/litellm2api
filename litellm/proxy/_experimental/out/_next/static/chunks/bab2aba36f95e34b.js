(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,461451,37329,100070,e=>{"use strict";var i=e.i(843476),s=e.i(271645),l=e.i(304967),t=e.i(629569),r=e.i(599724),n=e.i(350967),a=e.i(994388),o=e.i(366283),d=e.i(779241),c=e.i(114600),u=e.i(808613),m=e.i(764205),p=e.i(237016),g=e.i(596239),_=e.i(438957),h=e.i(166406),x=e.i(270377),f=e.i(475647),y=e.i(190702),j=e.i(727749);e.s(["default",0,({accessToken:e,userID:b,proxySettings:S})=>{let[v]=u.Form.useForm(),[I,C]=(0,s.useState)(!1),[w,k]=(0,s.useState)(null),[T,O]=(0,s.useState)("<your_proxy_base_url>");(0,s.useEffect)(()=>{let e="<your_proxy_base_url>";O(e=S&&S.PROXY_BASE_URL&&void 0!==S.PROXY_BASE_URL?S.PROXY_BASE_URL:window.location.origin)},[S]);let E=`${T}/scim/v2`,N=async i=>{if(!e||!b)return void j.default.fromBackend("You need to be logged in to create a SCIM token");try{C(!0);let s={key_alias:i.key_alias||"SCIM Access Token",team_id:null,models:[],allowed_routes:["/scim/*"]},l=await (0,m.keyCreateCall)(e,b,s);k(l),j.default.success("SCIM token created successfully")}catch(e){console.error("Error creating SCIM token:",e),j.default.fromBackend("Failed to create SCIM token: "+(0,y.parseErrorMessage)(e))}finally{C(!1)}};return(0,i.jsx)(n.Grid,{numItems:1,children:(0,i.jsxs)(l.Card,{children:[(0,i.jsx)("div",{className:"flex items-center mb-4",children:(0,i.jsx)(t.Title,{children:"SCIM Configuration"})}),(0,i.jsx)(r.Text,{className:"text-gray-600",children:"System for Cross-domain Identity Management (SCIM) allows you to automatically provision and manage users and groups in LiteLLM."}),(0,i.jsx)(c.Divider,{}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 mr-2",children:"1"}),(0,i.jsxs)(t.Title,{className:"text-lg flex items-center",children:[(0,i.jsx)(g.LinkOutlined,{className:"h-5 w-5 mr-2"}),"SCIM Tenant URL"]})]}),(0,i.jsx)(r.Text,{className:"text-gray-600 mb-3",children:"Use this URL in your identity provider SCIM integration settings."}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(d.TextInput,{value:E,disabled:!0,className:"flex-grow"}),(0,i.jsx)(p.CopyToClipboard,{text:E,onCopy:()=>j.default.success("URL copied to clipboard"),children:(0,i.jsxs)(a.Button,{variant:"primary",className:"ml-2 flex items-center",children:[(0,i.jsx)(h.CopyOutlined,{className:"h-4 w-4 mr-1"}),"Copy"]})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 mr-2",children:"2"}),(0,i.jsxs)(t.Title,{className:"text-lg flex items-center",children:[(0,i.jsx)(_.KeyOutlined,{className:"h-5 w-5 mr-2"}),"Authentication Token"]})]}),(0,i.jsx)(o.Callout,{title:"Using SCIM",color:"blue",className:"mb-4",children:"You need a SCIM token to authenticate with the SCIM API. Create one below and use it in your SCIM provider configuration."}),w?(0,i.jsxs)(l.Card,{className:"border border-yellow-300 bg-yellow-50",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2 text-yellow-800",children:[(0,i.jsx)(x.ExclamationCircleOutlined,{className:"h-5 w-5 mr-2"}),(0,i.jsx)(t.Title,{className:"text-lg text-yellow-800",children:"Your SCIM Token"})]}),(0,i.jsx)(r.Text,{className:"text-yellow-800 mb-4 font-medium",children:"Make sure to copy this token now. You will not be able to see it again."}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(d.TextInput,{value:w.key,className:"flex-grow mr-2 bg-white",type:"password",disabled:!0}),(0,i.jsx)(p.CopyToClipboard,{text:w.key,onCopy:()=>j.default.success("Token copied to clipboard"),children:(0,i.jsxs)(a.Button,{variant:"primary",className:"flex items-center",children:[(0,i.jsx)(h.CopyOutlined,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),(0,i.jsxs)(a.Button,{className:"mt-4 flex items-center",variant:"secondary",onClick:()=>k(null),children:[(0,i.jsx)(f.PlusCircleOutlined,{className:"h-4 w-4 mr-1"}),"Create Another Token"]})]}):(0,i.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,i.jsxs)(u.Form,{form:v,onFinish:N,layout:"vertical",children:[(0,i.jsx)(u.Form.Item,{name:"key_alias",label:"Token Name",rules:[{required:!0,message:"Please enter a name for your token"}],children:(0,i.jsx)(d.TextInput,{placeholder:"SCIM Access Token"})}),(0,i.jsx)(u.Form.Item,{children:(0,i.jsxs)(a.Button,{variant:"primary",type:"submit",loading:I,className:"flex items-center",children:[(0,i.jsx)(_.KeyOutlined,{className:"h-4 w-4 mr-1"}),"Create SCIM Token"]})})]})})]})]})]})})}],461451);var b=e.i(135214),S=e.i(266027),v=e.i(243652);let I=(0,v.createQueryKeys)("sso"),C=()=>{let{accessToken:e,userId:i,userRole:s}=(0,b.default)();return(0,S.useQuery)({queryKey:I.detail("settings"),queryFn:async()=>await (0,m.getSSOSettings)(e),enabled:!!(e&&i&&s)})};var w=e.i(464571),k=e.i(175712),T=e.i(869216),O=e.i(770914),E=e.i(262218),N=e.i(898586),F=e.i(688511),A=e.i(98919),M=e.i(727612);let P={google:"https://artificialanalysis.ai/img/logos/google_small.svg",microsoft:"https://upload.wikimedia.org/wikipedia/commons/a/a8/Microsoft_Azure_Logo.svg",okta:"https://www.okta.com/sites/default/files/Okta_Logo_BrightBlue_Medium.png",generic:""},U={google:"Google SSO",microsoft:"Microsoft SSO",okta:"Okta / Auth0 SSO",generic:"Generic SSO"},R={internal_user_viewer:"Internal Viewer",internal_user:"Internal User",proxy_admin_viewer:"Proxy Admin Viewer",proxy_admin:"Proxy Admin"};var B=e.i(212931),L=e.i(536916),z=e.i(311451),D=e.i(199133);let G={google:{envVarMap:{google_client_id:"GOOGLE_CLIENT_ID",google_client_secret:"GOOGLE_CLIENT_SECRET"},fields:[{label:"Google Client ID",name:"google_client_id"},{label:"Google Client Secret",name:"google_client_secret"}]},microsoft:{envVarMap:{microsoft_client_id:"MICROSOFT_CLIENT_ID",microsoft_client_secret:"MICROSOFT_CLIENT_SECRET",microsoft_tenant:"MICROSOFT_TENANT"},fields:[{label:"Microsoft Client ID",name:"microsoft_client_id"},{label:"Microsoft Client Secret",name:"microsoft_client_secret"},{label:"Microsoft Tenant",name:"microsoft_tenant"}]},okta:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint",placeholder:"https://your-domain/authorize"},{label:"Token Endpoint",name:"generic_token_endpoint",placeholder:"https://your-domain/token"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint",placeholder:"https://your-domain/userinfo"}]},generic:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint"},{label:"Token Endpoint",name:"generic_token_endpoint"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint"}]}},V=({form:e,onFormSubmit:s})=>(0,i.jsx)("div",{children:(0,i.jsxs)(u.Form,{form:e,onFinish:s,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,i.jsx)(u.Form.Item,{label:"SSO Provider",name:"sso_provider",rules:[{required:!0,message:"Please select an SSO provider"}],children:(0,i.jsx)(D.Select,{children:Object.entries(P).map(([e,s])=>(0,i.jsx)(D.Select.Option,{value:e,children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"4px 0"},children:[s&&(0,i.jsx)("img",{src:s,alt:e,style:{height:24,width:24,marginRight:12,objectFit:"contain"}}),(0,i.jsx)("span",{children:U[e]||e.charAt(0).toUpperCase()+e.slice(1)+" SSO"})]})},e))})}),(0,i.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.sso_provider!==i.sso_provider,children:({getFieldValue:e})=>{let s,l=e("sso_provider");return l&&(s=G[l])?s.fields.map(e=>(0,i.jsx)(u.Form.Item,{label:e.label,name:e.name,rules:[{required:!0,message:`Please enter the ${e.label.toLowerCase()}`}],children:e.name.includes("client")?(0,i.jsx)(z.Input.Password,{}):(0,i.jsx)(d.TextInput,{placeholder:e.placeholder})},e.name)):null}}),(0,i.jsx)(u.Form.Item,{label:"Proxy Admin Email",name:"user_email",rules:[{required:!0,message:"Please enter the email of the proxy admin"}],children:(0,i.jsx)(d.TextInput,{})}),(0,i.jsx)(u.Form.Item,{label:"Proxy Base URL",name:"proxy_base_url",normalize:e=>e?.trim(),rules:[{required:!0,message:"Please enter the proxy base url"},{pattern:/^https?:\/\/.+/,message:"URL must start with http:// or https://"},{validator:(e,i)=>i&&/^https?:\/\/.+/.test(i)&&i.endsWith("/")?Promise.reject("URL must not end with a trailing slash"):Promise.resolve()}],children:(0,i.jsx)(d.TextInput,{placeholder:"https://example.com"})}),(0,i.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.sso_provider!==i.sso_provider,children:({getFieldValue:e})=>{let s=e("sso_provider");return"okta"===s||"generic"===s?(0,i.jsx)(u.Form.Item,{label:"Use Role Mappings",name:"use_role_mappings",valuePropName:"checked",children:(0,i.jsx)(L.Checkbox,{})}):null}}),(0,i.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.use_role_mappings!==i.use_role_mappings||e.sso_provider!==i.sso_provider,children:({getFieldValue:e})=>{let s=e("use_role_mappings"),l=e("sso_provider");return s&&("okta"===l||"generic"===l)?(0,i.jsx)(u.Form.Item,{label:"Group Claim",name:"group_claim",rules:[{required:!0,message:"Please enter the group claim"}],children:(0,i.jsx)(d.TextInput,{})}):null}}),(0,i.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.use_role_mappings!==i.use_role_mappings||e.sso_provider!==i.sso_provider,children:({getFieldValue:e})=>{let s=e("use_role_mappings"),l=e("sso_provider");return s&&("okta"===l||"generic"===l)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Form.Item,{label:"Default Role",name:"default_role",initialValue:"Internal User",children:(0,i.jsxs)(D.Select,{children:[(0,i.jsx)(D.Select.Option,{value:"internal_user_viewer",children:"Internal Viewer"}),(0,i.jsx)(D.Select.Option,{value:"internal_user",children:"Internal User"}),(0,i.jsx)(D.Select.Option,{value:"proxy_admin_viewer",children:"Admin Viewer"}),(0,i.jsx)(D.Select.Option,{value:"proxy_admin",children:"Proxy Admin"})]})}),(0,i.jsx)(u.Form.Item,{label:"Proxy Admin Teams",name:"proxy_admin_teams",children:(0,i.jsx)(d.TextInput,{})}),(0,i.jsx)(u.Form.Item,{label:"Admin Viewer Teams",name:"admin_viewer_teams",children:(0,i.jsx)(d.TextInput,{})}),(0,i.jsx)(u.Form.Item,{label:"Internal User Teams",name:"internal_user_teams",children:(0,i.jsx)(d.TextInput,{})}),(0,i.jsx)(u.Form.Item,{label:"Internal Viewer Teams",name:"internal_viewer_teams",children:(0,i.jsx)(d.TextInput,{})})]}):null}}),(0,i.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.sso_provider!==i.sso_provider,children:({getFieldValue:e})=>{let s=e("sso_provider");return"okta"===s||"generic"===s?(0,i.jsx)(u.Form.Item,{label:"Use Team Mappings",name:"use_team_mappings",valuePropName:"checked",children:(0,i.jsx)(L.Checkbox,{})}):null}}),(0,i.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.use_team_mappings!==i.use_team_mappings||e.sso_provider!==i.sso_provider,children:({getFieldValue:e})=>{let s=e("use_team_mappings"),l=e("sso_provider");return s&&("okta"===l||"generic"===l)?(0,i.jsx)(u.Form.Item,{label:"Team IDs JWT Field",name:"team_ids_jwt_field",rules:[{required:!0,message:"Please enter the team IDs JWT field"}],children:(0,i.jsx)(d.TextInput,{})}):null}})]})});var q=e.i(954616);let H=()=>{let{accessToken:e}=(0,b.default)();return(0,q.useMutation)({mutationFn:async i=>{if(!e)throw Error("Access token is required");return await (0,m.updateSSOSettings)(e,i)}})},W=e=>{let{proxy_admin_teams:i,admin_viewer_teams:s,internal_user_teams:l,internal_viewer_teams:t,default_role:r,group_claim:n,use_role_mappings:a,use_team_mappings:o,team_ids_jwt_field:d,...c}=e,u={...c},m=c.sso_provider;if(a&&("okta"===m||"generic"===m)){let e=e=>e&&""!==e.trim()?e.split(",").map(e=>e.trim()).filter(e=>e.length>0):[];u.role_mappings={provider:"generic",group_claim:n,default_role:({internal_user_viewer:"internal_user_viewer",internal_user:"internal_user",proxy_admin_viewer:"proxy_admin_viewer",proxy_admin:"proxy_admin"})[r]||"internal_user",roles:{proxy_admin:e(i),proxy_admin_viewer:e(s),internal_user:e(l),internal_user_viewer:e(t)}}}return o&&("okta"===m||"generic"===m)&&(u.team_mappings={team_ids_jwt_field:d}),u},$=e=>e.google_client_id?"google":e.microsoft_client_id?"microsoft":e.generic_client_id?e.generic_authorization_endpoint?.includes("okta")||e.generic_authorization_endpoint?.includes("auth0")?"okta":"generic":null,K=({isVisible:e,onCancel:s,onSuccess:l})=>{let[t]=u.Form.useForm(),{mutateAsync:r,isPending:n}=H(),a=async e=>{let i=W(e);await r(i,{onSuccess:()=>{j.default.success("SSO settings added successfully"),l()},onError:e=>{j.default.fromBackend("Failed to save SSO settings: "+(0,y.parseErrorMessage)(e))}})},o=()=>{t.resetFields(),s()};return(0,i.jsx)(B.Modal,{title:"Add SSO",open:e,width:800,footer:(0,i.jsxs)(O.Space,{children:[(0,i.jsx)(w.Button,{onClick:o,disabled:n,children:"Cancel"}),(0,i.jsx)(w.Button,{loading:n,onClick:()=>t.submit(),children:n?"Adding...":"Add SSO"})]}),onCancel:o,children:(0,i.jsx)(V,{form:t,onFormSubmit:a})})};var Y=e.i(127952);let J=({isVisible:e,onCancel:s,onSuccess:l})=>{let{data:t}=C(),{mutateAsync:r,isPending:n}=H(),a=async()=>{await r({google_client_id:null,google_client_secret:null,microsoft_client_id:null,microsoft_client_secret:null,microsoft_tenant:null,generic_client_id:null,generic_client_secret:null,generic_authorization_endpoint:null,generic_token_endpoint:null,generic_userinfo_endpoint:null,proxy_base_url:null,user_email:null,sso_provider:null,role_mappings:null,team_mappings:null},{onSuccess:()=>{j.default.success("SSO settings cleared successfully"),s(),l()},onError:e=>{j.default.fromBackend("Failed to clear SSO settings: "+(0,y.parseErrorMessage)(e))}})};return(0,i.jsx)(Y.default,{isOpen:e,title:"Confirm Clear SSO Settings",alertMessage:"This action cannot be undone.",message:"Are you sure you want to clear all SSO settings? Users will no longer be able to login using SSO after this change.",resourceInformationTitle:"SSO Settings",resourceInformation:[{label:"Provider",value:t?.values&&$(t?.values)||"Generic"}],onCancel:s,onOk:a,confirmLoading:n})},Q=({isVisible:e,onCancel:l,onSuccess:t})=>{let[r]=u.Form.useForm(),n=C(),{mutateAsync:a,isPending:o}=H();(0,s.useEffect)(()=>{if(e&&n.data&&n.data.values){let e=n.data;console.log("Raw SSO data received:",e),console.log("SSO values:",e.values),console.log("user_email from API:",e.values.user_email);let i=null;e.values.google_client_id?i="google":e.values.microsoft_client_id?i="microsoft":e.values.generic_client_id&&(i=e.values.generic_authorization_endpoint?.includes("okta")||e.values.generic_authorization_endpoint?.includes("auth0")?"okta":"generic");let s={};if(e.values.role_mappings){let i=e.values.role_mappings,l=e=>e&&0!==e.length?e.join(", "):"";s={use_role_mappings:!0,group_claim:i.group_claim,default_role:i.default_role||"internal_user",proxy_admin_teams:l(i.roles?.proxy_admin),admin_viewer_teams:l(i.roles?.proxy_admin_viewer),internal_user_teams:l(i.roles?.internal_user),internal_viewer_teams:l(i.roles?.internal_user_viewer)}}let l={};e.values.team_mappings&&(l={use_team_mappings:!0,team_ids_jwt_field:e.values.team_mappings.team_ids_jwt_field});let t={sso_provider:i,...e.values,...s,...l};console.log("Setting form values:",t),r.resetFields(),setTimeout(()=>{r.setFieldsValue(t),console.log("Form values set, current form values:",r.getFieldsValue())},100)}},[e,n.data,r]);let d=async e=>{try{let i=W(e);await a(i,{onSuccess:()=>{j.default.success("SSO settings updated successfully"),t()},onError:e=>{j.default.fromBackend("Failed to save SSO settings: "+(0,y.parseErrorMessage)(e))}})}catch(e){j.default.fromBackend("Failed to process SSO settings: "+(0,y.parseErrorMessage)(e))}},c=()=>{r.resetFields(),l()};return(0,i.jsx)(B.Modal,{title:"Edit SSO Settings",open:e,width:800,footer:(0,i.jsxs)(O.Space,{children:[(0,i.jsx)(w.Button,{onClick:c,disabled:o,children:"Cancel"}),(0,i.jsx)(w.Button,{loading:o,onClick:()=>r.submit(),children:o?"Saving...":"Save"})]}),onCancel:c,children:(0,i.jsx)(V,{form:r,onFormSubmit:d})})};var Z=e.i(286536),X=e.i(77705);function ee({defaultHidden:e=!0,value:l}){let[t,r]=(0,s.useState)(e);return(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"font-mono text-gray-600 flex-1",children:l?t?"â€¢".repeat(l.length):l:(0,i.jsx)("span",{className:"text-gray-400 italic",children:"Not configured"})}),l&&(0,i.jsx)(w.Button,{type:"text",size:"small",icon:t?(0,i.jsx)(Z.Eye,{className:"w-4 h-4"}):(0,i.jsx)(X.EyeOff,{className:"w-4 h-4"}),onClick:()=>r(!t),className:"text-gray-400 hover:text-gray-600"})]})}var ei=e.i(312361),es=e.i(291542),el=e.i(761911);let{Title:et,Text:er}=N.Typography;function en({roleMappings:e}){if(!e)return null;let s=[{title:"Role",dataIndex:"role",key:"role",render:e=>(0,i.jsx)(er,{strong:!0,children:R[e]})},{title:"Mapped Groups",dataIndex:"groups",key:"groups",render:e=>(0,i.jsx)(i.Fragment,{children:e.length>0?e.map((e,s)=>(0,i.jsx)(E.Tag,{color:"blue",children:e},s)):(0,i.jsx)(er,{className:"text-gray-400 italic",children:"No groups mapped"})})}];return(0,i.jsxs)(k.Card,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(el.Users,{className:"w-6 h-6 text-gray-400 mb-2"}),(0,i.jsx)(et,{level:3,children:"Role Mappings"})]}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(et,{level:5,children:"Group Claim"}),(0,i.jsx)("div",{children:(0,i.jsx)(er,{code:!0,children:e.group_claim})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(et,{level:5,children:"Default Role"}),(0,i.jsx)("div",{children:(0,i.jsx)(er,{strong:!0,children:R[e.default_role]})})]})]}),(0,i.jsx)(ei.Divider,{}),(0,i.jsx)(es.Table,{columns:s,dataSource:Object.entries(e.roles).map(([e,i])=>({role:e,groups:i})),pagination:!1,bordered:!0,size:"small",className:"w-full"})]})]})}var ea=e.i(21548);let{Title:eo,Paragraph:ed}=N.Typography;function ec({onAdd:e}){return(0,i.jsx)("div",{className:"bg-white p-12 rounded-lg border border-dashed border-gray-300 text-center w-full",children:(0,i.jsx)(ea.Empty,{image:ea.Empty.PRESENTED_IMAGE_SIMPLE,description:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(eo,{level:4,children:"No SSO Configuration Found"}),(0,i.jsx)(ed,{type:"secondary",className:"max-w-md mx-auto",children:"Configure Single Sign-On (SSO) to enable seamless authentication for your team members using your identity provider."})]}),children:(0,i.jsx)(w.Button,{type:"primary",size:"large",onClick:e,className:"flex items-center gap-2 mx-auto mt-4",children:"Configure SSO"})})})}var eu=e.i(981339);let{Title:em,Text:ep}=N.Typography;function eg(){return(0,i.jsx)(k.Card,{children:(0,i.jsxs)(O.Space,{direction:"vertical",size:"large",className:"w-full",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(A.Shield,{className:"w-6 h-6 text-gray-400"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(em,{level:3,children:"SSO Configuration"}),(0,i.jsx)(ep,{type:"secondary",children:"Manage Single Sign-On authentication settings"})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(eu.Skeleton.Button,{active:!0,size:"default",style:{width:170,height:32}}),(0,i.jsx)(eu.Skeleton.Button,{active:!0,size:"default",style:{width:190,height:32}})]})]}),(0,i.jsxs)(T.Descriptions,{bordered:!0,...{column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}},children:[(0,i.jsx)(T.Descriptions.Item,{label:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:80,height:16}}),children:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:100,height:16}})})}),(0,i.jsx)(T.Descriptions.Item,{label:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:80,height:16}}),children:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:200,height:16}})}),(0,i.jsx)(T.Descriptions.Item,{label:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:80,height:16}}),children:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:250,height:16}})}),(0,i.jsx)(T.Descriptions.Item,{label:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:80,height:16}}),children:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:180,height:16}})}),(0,i.jsx)(T.Descriptions.Item,{label:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:80,height:16}}),children:(0,i.jsx)(eu.Skeleton.Node,{active:!0,style:{width:220,height:16}})})]})]})})}let{Title:e_,Text:eh}=N.Typography;function ex(){let{data:e,refetch:l,isLoading:t}=C(),[r,n]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),u=!!e?.values.google_client_id||!!e?.values.microsoft_client_id||!!e?.values.generic_client_id,m=e?.values?$(e.values):null,p=!!e?.values.role_mappings,g=!!e?.values.team_mappings,_=e=>(0,i.jsx)(eh,{className:"font-mono text-gray-600 text-sm",copyable:!!e,children:e||"-"}),h=e=>e||(0,i.jsx)("span",{className:"text-gray-400 italic",children:"Not configured"}),x=e=>e.team_mappings?.team_ids_jwt_field?(0,i.jsx)(E.Tag,{children:e.team_mappings.team_ids_jwt_field}):(0,i.jsx)("span",{className:"text-gray-400 italic",children:"Not configured"}),f={column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}},y={google:{providerText:U.google,fields:[{label:"Client ID",render:e=>(0,i.jsx)(ee,{value:e.google_client_id})},{label:"Client Secret",render:e=>(0,i.jsx)(ee,{value:e.google_client_secret})},{label:"Proxy Base URL",render:e=>h(e.proxy_base_url)}]},microsoft:{providerText:U.microsoft,fields:[{label:"Client ID",render:e=>(0,i.jsx)(ee,{value:e.microsoft_client_id})},{label:"Client Secret",render:e=>(0,i.jsx)(ee,{value:e.microsoft_client_secret})},{label:"Tenant",render:e=>h(e.microsoft_tenant)},{label:"Proxy Base URL",render:e=>h(e.proxy_base_url)}]},okta:{providerText:U.okta,fields:[{label:"Client ID",render:e=>(0,i.jsx)(ee,{value:e.generic_client_id})},{label:"Client Secret",render:e=>(0,i.jsx)(ee,{value:e.generic_client_secret})},{label:"Authorization Endpoint",render:e=>_(e.generic_authorization_endpoint)},{label:"Token Endpoint",render:e=>_(e.generic_token_endpoint)},{label:"User Info Endpoint",render:e=>_(e.generic_userinfo_endpoint)},{label:"Proxy Base URL",render:e=>h(e.proxy_base_url)},g?{label:"Team IDs JWT Field",render:e=>x(e)}:null]},generic:{providerText:U.generic,fields:[{label:"Client ID",render:e=>(0,i.jsx)(ee,{value:e.generic_client_id})},{label:"Client Secret",render:e=>(0,i.jsx)(ee,{value:e.generic_client_secret})},{label:"Authorization Endpoint",render:e=>_(e.generic_authorization_endpoint)},{label:"Token Endpoint",render:e=>_(e.generic_token_endpoint)},{label:"User Info Endpoint",render:e=>_(e.generic_userinfo_endpoint)},{label:"Proxy Base URL",render:e=>h(e.proxy_base_url)},g?{label:"Team IDs JWT Field",render:e=>x(e)}:null]}};return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsx)(eg,{}):(0,i.jsxs)(O.Space,{direction:"vertical",size:"large",className:"w-full",children:[(0,i.jsx)(k.Card,{children:(0,i.jsxs)(O.Space,{direction:"vertical",size:"large",className:"w-full",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(A.Shield,{className:"w-6 h-6 text-gray-400"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(e_,{level:3,children:"SSO Configuration"}),(0,i.jsx)(eh,{type:"secondary",children:"Manage Single Sign-On authentication settings"})]})]}),(0,i.jsx)("div",{className:"flex items-center gap-3",children:u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.Button,{icon:(0,i.jsx)(F.Edit,{className:"w-4 h-4"}),onClick:()=>c(!0),children:"Edit SSO Settings"}),(0,i.jsx)(w.Button,{danger:!0,icon:(0,i.jsx)(M.Trash2,{className:"w-4 h-4"}),onClick:()=>n(!0),children:"Delete SSO Settings"})]})})]}),u?(()=>{if(!e?.values||!m)return null;let{values:s}=e,l=y[m];return l?(0,i.jsxs)(T.Descriptions,{bordered:!0,...f,children:[(0,i.jsx)(T.Descriptions.Item,{label:"Provider",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[P[m]&&(0,i.jsx)("img",{src:P[m],alt:m,style:{height:24,width:24,objectFit:"contain"}}),(0,i.jsx)("span",{children:l.providerText})]})}),l.fields.map((e,l)=>e&&(0,i.jsx)(T.Descriptions.Item,{label:e.label,children:e.render(s)},l))]}):null})():(0,i.jsx)(ec,{onAdd:()=>o(!0)})]})}),p&&(0,i.jsx)(en,{roleMappings:e?.values.role_mappings})]}),(0,i.jsx)(J,{isVisible:r,onCancel:()=>n(!1),onSuccess:()=>l()}),(0,i.jsx)(K,{isVisible:a,onCancel:()=>o(!1),onSuccess:()=>{o(!1),l()}}),(0,i.jsx)(Q,{isVisible:d,onCancel:()=>c(!1),onSuccess:()=>{c(!1),l()}})]})}e.s(["default",()=>ex],37329);var ef=e.i(912598);let ey=(0,v.createQueryKeys)("uiSettings");e.s(["useUpdateUISettings",0,e=>{let i=(0,ef.useQueryClient)();return(0,q.useMutation)({mutationFn:async i=>{if(!e)throw Error("Access token is required");return(0,m.updateUiSettings)(e,i)},onSuccess:()=>{i.invalidateQueries({queryKey:ey.all})}})}],100070)},111672,e=>{"use strict";var i=e.i(843476),s=e.i(109799),l=e.i(135214),t=e.i(218129),r=e.i(477189),n=e.i(457202),a=e.i(299251),o=e.i(153702);e.i(247167);var d=e.i(931067),c=e.i(271645);let u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"};var m=e.i(9583),p=c.forwardRef(function(e,i){return c.createElement(m.default,(0,d.default)({},e,{ref:i,icon:u}))}),g=e.i(182399);let _={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};var h=c.forwardRef(function(e,i){return c.createElement(m.default,(0,d.default)({},e,{ref:i,icon:_}))});let x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};var f=c.forwardRef(function(e,i){return c.createElement(m.default,(0,d.default)({},e,{ref:i,icon:x}))}),y=e.i(210612),j=e.i(19732),b=e.i(993914),S=e.i(438957),v=e.i(777579),I=e.i(788191),C=e.i(983561),w=e.i(602073),k=e.i(928685),T=e.i(313603),O=e.i(232164),E=e.i(645526),N=e.i(366308),F=e.i(771674),A=e.i(592143),M=e.i(372943),P=e.i(899268);e.i(785269);var U=e.i(322831),R=e.i(708347),B=e.i(906579),L=e.i(115571);function z(e){let i=i=>{"disableShowNewBadge"===i.key&&e()},s=i=>{let{key:s}=i.detail;"disableShowNewBadge"===s&&e()};return window.addEventListener("storage",i),window.addEventListener(L.LOCAL_STORAGE_EVENT,s),()=>{window.removeEventListener("storage",i),window.removeEventListener(L.LOCAL_STORAGE_EVENT,s)}}function D(){return"true"===(0,L.getLocalStorageItem)("disableShowNewBadge")}function G({children:e,dot:s=!1}){return(0,c.useSyncExternalStore)(z,D)?e?(0,i.jsx)(i.Fragment,{children:e}):null:e?(0,i.jsx)(B.Badge,{color:"blue",count:s?void 0:"New",dot:s,children:e}):(0,i.jsx)(B.Badge,{color:"blue",count:s?void 0:"New",dot:s})}var V=e.i(190983);let{Sider:q}=M.Layout,H=e=>[{groupLabel:e("sidebar.aiGateway").toUpperCase(),items:[{key:"api-keys",page:"api-keys",label:e("sidebar.virtualKeys"),icon:(0,i.jsx)(S.KeyOutlined,{})},{key:"llm-playground",page:"llm-playground",label:e("sidebar.playground"),icon:(0,i.jsx)(I.PlayCircleOutlined,{}),roles:R.rolesWithWriteAccess},{key:"models",page:"models",label:e("sidebar.modelsEndpoints"),icon:(0,i.jsx)(g.BlockOutlined,{}),roles:R.rolesWithWriteAccess},{key:"agents",page:"agents",label:e("sidebar.agents"),icon:(0,i.jsx)(C.RobotOutlined,{}),roles:R.rolesWithWriteAccess},{key:"mcp-servers",page:"mcp-servers",label:e("sidebar.mcpServers"),icon:(0,i.jsx)(N.ToolOutlined,{})},{key:"guardrails",page:"guardrails",label:e("sidebar.guardrails"),icon:(0,i.jsx)(w.SafetyOutlined,{}),roles:R.all_admin_roles},{key:"policies",page:"policies",label:(0,i.jsx)("span",{className:"flex items-center gap-4",children:e("sidebar.policies")}),icon:(0,i.jsx)(n.AuditOutlined,{}),roles:R.all_admin_roles},{key:"tools",page:"tools",label:e("sidebar.searchTools"),icon:(0,i.jsx)(N.ToolOutlined,{}),children:[{key:"search-tools",page:"search-tools",label:e("sidebar.searchTools"),icon:(0,i.jsx)(k.SearchOutlined,{})},{key:"vector-stores",page:"vector-stores",label:e("sidebar.vectorStores"),icon:(0,i.jsx)(y.DatabaseOutlined,{})},{key:"tool-policies",page:"tool-policies",label:e("sidebar.toolPolicies"),icon:(0,i.jsx)(w.SafetyOutlined,{})}]}]},{groupLabel:e("sidebar.observability").toUpperCase(),items:[{key:"new_usage",page:"new_usage",icon:(0,i.jsx)(o.BarChartOutlined,{}),roles:[...R.all_admin_roles,...R.internalUserRoles],label:e("sidebar.usage")},{key:"logs",page:"logs",label:e("sidebar.logs"),icon:(0,i.jsx)(v.LineChartOutlined,{})},{key:"guardrails-monitor",page:"guardrails-monitor",label:e("sidebar.guardrailsMonitor"),icon:(0,i.jsx)(w.SafetyOutlined,{}),roles:[...R.all_admin_roles,...R.internalUserRoles]}]},{groupLabel:e("sidebar.accessControl").toUpperCase(),items:[{key:"users",page:"users",label:e("sidebar.internalUsers"),icon:(0,i.jsx)(F.UserOutlined,{}),roles:R.all_admin_roles},{key:"teams",page:"teams",label:e("sidebar.teams"),icon:(0,i.jsx)(E.TeamOutlined,{})},{key:"organizations",page:"organizations",label:e("sidebar.organizations"),icon:(0,i.jsx)(a.BankOutlined,{}),roles:R.all_admin_roles},{key:"access-groups",page:"access-groups",label:(0,i.jsxs)("span",{className:"flex items-center gap-2",children:[e("sidebar.accessGroups")," ",(0,i.jsx)(G,{})]}),icon:(0,i.jsx)(g.BlockOutlined,{}),roles:R.all_admin_roles},{key:"budgets",page:"budgets",label:e("sidebar.budgets"),icon:(0,i.jsx)(f,{}),roles:R.all_admin_roles}]},{groupLabel:e("sidebar.apiReference").toUpperCase(),items:[{key:"api_ref",page:"api_ref",label:e("sidebar.apiReference"),icon:(0,i.jsx)(t.ApiOutlined,{})},{key:"model-hub-table",page:"model-hub-table",label:e("sidebar.modelHub"),icon:(0,i.jsx)(r.AppstoreOutlined,{})},{key:"learning-resources",page:"learning-resources",label:e("sidebar.learningResources"),icon:(0,i.jsx)(h,{}),external_url:"https://models.litellm.ai/cookbook"},{key:"experimental",page:"experimental",label:e("sidebar.experimental"),icon:(0,i.jsx)(j.ExperimentOutlined,{}),children:[{key:"caching",page:"caching",label:e("sidebar.caching"),icon:(0,i.jsx)(y.DatabaseOutlined,{}),roles:R.all_admin_roles},{key:"prompts",page:"prompts",label:e("sidebar.promptManagement"),icon:(0,i.jsx)(b.FileTextOutlined,{}),roles:R.all_admin_roles},{key:"transform-request",page:"transform-request",label:e("sidebar.transformRequest"),icon:(0,i.jsx)(t.ApiOutlined,{}),roles:[...R.all_admin_roles,...R.internalUserRoles]},{key:"tag-management",page:"tag-management",label:e("sidebar.tagManagement"),icon:(0,i.jsx)(O.TagsOutlined,{}),roles:R.all_admin_roles},{key:"claude-code-plugins",page:"claude-code-plugins",label:e("sidebar.claudeCodePlugins"),icon:(0,i.jsx)(N.ToolOutlined,{}),roles:R.all_admin_roles},{key:"4",page:"usage",label:e("sidebar.oldUsage"),icon:(0,i.jsx)(o.BarChartOutlined,{})}]}]},{groupLabel:e("common.settings").toUpperCase(),roles:R.all_admin_roles,items:[{key:"settings",page:"settings",label:(0,i.jsx)("span",{className:"flex items-center gap-4",children:e("common.settings")}),icon:(0,i.jsx)(T.SettingOutlined,{}),roles:R.all_admin_roles,children:[{key:"router-settings",page:"router-settings",label:e("sidebar.routerSettings"),icon:(0,i.jsx)(T.SettingOutlined,{}),roles:R.all_admin_roles},{key:"logging-and-alerts",page:"logging-and-alerts",label:e("sidebar.loggingAlerts"),icon:(0,i.jsx)(T.SettingOutlined,{}),roles:R.all_admin_roles},{key:"admin-panel",page:"admin-panel",label:e("sidebar.adminPanel"),icon:(0,i.jsx)(T.SettingOutlined,{}),roles:R.all_admin_roles},{key:"cost-tracking",page:"cost-tracking",label:e("sidebar.costTracking"),icon:(0,i.jsx)(o.BarChartOutlined,{}),roles:R.all_admin_roles},{key:"ui-theme",page:"ui-theme",label:e("sidebar.uiTheme"),icon:(0,i.jsx)(p,{}),roles:R.all_admin_roles}]}]}];e.s(["default",0,({setPage:e,defaultSelectedKey:t,collapsed:r=!1,enabledPagesInternalUsers:n})=>{let a,{userId:o,accessToken:d,userRole:u}=(0,l.default)(),{data:m}=(0,s.useOrganizations)(),{t:p}=(0,U.useTranslation)(),g=(0,c.useMemo)(()=>H(p),[p]),_=(0,c.useMemo)(()=>!!o&&!!m&&m.some(e=>e.members?.some(e=>e.user_id===o&&"org_admin"===e.user_role)),[o,m]),h=i=>{let s=new URLSearchParams(window.location.search);s.set("page",i),window.history.pushState(null,"",`?${s.toString()}`),e(i)},x=e=>{let i=(0,R.isAdminRole)(u);return null!=n&&console.log("[LeftNav] Filtering with enabled pages:",{userRole:u,isAdmin:i,enabledPagesInternalUsers:n}),e.map(e=>({...e,children:e.children?x(e.children):void 0})).filter(e=>{if("organizations"===e.key){if(!(!e.roles||e.roles.includes(u)||_))return!1;if(!i&&null!=n){let i=n.includes(e.page);return console.log(`[LeftNav] Page "${e.page}" (${e.key}): ${i?"VISIBLE":"HIDDEN"}`),i}return!0}if(e.roles&&!e.roles.includes(u))return!1;if(!i&&null!=n){if(e.children&&e.children.length>0&&e.children.some(e=>n.includes(e.page)))return console.log(`[LeftNav] Parent "${e.page}" (${e.key}): VISIBLE (has visible children)`),!0;let i=n.includes(e.page);return console.log(`[LeftNav] Page "${e.page}" (${e.key}): ${i?"VISIBLE":"HIDDEN"}`),i}return!0})},f=(e=>{for(let i of g)for(let s of i.items){if(s.page===e)return s.key;if(s.children){let i=s.children.find(i=>i.page===e);if(i)return i.key}}return"api-keys"})(t);return(0,i.jsx)(M.Layout,{children:(0,i.jsxs)(q,{theme:"light",width:220,collapsed:r,collapsedWidth:80,collapsible:!0,trigger:null,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[(0,i.jsx)(A.ConfigProvider,{theme:{components:{Menu:{iconSize:15,fontSize:13,itemMarginInline:4,itemPaddingInline:8,itemHeight:30,itemBorderRadius:6,subMenuItemBorderRadius:6,groupTitleFontSize:10,groupTitleLineHeight:1.5}}},children:(0,i.jsx)(P.Menu,{mode:"inline",selectedKeys:[f],defaultOpenKeys:[],inlineCollapsed:r,className:"custom-sidebar-menu",style:{borderRight:0,backgroundColor:"transparent",fontSize:"13px",paddingTop:"4px"},items:(a=[],g.forEach(e=>{if(e.roles&&!e.roles.includes(u))return;let s=x(e.items);0!==s.length&&a.push({type:"group",label:r?null:(0,i.jsx)("span",{style:{fontSize:"10px",fontWeight:600,color:"#6b7280",letterSpacing:"0.05em",padding:"12px 0 4px 12px",display:"block",marginBottom:"2px"},children:e.groupLabel}),children:s.map(e=>({key:e.key,icon:e.icon,label:e.label,children:e.children?.map(e=>({key:e.key,icon:e.icon,label:e.label,onClick:()=>{e.external_url?window.open(e.external_url,"_blank"):h(e.page)}})),onClick:e.children?void 0:()=>{e.external_url?window.open(e.external_url,"_blank"):h(e.page)}}))})}),a)})}),(0,R.isAdminRole)(u)&&!r&&(0,i.jsx)(V.default,{accessToken:d,width:220})]})})},"getMenuGroups",()=>H],111672)},105278,e=>{"use strict";var i=e.i(843476),s=e.i(135214),l=e.i(994388),t=e.i(366283),r=e.i(304967),n=e.i(269200),a=e.i(942232),o=e.i(977572),d=e.i(427612),c=e.i(64848),u=e.i(496020),m=e.i(560445),p=e.i(464571),g=e.i(808613),_=e.i(311451),h=e.i(212931),x=e.i(653496),f=e.i(898586),y=e.i(271645);e.i(785269);var j=e.i(322831),b=e.i(700514),S=e.i(727749),v=e.i(764205),I=e.i(461451),C=e.i(37329),w=e.i(292639),k=e.i(100070),T=e.i(402389),O=e.i(111672);let E={"api-keys":"Manage virtual keys for API access and authentication","llm-playground":"Interactive playground for testing LLM requests",models:"Configure and manage LLM models and endpoints",agents:"Create and manage AI agents","mcp-servers":"Configure Model Context Protocol servers",guardrails:"Set up content moderation and safety guardrails",policies:"Define access control and usage policies","search-tools":"Configure RAG search and retrieval tools","vector-stores":"Manage vector databases for embeddings",new_usage:"View usage analytics and metrics",logs:"Access request and response logs","guardrails-monitor":"Monitor guardrail performance and view logs",users:"Manage internal user accounts and permissions",teams:"Create and manage teams for access control",organizations:"Manage organizations and their members","access-groups":"Manage access groups for role-based permissions",budgets:"Set and monitor spending budgets",api_ref:"Browse API documentation and endpoints","model-hub-table":"Explore available AI models and providers","learning-resources":"Access tutorials and documentation",caching:"Configure response caching settings","transform-request":"Set up request transformation rules","cost-tracking":"Track and analyze API costs","ui-theme":"Customize dashboard appearance","tag-management":"Organize resources with tags",prompts:"Manage and version prompt templates","claude-code-plugins":"Configure Claude Code plugins",usage:"View legacy usage dashboard","router-settings":"Configure routing and load balancing settings","logging-and-alerts":"Set up logging and alert configurations","admin-panel":"Access admin panel and settings"};var N=e.i(708347);let F=e=>!e||0===e.length||e.some(e=>N.internalUserRoles.includes(e));var A=e.i(536916),M=e.i(362024),P=e.i(770914),U=e.i(262218);function R({enabledPagesInternalUsers:e,enabledPagesPropertyDescription:s,isUpdating:l,onUpdate:t}){let r=null!=e,n=(0,y.useMemo)(()=>{let e;return e=[],(0,O.getMenuGroups)(T.default.t.bind(T.default)).forEach(i=>{i.items.forEach(s=>{if(s.page&&"tools"!==s.page&&"experimental"!==s.page&&"settings"!==s.page&&F(s.roles)){let l="string"==typeof s.label?s.label:s.key;e.push({page:s.page,label:l,group:i.groupLabel,description:E[s.page]||"No description available"})}if(s.children){let l="string"==typeof s.label?s.label:s.key;s.children.forEach(s=>{if(F(s.roles)){let t="string"==typeof s.label?s.label:s.key;e.push({page:s.page,label:t,group:`${i.groupLabel} > ${l}`,description:E[s.page]||"No description available"})}})}})}),e},[]),a=(0,y.useMemo)(()=>{let e={};return n.forEach(i=>{e[i.group]||(e[i.group]=[]),e[i.group].push(i)}),e},[n]),[o,d]=(0,y.useState)(e||[]);return(0,y.useMemo)(()=>{e?d(e):d([])},[e]),(0,i.jsxs)(P.Space,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,i.jsxs)(P.Space,{direction:"vertical",size:4,children:[(0,i.jsxs)(P.Space,{align:"center",children:[(0,i.jsx)(f.Typography.Text,{strong:!0,children:"Internal User Page Visibility"}),!r&&(0,i.jsx)(U.Tag,{color:"default",style:{marginLeft:"8px"},children:"Not set (all pages visible)"}),r&&(0,i.jsxs)(U.Tag,{color:"blue",style:{marginLeft:"8px"},children:[o.length," page",1!==o.length?"s":""," selected"]})]}),s&&(0,i.jsx)(f.Typography.Text,{type:"secondary",children:s}),(0,i.jsx)(f.Typography.Text,{type:"secondary",style:{fontSize:"12px",fontStyle:"italic"},children:"By default, all pages are visible to internal users. Select specific pages to restrict visibility."}),(0,i.jsx)(f.Typography.Text,{type:"secondary",style:{fontSize:"12px",color:"#8b5cf6"},children:"Note: Only pages accessible to internal user roles are shown here. Admin-only pages are excluded as they cannot be made visible to internal users regardless of this setting."})]}),(0,i.jsx)(M.Collapse,{items:[{key:"page-visibility",label:"Configure Page Visibility",children:(0,i.jsxs)(P.Space,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,i.jsx)(A.Checkbox.Group,{value:o,onChange:d,style:{width:"100%"},children:(0,i.jsx)(P.Space,{direction:"vertical",size:"middle",style:{width:"100%"},children:Object.entries(a).map(([e,s])=>(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Typography.Text,{strong:!0,style:{fontSize:"11px",color:"#6b7280",letterSpacing:"0.05em",display:"block",marginBottom:"8px"},children:e}),(0,i.jsx)(P.Space,{direction:"vertical",size:"small",style:{marginLeft:"16px",width:"100%"},children:s.map(e=>(0,i.jsx)("div",{style:{marginBottom:"4px"},children:(0,i.jsx)(A.Checkbox,{value:e.page,children:(0,i.jsxs)(P.Space,{direction:"vertical",size:0,children:[(0,i.jsx)(f.Typography.Text,{children:e.label}),(0,i.jsx)(f.Typography.Text,{type:"secondary",style:{fontSize:"12px"},children:e.description})]})})},e.page))})]},e))})}),(0,i.jsxs)(P.Space,{children:[(0,i.jsx)(p.Button,{type:"primary",onClick:()=>{t({enabled_ui_pages_internal_users:o.length>0?o:null})},loading:l,disabled:l,children:"Save Page Visibility Settings"}),r&&(0,i.jsx)(p.Button,{onClick:()=>{d([]),t({enabled_ui_pages_internal_users:null})},loading:l,disabled:l,children:"Reset to Default (All Pages)"})]})]})}]})]})}var B=e.i(175712),L=e.i(312361),z=e.i(981339),D=e.i(790848);function G(){let{accessToken:e}=(0,s.default)(),{data:l,isLoading:t,isError:r,error:n}=(0,w.useUISettings)(),{mutate:a,isPending:o,error:d}=(0,k.useUpdateUISettings)(e),c=l?.field_schema,u=c?.properties?.disable_model_add_for_internal_users,p=c?.properties?.disable_team_admin_delete_team_user,g=c?.properties?.require_auth_for_public_ai_hub,_=c?.properties?.forward_client_headers_to_llm_api,h=c?.properties?.enabled_ui_pages_internal_users,x=l?.values??{},y=!!x.disable_model_add_for_internal_users,j=!!x.disable_team_admin_delete_team_user;return(0,i.jsx)(B.Card,{title:"UI Settings",children:t?(0,i.jsx)(z.Skeleton,{active:!0}):r?(0,i.jsx)(m.Alert,{type:"error",message:"Could not load UI settings",description:n instanceof Error?n.message:void 0}):(0,i.jsxs)(P.Space,{direction:"vertical",size:"large",style:{width:"100%"},children:[c?.description&&(0,i.jsx)(f.Typography.Paragraph,{style:{marginBottom:0},children:c.description}),d&&(0,i.jsx)(m.Alert,{type:"error",message:"Could not update UI settings",description:d instanceof Error?d.message:void 0}),(0,i.jsxs)(P.Space,{align:"start",size:"middle",children:[(0,i.jsx)(D.Switch,{checked:y,disabled:o,loading:o,onChange:e=>{a({disable_model_add_for_internal_users:e},{onSuccess:()=>{S.default.success("UI settings updated successfully")},onError:e=>{S.default.fromBackend(e)}})},"aria-label":u?.description??"Disable model add for internal users"}),(0,i.jsxs)(P.Space,{direction:"vertical",size:4,children:[(0,i.jsx)(f.Typography.Text,{strong:!0,children:"Disable model add for internal users"}),u?.description&&(0,i.jsx)(f.Typography.Text,{type:"secondary",children:u.description})]})]}),(0,i.jsxs)(P.Space,{align:"start",size:"middle",children:[(0,i.jsx)(D.Switch,{checked:j,disabled:o,loading:o,onChange:e=>{a({disable_team_admin_delete_team_user:e},{onSuccess:()=>{S.default.success("UI settings updated successfully")},onError:e=>{S.default.fromBackend(e)}})},"aria-label":p?.description??"Disable team admin delete team user"}),(0,i.jsxs)(P.Space,{direction:"vertical",size:4,children:[(0,i.jsx)(f.Typography.Text,{strong:!0,children:"Disable team admin delete team user"}),p?.description&&(0,i.jsx)(f.Typography.Text,{type:"secondary",children:p.description})]})]}),(0,i.jsxs)(P.Space,{align:"start",size:"middle",children:[(0,i.jsx)(D.Switch,{checked:x.require_auth_for_public_ai_hub,disabled:o,loading:o,onChange:e=>{a({require_auth_for_public_ai_hub:e},{onSuccess:()=>{S.default.success("UI settings updated successfully")},onError:e=>{S.default.fromBackend(e)}})},"aria-label":g?.description??"Require authentication for public AI Hub"}),(0,i.jsxs)(P.Space,{direction:"vertical",size:4,children:[(0,i.jsx)(f.Typography.Text,{strong:!0,children:"Require authentication for public AI Hub"}),g?.description&&(0,i.jsx)(f.Typography.Text,{type:"secondary",children:g.description})]})]}),(0,i.jsxs)(P.Space,{align:"start",size:"middle",children:[(0,i.jsx)(D.Switch,{checked:!!x.forward_client_headers_to_llm_api,disabled:o,loading:o,onChange:e=>{a({forward_client_headers_to_llm_api:e},{onSuccess:()=>{S.default.success("UI settings updated successfully")},onError:e=>{S.default.fromBackend(e)}})},"aria-label":_?.description??"Forward client headers to LLM API"}),(0,i.jsxs)(P.Space,{direction:"vertical",size:4,children:[(0,i.jsx)(f.Typography.Text,{strong:!0,children:"Forward client headers to LLM API"}),(0,i.jsx)(f.Typography.Text,{type:"secondary",children:_?.description??"If enabled, forwards client headers (e.g. Authorization) to the LLM API. Required for Claude Code with Max subscription."})]})]}),(0,i.jsx)(L.Divider,{}),(0,i.jsx)(R,{enabledPagesInternalUsers:x.enabled_ui_pages_internal_users,enabledPagesPropertyDescription:h?.description,isUpdating:o,onUpdate:e=>{a(e,{onSuccess:()=>{S.default.success("Page visibility settings updated successfully")},onError:e=>{S.default.fromBackend(e)}})}})]})})}var V=e.i(199133),q=e.i(599724),H=e.i(779241),W=e.i(190702);let $={google:"https://artificialanalysis.ai/img/logos/google_small.svg",microsoft:"https://upload.wikimedia.org/wikipedia/commons/a/a8/Microsoft_Azure_Logo.svg",okta:"https://www.okta.com/sites/default/files/Okta_Logo_BrightBlue_Medium.png",generic:""},K={google:{envVarMap:{google_client_id:"GOOGLE_CLIENT_ID",google_client_secret:"GOOGLE_CLIENT_SECRET"},fields:[{label:"Google Client ID",name:"google_client_id"},{label:"Google Client Secret",name:"google_client_secret"}]},microsoft:{envVarMap:{microsoft_client_id:"MICROSOFT_CLIENT_ID",microsoft_client_secret:"MICROSOFT_CLIENT_SECRET",microsoft_tenant:"MICROSOFT_TENANT"},fields:[{label:"Microsoft Client ID",name:"microsoft_client_id"},{label:"Microsoft Client Secret",name:"microsoft_client_secret"},{label:"Microsoft Tenant",name:"microsoft_tenant"}]},okta:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint",placeholder:"https://your-domain/authorize"},{label:"Token Endpoint",name:"generic_token_endpoint",placeholder:"https://your-domain/token"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint",placeholder:"https://your-domain/userinfo"}]},generic:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint"},{label:"Token Endpoint",name:"generic_token_endpoint"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint"}]}},Y=({isAddSSOModalVisible:e,isInstructionsModalVisible:s,handleAddSSOOk:l,handleAddSSOCancel:t,handleShowInstructions:r,handleInstructionsOk:n,handleInstructionsCancel:a,form:o,accessToken:d,ssoConfigured:c=!1})=>{let[u,m]=(0,y.useState)(!1);(0,y.useEffect)(()=>{(async()=>{if(e&&d)try{let e=await (0,v.getSSOSettings)(d);if(console.log("Raw SSO data received:",e),e&&e.values){console.log("SSO values:",e.values),console.log("user_email from API:",e.values.user_email);let i=null;e.values.google_client_id?i="google":e.values.microsoft_client_id?i="microsoft":e.values.generic_client_id&&(i=e.values.generic_authorization_endpoint?.includes("okta")||e.values.generic_authorization_endpoint?.includes("auth0")?"okta":"generic");let s={};if(e.values.role_mappings){let i=e.values.role_mappings,l=e=>e&&0!==e.length?e.join(", "):"";s={use_role_mappings:!0,group_claim:i.group_claim,default_role:i.default_role||"internal_user",proxy_admin_teams:l(i.roles?.proxy_admin),admin_viewer_teams:l(i.roles?.proxy_admin_viewer),internal_user_teams:l(i.roles?.internal_user),internal_viewer_teams:l(i.roles?.internal_user_viewer)}}let l={sso_provider:i,proxy_base_url:e.values.proxy_base_url,user_email:e.values.user_email,...e.values,...s};console.log("Setting form values:",l),o.resetFields(),setTimeout(()=>{o.setFieldsValue(l),console.log("Form values set, current form values:",o.getFieldsValue())},100)}}catch(e){console.error("Failed to load SSO settings:",e)}})()},[e,d,o]);let x=async e=>{if(!d)return void S.default.fromBackend("No access token available");try{let{proxy_admin_teams:i,admin_viewer_teams:s,internal_user_teams:l,internal_viewer_teams:t,default_role:n,group_claim:a,use_role_mappings:o,...c}=e,u={...c};if(o){let e=e=>e&&""!==e.trim()?e.split(",").map(e=>e.trim()).filter(e=>e.length>0):[];u.role_mappings={provider:"generic",group_claim:a,default_role:({internal_user_viewer:"internal_user_viewer",internal_user:"internal_user",proxy_admin_viewer:"proxy_admin_viewer",proxy_admin:"proxy_admin"})[n]||"internal_user",roles:{proxy_admin:e(i),proxy_admin_viewer:e(s),internal_user:e(l),internal_user_viewer:e(t)}}}await (0,v.updateSSOSettings)(d,u),r(e)}catch(e){S.default.fromBackend("Failed to save SSO settings: "+(0,W.parseErrorMessage)(e))}},f=async()=>{if(!d)return void S.default.fromBackend("No access token available");try{await (0,v.updateSSOSettings)(d,{google_client_id:null,google_client_secret:null,microsoft_client_id:null,microsoft_client_secret:null,microsoft_tenant:null,generic_client_id:null,generic_client_secret:null,generic_authorization_endpoint:null,generic_token_endpoint:null,generic_userinfo_endpoint:null,proxy_base_url:null,user_email:null,sso_provider:null,role_mappings:null}),o.resetFields(),m(!1),l(),S.default.success("SSO settings cleared successfully")}catch(e){console.error("Failed to clear SSO settings:",e),S.default.fromBackend("Failed to clear SSO settings")}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Modal,{title:c?"Edit SSO Settings":"Add SSO",open:e,width:800,footer:null,onOk:l,onCancel:t,children:(0,i.jsxs)(g.Form,{form:o,onFinish:x,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Form.Item,{label:"SSO Provider",name:"sso_provider",rules:[{required:!0,message:"Please select an SSO provider"}],children:(0,i.jsx)(V.Select,{children:Object.entries($).map(([e,s])=>(0,i.jsx)(V.Select.Option,{value:e,children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"4px 0"},children:[s&&(0,i.jsx)("img",{src:s,alt:e,style:{height:24,width:24,marginRight:12,objectFit:"contain"}}),(0,i.jsxs)("span",{children:["okta"===e.toLowerCase()?"Okta / Auth0":e.charAt(0).toUpperCase()+e.slice(1)," ","SSO"]})]})},e))})}),(0,i.jsx)(g.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.sso_provider!==i.sso_provider,children:({getFieldValue:e})=>{let s,l=e("sso_provider");return l&&(s=K[l])?s.fields.map(e=>(0,i.jsx)(g.Form.Item,{label:e.label,name:e.name,rules:[{required:!0,message:`Please enter the ${e.label.toLowerCase()}`}],children:e.name.includes("client")?(0,i.jsx)(_.Input.Password,{}):(0,i.jsx)(H.TextInput,{placeholder:e.placeholder})},e.name)):null}}),(0,i.jsx)(g.Form.Item,{label:"Proxy Admin Email",name:"user_email",rules:[{required:!0,message:"Please enter the email of the proxy admin"}],children:(0,i.jsx)(H.TextInput,{})}),(0,i.jsx)(g.Form.Item,{label:"Proxy Base URL",name:"proxy_base_url",normalize:e=>e?.trim(),rules:[{required:!0,message:"Please enter the proxy base url"},{pattern:/^https?:\/\/.+/,message:"URL must start with http:// or https://"},{validator:(e,i)=>i&&/^https?:\/\/.+/.test(i)&&i.endsWith("/")?Promise.reject("URL must not end with a trailing slash"):Promise.resolve()}],children:(0,i.jsx)(H.TextInput,{placeholder:"https://example.com"})}),(0,i.jsx)(g.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.sso_provider!==i.sso_provider,children:({getFieldValue:e})=>{let s=e("sso_provider");return"okta"===s||"generic"===s?(0,i.jsx)(g.Form.Item,{label:"Use Role Mappings",name:"use_role_mappings",valuePropName:"checked",children:(0,i.jsx)(A.Checkbox,{})}):null}}),(0,i.jsx)(g.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.use_role_mappings!==i.use_role_mappings,children:({getFieldValue:e})=>e("use_role_mappings")?(0,i.jsx)(g.Form.Item,{label:"Group Claim",name:"group_claim",rules:[{required:!0,message:"Please enter the group claim"}],children:(0,i.jsx)(H.TextInput,{})}):null}),(0,i.jsx)(g.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.use_role_mappings!==i.use_role_mappings,children:({getFieldValue:e})=>e("use_role_mappings")?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Form.Item,{label:"Default Role",name:"default_role",initialValue:"Internal User",children:(0,i.jsxs)(V.Select,{children:[(0,i.jsx)(V.Select.Option,{value:"internal_user_viewer",children:"Internal Viewer"}),(0,i.jsx)(V.Select.Option,{value:"internal_user",children:"Internal User"}),(0,i.jsx)(V.Select.Option,{value:"proxy_admin_viewer",children:"Admin Viewer"}),(0,i.jsx)(V.Select.Option,{value:"proxy_admin",children:"Proxy Admin"})]})}),(0,i.jsx)(g.Form.Item,{label:"Proxy Admin Teams",name:"proxy_admin_teams",children:(0,i.jsx)(H.TextInput,{})}),(0,i.jsx)(g.Form.Item,{label:"Admin Viewer Teams",name:"admin_viewer_teams",children:(0,i.jsx)(H.TextInput,{})}),(0,i.jsx)(g.Form.Item,{label:"Internal User Teams",name:"internal_user_teams",children:(0,i.jsx)(H.TextInput,{})}),(0,i.jsx)(g.Form.Item,{label:"Internal Viewer Teams",name:"internal_viewer_teams",children:(0,i.jsx)(H.TextInput,{})})]}):null})]}),(0,i.jsxs)("div",{style:{textAlign:"right",marginTop:"10px",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"8px"},children:[c&&(0,i.jsx)(p.Button,{onClick:()=>m(!0),style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5558eb",e.currentTarget.style.borderColor="#5558eb"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1",e.currentTarget.style.borderColor="#6366f1"},children:"Clear"}),(0,i.jsx)(p.Button,{htmlType:"submit",children:"Save"})]})]})}),(0,i.jsxs)(h.Modal,{title:"Confirm Clear SSO Settings",open:u,onOk:f,onCancel:()=>m(!1),okText:"Yes, Clear",cancelText:"Cancel",okButtonProps:{danger:!0,style:{backgroundColor:"#dc2626",borderColor:"#dc2626"}},children:[(0,i.jsx)("p",{children:"Are you sure you want to clear all SSO settings? This action cannot be undone."}),(0,i.jsx)("p",{children:"Users will no longer be able to login using SSO after this change."})]}),(0,i.jsxs)(h.Modal,{title:"SSO Setup Instructions",open:s,width:800,footer:null,onOk:n,onCancel:a,children:[(0,i.jsx)("p",{children:"Follow these steps to complete the SSO setup:"}),(0,i.jsx)(q.Text,{className:"mt-2",children:"1. DO NOT Exit this TAB"}),(0,i.jsx)(q.Text,{className:"mt-2",children:"2. Open a new tab, visit your proxy base url"}),(0,i.jsx)(q.Text,{className:"mt-2",children:"3. Confirm your SSO is configured correctly and you can login on the new Tab"}),(0,i.jsx)(q.Text,{className:"mt-2",children:"4. If Step 3 is successful, you can close this tab"}),(0,i.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,i.jsx)(p.Button,{onClick:n,children:"Done"})})]})]})},J=({accessToken:e,onSuccess:s})=>{let[l]=g.Form.useForm(),[t,r]=(0,y.useState)(!1);(0,y.useEffect)(()=>{(async()=>{if(e)try{let i=await (0,v.getSSOSettings)(e);if(i&&i.values){let e=i.values.ui_access_mode,s={};e&&"object"==typeof e?s={ui_access_mode_type:e.type,restricted_sso_group:e.restricted_sso_group,sso_group_jwt_field:e.sso_group_jwt_field}:"string"==typeof e&&(s={ui_access_mode_type:e,restricted_sso_group:i.values.restricted_sso_group,sso_group_jwt_field:i.values.team_ids_jwt_field||i.values.sso_group_jwt_field}),l.setFieldsValue(s)}}catch(e){console.error("Failed to load UI access settings:",e)}})()},[e,l]);let n=async i=>{if(!e)return void S.default.fromBackend("No access token available");r(!0);try{let l;l="all_authenticated_users"===i.ui_access_mode_type?{ui_access_mode:"none"}:{ui_access_mode:{type:i.ui_access_mode_type,restricted_sso_group:i.restricted_sso_group,sso_group_jwt_field:i.sso_group_jwt_field}},await (0,v.updateSSOSettings)(e,l),s()}catch(e){console.error("Failed to save UI access settings:",e),S.default.fromBackend("Failed to save UI access settings")}finally{r(!1)}};return(0,i.jsxs)("div",{style:{padding:"16px"},children:[(0,i.jsx)("div",{style:{marginBottom:"16px"},children:(0,i.jsx)(q.Text,{style:{fontSize:"14px",color:"#6b7280"},children:"Configure who can access the UI interface and how group information is extracted from JWT tokens."})}),(0,i.jsxs)(g.Form,{form:l,onFinish:n,layout:"vertical",children:[(0,i.jsx)(g.Form.Item,{label:"UI Access Mode",name:"ui_access_mode_type",tooltip:"Controls who can access the UI interface",children:(0,i.jsxs)(V.Select,{placeholder:"Select access mode",children:[(0,i.jsx)(V.Select.Option,{value:"all_authenticated_users",children:"All Authenticated Users"}),(0,i.jsx)(V.Select.Option,{value:"restricted_sso_group",children:"Restricted SSO Group"})]})}),(0,i.jsx)(g.Form.Item,{noStyle:!0,shouldUpdate:(e,i)=>e.ui_access_mode_type!==i.ui_access_mode_type,children:({getFieldValue:e})=>"restricted_sso_group"===e("ui_access_mode_type")?(0,i.jsx)(g.Form.Item,{label:"Restricted SSO Group",name:"restricted_sso_group",rules:[{required:!0,message:"Please enter the restricted SSO group"}],children:(0,i.jsx)(H.TextInput,{placeholder:"ui-access-group"})}):null}),(0,i.jsx)(g.Form.Item,{label:"SSO Group JWT Field",name:"sso_group_jwt_field",tooltip:"JWT field name that contains team/group information. Use dot notation to access nested fields.",children:(0,i.jsx)(H.TextInput,{placeholder:"groups"})}),(0,i.jsx)("div",{style:{textAlign:"right",marginTop:"16px"},children:(0,i.jsx)(p.Button,{type:"primary",htmlType:"submit",loading:t,style:{backgroundColor:"#6366f1",borderColor:"#6366f1"},children:"Update UI Access Control"})})]})]})},{Title:Q,Paragraph:Z,Text:X}=f.Typography;e.s(["default",0,({proxySettings:e})=>{let{t:f}=(0,j.useTranslation)(),{premiumUser:w,accessToken:k,userId:T}=(0,s.default)(),[O]=g.Form.useForm(),[E,N]=(0,y.useState)(!1),[F,A]=(0,y.useState)(!1),[M,P]=(0,y.useState)(!1),[U,R]=(0,y.useState)(!1),[B,L]=(0,y.useState)(!1),[z,D]=(0,y.useState)(!1),[V,q]=(0,y.useState)([]),[H,W]=(0,y.useState)(null),[$,K]=(0,y.useState)(!1),ee=(0,b.useBaseUrl)(),ei=f("admin.allIpAddressesAllowed"),es=ee;es+="/fallback/login";let el=async()=>{if(k)try{let e=await (0,v.getSSOSettings)(k);if(e&&e.values){let i=e.values.google_client_id&&e.values.google_client_secret,s=e.values.microsoft_client_id&&e.values.microsoft_client_secret,l=e.values.generic_client_id&&e.values.generic_client_secret;K(i||s||l)}else K(!1)}catch(e){console.error("Error checking SSO configuration:",e),K(!1)}},et=async()=>{try{if(!0!==w)return void S.default.fromBackend("This feature is only available for premium users. Please upgrade your account.");if(k){let e=await (0,v.getAllowedIPs)(k);q(e&&e.length>0?e:[ei])}else q([ei])}catch(e){console.error("Error fetching allowed IPs:",e),S.default.fromBackend(`Failed to fetch allowed IPs ${e}`),q([ei])}finally{!0===w&&P(!0)}},er=async e=>{try{if(k){await (0,v.addAllowedIP)(k,e.ip);let i=await (0,v.getAllowedIPs)(k);q(i),S.default.success(f("admin.ipAddedSuccess"))}}catch(e){console.error("Error adding IP:",e),S.default.fromBackend(`Failed to add IP address ${e}`)}finally{R(!1)}},en=async e=>{W(e),L(!0)},ea=async()=>{if(H&&k)try{await (0,v.deleteAllowedIP)(k,H);let e=await (0,v.getAllowedIPs)(k);q(e.length>0?e:[ei]),S.default.success(f("admin.ipDeletedSuccess"))}catch(e){console.error("Error deleting IP:",e),S.default.fromBackend(`Failed to delete IP address ${e}`)}finally{L(!1),W(null)}};(0,y.useEffect)(()=>{el()},[k,w,el]);let eo=()=>{D(!1)},ed=[{key:"sso-settings",label:f("admin.ssoSettings"),children:(0,i.jsx)(C.default,{})},{key:"security-settings",label:f("admin.securitySettings"),children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.Card,{children:[(0,i.jsx)(Q,{level:4,children:" âœ¨ Security Settings"}),(0,i.jsx)(m.Alert,{message:f("admin.ssoConfigDeprecated"),description:"Editing SSO Settings on this page is deprecated and will be removed in a future version. Please use the SSO Settings tab for SSO configuration.",type:"warning",showIcon:!0}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"1rem",marginLeft:"0.5rem"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(l.Button,{style:{width:"150px"},onClick:()=>N(!0),children:$?f("admin.editSsoSettings"):f("admin.addSso")})}),(0,i.jsx)("div",{children:(0,i.jsx)(l.Button,{style:{width:"150px"},onClick:et,children:"Allowed IPs"})}),(0,i.jsx)("div",{children:(0,i.jsx)(l.Button,{style:{width:"150px"},onClick:()=>!0===w?D(!0):S.default.fromBackend("Only premium users can configure UI access control"),children:"UI Access Control"})})]})]}),(0,i.jsxs)("div",{className:"flex justify-start mb-4",children:[(0,i.jsx)(Y,{isAddSSOModalVisible:E,isInstructionsModalVisible:F,handleAddSSOOk:()=>{N(!1),O.resetFields(),k&&w&&el()},handleAddSSOCancel:()=>{N(!1),O.resetFields()},handleShowInstructions:e=>{N(!1),A(!0)},handleInstructionsOk:()=>{A(!1),k&&w&&el()},handleInstructionsCancel:()=>{A(!1),k&&w&&el()},form:O,accessToken:k,ssoConfigured:$}),(0,i.jsx)(h.Modal,{title:f("admin.manageAllowedIpAddresses"),width:800,open:M,onCancel:()=>P(!1),footer:[(0,i.jsx)(l.Button,{className:"mx-1",onClick:()=>R(!0),children:"Add IP Address"},"add"),(0,i.jsx)(l.Button,{onClick:()=>P(!1),children:"Close"},"close")],children:(0,i.jsxs)(n.Table,{children:[(0,i.jsx)(d.TableHead,{children:(0,i.jsxs)(u.TableRow,{children:[(0,i.jsx)(c.TableHeaderCell,{children:f("admin.ipAddress")}),(0,i.jsx)(c.TableHeaderCell,{className:"text-right",children:f("admin.action")})]})}),(0,i.jsx)(a.TableBody,{children:V.map((e,s)=>(0,i.jsxs)(u.TableRow,{children:[(0,i.jsx)(o.TableCell,{children:e}),(0,i.jsx)(o.TableCell,{className:"text-right",children:e!==ei&&(0,i.jsx)(l.Button,{onClick:()=>en(e),color:"red",size:"xs",children:"Delete"})})]},s))})]})}),(0,i.jsx)(h.Modal,{title:f("admin.addAllowedIpAddress"),open:U,onCancel:()=>R(!1),footer:null,children:(0,i.jsxs)(g.Form,{onFinish:er,children:[(0,i.jsx)(g.Form.Item,{name:"ip",rules:[{required:!0,message:f("admin.pleaseEnterIp")}],children:(0,i.jsx)(_.Input,{placeholder:f("admin.enterIpAddress")})}),(0,i.jsx)(g.Form.Item,{children:(0,i.jsx)(p.Button,{htmlType:"submit",children:f("admin.addIpAddress")})})]})}),(0,i.jsx)(h.Modal,{title:"Confirm Delete",open:B,onCancel:()=>L(!1),onOk:ea,footer:[(0,i.jsx)(l.Button,{className:"mx-1",onClick:()=>ea(),children:"Yes"},"delete"),(0,i.jsx)(l.Button,{onClick:()=>L(!1),children:"Close"},"close")],children:(0,i.jsxs)(X,{children:["Are you sure you want to delete the IP address: ",H,"?"]})}),(0,i.jsx)(h.Modal,{title:"UI Access Control Settings",open:z,width:600,footer:null,onOk:eo,onCancel:()=>{D(!1)},children:(0,i.jsx)(J,{accessToken:k,onSuccess:()=>{eo(),S.default.success("UI Access Control settings updated successfully")}})})]}),(0,i.jsxs)(t.Callout,{title:"Login without SSO",color:"teal",children:["If you need to login without sso, you can access"," ",(0,i.jsxs)("a",{href:es,target:"_blank",rel:"noopener noreferrer",children:[(0,i.jsx)("b",{children:es})," "]})]})]})},{key:"scim",label:"SCIM",children:(0,i.jsx)(I.default,{accessToken:k,userID:T,proxySettings:e})},{key:"ui-settings",label:f("admin.uiSettings"),children:(0,i.jsx)(G,{})}];return(0,i.jsxs)("div",{className:"w-full m-2 mt-2 p-8",children:[(0,i.jsxs)(Q,{level:4,children:[f("admin.adminAccess")," "]}),(0,i.jsx)(Z,{children:"Go to 'Internal Users' page to add other admins."}),(0,i.jsx)(x.Tabs,{items:ed})]})}],105278)}]);