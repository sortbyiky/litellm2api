(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,921687,e=>{"use strict";var t=e.i(764205);let s=async(e,s)=>{try{let r=s||(0,t.getProxyBaseUrl)(),a=r?`${r}/v1/agents`:"/v1/agents",n=await fetch(a,{method:"GET",headers:{[(0,t.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok){let e=await n.json();throw Error(e.detail||"Failed to fetch agents")}let i=await n.json();return console.log("Fetched agents:",i),i.sort((e,t)=>{let s=e.agent_name||e.agent_id,r=t.agent_name||t.agent_id;return s.localeCompare(r)}),i}catch(e){throw console.error("Error fetching agents:",e),e}},r=async(e,s,r,a)=>{try{let a=await (0,t.modelInfoCall)(e,s,r,1,200),n=a?.data??[],i=(Array.isArray(n)?n:[]).filter(e=>"string"==typeof e?.litellm_params?.model&&e.litellm_params.model.startsWith("litellm_agent/")).map(e=>({model_name:e.model_name??e.model_group??"",litellm_params:{...e.litellm_params,model:e.litellm_params.model,litellm_system_prompt:e.litellm_params?.litellm_system_prompt,tools:Array.isArray(e.litellm_params?.tools)?e.litellm_params.tools:void 0},model_info:e.model_info??null}));return i.sort((e,t)=>e.model_name.localeCompare(t.model_name)),i}catch(e){throw console.error("Error fetching agent models:",e),e}};e.s(["fetchAvailableAgentModels",0,r,"fetchAvailableAgents",0,s])},254530,e=>{"use strict";var t=e.i(356449),s=e.i(764205);async function r(e,r,a,n,i,o,l,c,d,u,p,m,h,f,g,y,x,b,v,w,_,j,S,N){console.log=function(){},console.log("isLocal:",!1);let k=w||(0,s.getProxyBaseUrl)(),E={};i&&i.length>0&&(E["x-litellm-tags"]=i.join(","));let T=new t.default.OpenAI({apiKey:n,baseURL:k,dangerouslyAllowBrowser:!0,defaultHeaders:E});try{let t,s=Date.now(),n=!1,i={},w=!1,k=[];for await(let v of(f&&f.length>0&&(f.includes("__all__")?k.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never"}):f.forEach(e=>{let t=_?.find(t=>t.server_id===e),s=t?.alias||t?.server_name||e,r=j?.[e]||[];k.push({type:"mcp",server_label:"litellm",server_url:`litellm_proxy/mcp/${s}`,require_approval:"never",...r.length>0?{allowed_tools:r}:{}})})),await T.chat.completions.create({model:a,stream:!0,stream_options:{include_usage:!0},litellm_trace_id:u,messages:e,...p?{vector_store_ids:p}:{},...m?{guardrails:m}:{},...h?{policies:h}:{},...k.length>0?{tools:k,tool_choice:"auto"}:{},...void 0!==x?{temperature:x}:{},...void 0!==b?{max_tokens:b}:{},...N?{mock_testing_fallbacks:!0}:{}},{signal:o}))){console.log("Stream chunk:",v);let e=v.choices[0]?.delta;if(console.log("Delta content:",v.choices[0]?.delta?.content),console.log("Delta reasoning content:",e?.reasoning_content),!n&&(v.choices[0]?.delta?.content||e&&e.reasoning_content)&&(n=!0,t=Date.now()-s,console.log("First token received! Time:",t,"ms"),c?(console.log("Calling onTimingData with:",t),c(t)):console.log("onTimingData callback is not defined!")),v.choices[0]?.delta?.content){let e=v.choices[0].delta.content;r(e,v.model)}if(e&&e.image&&g&&(console.log("Image generated:",e.image),g(e.image.url,v.model)),e&&e.reasoning_content){let t=e.reasoning_content;l&&l(t)}if(e&&e.provider_specific_fields?.search_results&&y&&(console.log("Search results found:",e.provider_specific_fields.search_results),y(e.provider_specific_fields.search_results)),e&&e.provider_specific_fields){let t=e.provider_specific_fields;if(t.mcp_list_tools&&!i.mcp_list_tools&&(i.mcp_list_tools=t.mcp_list_tools,S&&!w)){w=!0;let e={type:"response.output_item.done",item_id:"mcp_list_tools",item:{type:"mcp_list_tools",tools:t.mcp_list_tools.map(e=>({name:e.function?.name||e.name||"",description:e.function?.description||e.description||"",input_schema:e.function?.parameters||e.input_schema||{}}))},timestamp:Date.now()};S(e),console.log("MCP list_tools event sent:",e)}t.mcp_tool_calls&&(i.mcp_tool_calls=t.mcp_tool_calls),t.mcp_call_results&&(i.mcp_call_results=t.mcp_call_results),(t.mcp_list_tools||t.mcp_tool_calls||t.mcp_call_results)&&console.log("MCP metadata found in chunk:",{mcp_list_tools:t.mcp_list_tools?"present":"absent",mcp_tool_calls:t.mcp_tool_calls?"present":"absent",mcp_call_results:t.mcp_call_results?"present":"absent"})}if(v.usage&&d){console.log("Usage data found:",v.usage);let e={completionTokens:v.usage.completion_tokens,promptTokens:v.usage.prompt_tokens,totalTokens:v.usage.total_tokens};v.usage.completion_tokens_details?.reasoning_tokens&&(e.reasoningTokens=v.usage.completion_tokens_details.reasoning_tokens),void 0!==v.usage.cost&&null!==v.usage.cost&&(e.cost=parseFloat(v.usage.cost)),d(e)}}S&&(i.mcp_tool_calls||i.mcp_call_results)&&i.mcp_tool_calls&&i.mcp_tool_calls.length>0&&i.mcp_tool_calls.forEach((e,t)=>{let s=e.function?.name||e.name||"",r=e.function?.arguments||e.arguments||"{}",a=i.mcp_call_results?.find(t=>t.tool_call_id===e.id||t.tool_call_id===e.call_id)||i.mcp_call_results?.[t],n={type:"response.output_item.done",item:{type:"mcp_call",name:s,arguments:"string"==typeof r?r:JSON.stringify(r),output:a?.result?"string"==typeof a.result?a.result:JSON.stringify(a.result):void 0},item_id:e.id||e.call_id,timestamp:Date.now()};S(n),console.log("MCP call event sent:",n)});let E=Date.now();v&&v(E-s)}catch(e){throw o?.aborted&&console.log("Chat completion request was cancelled"),e}}e.s(["makeOpenAIChatCompletionRequest",()=>r])},91500,124608,782273,422233,235267,318059,953860,434788,512882,584976,e=>{"use strict";let t,s,r,a;e.i(247167);var n,i,o,l,c,d,u,p,m,h,f,g,y,x,b,v,w,_,j,S,N,k,E,T,C,A,O,P,I,R,M,L,$,U,D,q,B,z,F,H,W,J,G,V,K,X,Y,Q,Z,ee=e.i(931067),et=e.i(271645);let es={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-pdf",theme:"outlined"};var er=e.i(9583),ea=et.forwardRef(function(e,t){return et.createElement(er.default,(0,ee.default)({},e,{ref:t,icon:es}))});e.s(["FilePdfOutlined",0,ea],91500);let en={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"};var ei=et.forwardRef(function(e,t){return et.createElement(er.default,(0,ee.default)({},e,{ref:t,icon:en}))});e.s(["PictureOutlined",0,ei],124608);let eo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"}}]},name:"sound",theme:"outlined"};var el=et.forwardRef(function(e,t){return et.createElement(er.default,(0,ee.default)({},e,{ref:t,icon:eo}))});e.s(["SoundOutlined",0,el],782273);let ec="u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ed=new Uint8Array(16),eu=[];for(let e=0;e<256;++e)eu.push((e+256).toString(16).slice(1));let ep=function(e,s,r){if(ec&&!s&&!e)return ec();let a=(e=e||{}).random??e.rng?.()??function(){if(!t){if("u"<typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(ed)}();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,s){if((r=r||0)<0||r+16>s.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)s[r+e]=a[e];return s}return function(e,t=0){return(eu[e[t+0]]+eu[e[t+1]]+eu[e[t+2]]+eu[e[t+3]]+"-"+eu[e[t+4]]+eu[e[t+5]]+"-"+eu[e[t+6]]+eu[e[t+7]]+"-"+eu[e[t+8]]+eu[e[t+9]]+"-"+eu[e[t+10]]+eu[e[t+11]]+eu[e[t+12]]+eu[e[t+13]]+eu[e[t+14]]+eu[e[t+15]]).toLowerCase()}(a)};e.s(["v4",0,ep],422233);var em=e.i(843476),eh=e.i(808613),ef=e.i(311451),eg=e.i(28651),ey=e.i(199133),ex=e.i(592968),eb=e.i(827252);function ev(e){if(!e)return[];if(Array.isArray(e))return e.map(e=>ew(e)).filter(e=>void 0!==e);let t=ew(e);return void 0!==t?[t]:[]}function ew(e,t){if(!e)return;let s=void 0!==t?t:e.default;if("object"===e.type){let t="object"!=typeof s||null===s||Array.isArray(s)?{}:{...s};return e.properties&&Object.entries(e.properties).forEach(([e,s])=>{t[e]=ew(s,t[e])}),t}if("array"===e.type){if(Array.isArray(s)){let t=e.items;if(!t)return s;if(0===s.length){let e=ev(t);return e.length?e:s}return Array.isArray(t)?s.map((e,s)=>ew(t[s]??t[t.length-1],e)):s.map(e=>ew(t,e))}return void 0!==s?s:ev(e.items)}if(void 0!==s)return s;switch(e.type){case"integer":case"number":return 0;case"boolean":return!1;default:return""}}let e_=e=>{let t=ew(e);if("object"===e.type||"array"===e.type){let s="array"===e.type?[]:{};return JSON.stringify(t??s,null,2)}return t},ej=(0,et.forwardRef)(({tool:e,className:t},s)=>{let[r]=eh.Form.useForm(),a=(0,et.useMemo)(()=>"string"==typeof e.inputSchema?{type:"object",properties:{input:{type:"string",description:"Input for this tool"}},required:["input"]}:e.inputSchema,[e.inputSchema]),n=(0,et.useMemo)(()=>a.properties?.params?.type==="object"&&a.properties.params.properties?{type:"object",properties:a.properties.params.properties,required:a.properties.params.required||[]}:a,[a]);return((0,et.useImperativeHandle)(s,()=>({getSubmitValues:async()=>{var e;let t;return e=await r.validateFields(),t={},Object.entries(e).forEach(([e,s])=>{let r=n.properties?.[e];if(r&&null!=s&&""!==s)switch(r.type){case"boolean":t[e]="true"===s||!0===s;break;case"number":case"integer":{let a=Number(s);t[e]=Number.isNaN(a)?s:"integer"===r.type?Math.trunc(a):a;break}case"object":case"array":try{let a="string"==typeof s?JSON.parse(s):s,n="object"===r.type&&null!==a&&"object"==typeof a&&!Array.isArray(a),i="array"===r.type&&Array.isArray(a);"object"===r.type&&n||"array"===r.type&&i?t[e]=a:t[e]=s}catch{t[e]=s}break;case"string":t[e]=String(s);break;default:t[e]=s}else null!=s&&""!==s&&(t[e]=s)}),a.properties?.params?.type==="object"&&a.properties.params.properties?{params:t}:t}})),et.default.useEffect(()=>{if(r.resetFields(),!n.properties)return;let e={};Object.entries(n.properties).forEach(([t,s])=>{e[t]=e_(s)}),r.setFieldsValue(e)},[r,n,e]),"string"==typeof e.inputSchema)?(0,em.jsx)(eh.Form,{form:r,layout:"vertical",className:t,children:(0,em.jsx)(eh.Form.Item,{label:(0,em.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Input ",(0,em.jsx)("span",{className:"text-red-500",children:"*"})]}),name:"input",rules:[{required:!0,message:"Please enter input for this tool"}],children:(0,em.jsx)(ef.Input,{placeholder:"Enter input for this tool"})})}):n.properties?(0,em.jsx)(eh.Form,{form:r,layout:"vertical",className:t,children:Object.entries(n.properties).map(([t,s])=>{let r=e_(s),a=`${e.name}-${t}`;return(0,em.jsx)(eh.Form.Item,{label:(0,em.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:[t," ",n.required?.includes(t)&&(0,em.jsx)("span",{className:"text-red-500",children:"*"}),s.description&&(0,em.jsx)(ex.Tooltip,{title:s.description,children:(0,em.jsx)(eb.InfoCircleOutlined,{className:"ml-2 text-gray-400 hover:text-gray-600"})})]}),name:t,initialValue:r,rules:[{required:n.required?.includes(t),message:`Please enter ${t}`},..."object"===s.type||"array"===s.type?[{validator:(e,r)=>{if((null==r||""===r)&&!n.required?.includes(t))return Promise.resolve();try{let e="string"==typeof r?JSON.parse(r):r,t="object"===s.type&&null!==e&&"object"==typeof e&&!Array.isArray(e),a="array"===s.type&&Array.isArray(e);if("object"===s.type&&t||"array"===s.type&&a)return Promise.resolve();return Promise.reject(Error("object"===s.type?"Please enter a JSON object":"Please enter a JSON array"))}catch{return Promise.reject(Error("Invalid JSON"))}}}]:[]],children:"string"===s.type&&s.enum?(0,em.jsx)(ey.Select,{placeholder:`Select ${t}`,allowClear:!n.required?.includes(t),options:s.enum.map(e=>({value:e,label:e}))}):"string"!==s.type||s.enum?"number"===s.type||"integer"===s.type?(0,em.jsx)(eg.InputNumber,{step:"integer"===s.type?1:void 0,placeholder:s.description||`Enter ${t}`,className:"w-full",style:{width:"100%"}}):"boolean"===s.type?(0,em.jsx)(ey.Select,{placeholder:`Select ${t}`,allowClear:!n.required?.includes(t),options:[{value:!0,label:"True"},{value:!1,label:"False"}]}):"object"===s.type||"array"===s.type?(0,em.jsx)(ef.Input.TextArea,{rows:"object"===s.type?4:3,placeholder:s.description||("object"===s.type?`Enter JSON object for ${t}`:`Enter JSON array for ${t}`),spellCheck:!1,className:"font-mono"}):(0,em.jsx)(ef.Input,{placeholder:s.description||`Enter ${t}`,allowClear:!0}):(0,em.jsx)(ef.Input,{placeholder:s.description||`Enter ${t}`,allowClear:!0})},a)})}):(0,em.jsx)(eh.Form,{form:r,layout:"vertical",className:t,children:(0,em.jsx)("div",{className:"py-4 text-center text-sm text-gray-500",children:"No parameters required for this tool."})})});ej.displayName="MCPToolArgumentsForm",e.s(["default",0,ej],235267);var eS=e.i(764205);e.s(["default",0,({onChange:e,value:t,className:s,accessToken:r})=>{let[a,n]=(0,et.useState)([]),[i,o]=(0,et.useState)(!1);return(0,et.useEffect)(()=>{(async()=>{if(r)try{let e=await (0,eS.tagListCall)(r);console.log("List tags response:",e),n(Object.values(e))}catch(e){console.error("Error fetching tags:",e)}finally{o(!1)}})()},[r]),(0,em.jsx)(ey.Select,{mode:"tags",showSearch:!0,placeholder:"Select or create tags",onChange:e,value:t,loading:i,className:s,options:a.map(e=>({label:e.name,value:e.name,title:e.description||e.name})),optionFilterProp:"label",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"}})}],318059);let eN=e=>{if(!e)return;let t={};if(e.id&&(t.taskId=e.id),e.contextId&&(t.contextId=e.contextId),e.status&&(t.status={state:e.status.state,timestamp:e.status.timestamp},e.status.message?.parts)){let s=e.status.message.parts.filter(e=>"text"===e.kind&&e.text).map(e=>e.text).join(" ");s&&(t.status.message=s)}return e.metadata&&"object"==typeof e.metadata&&(t.metadata=e.metadata),Object.keys(t).length>0?t:void 0},ek=async(e,t,s,r,a,n,i,o,l,c)=>{let d=l||(0,eS.getProxyBaseUrl)(),u=d?`${d}/a2a/${e}/message/send`:`/a2a/${e}/message/send`,p={jsonrpc:"2.0",id:ep(),method:"message/send",params:{message:{kind:"message",messageId:ep().replace(/-/g,""),role:"user",parts:[{kind:"text",text:t}]}}};c&&c.length>0&&(p.params.metadata={guardrails:c});let m=performance.now();try{let t=await fetch(u,{method:"POST",headers:{[(0,eS.getGlobalLitellmHeaderName)()]:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(p),signal:a}),l=performance.now()-m;if(n&&n(l),!t.ok){let e=await t.json();throw Error(e.error?.message||e.detail||`HTTP ${t.status}`)}let c=await t.json(),d=performance.now()-m;if(i&&i(d),c.error)throw Error(c.error.message);let h=c.result;if(h){let t="",r=eN(h);if(r&&o&&o(r),h.artifacts&&Array.isArray(h.artifacts)){for(let e of h.artifacts)if(e.parts&&Array.isArray(e.parts))for(let s of e.parts)"text"===s.kind&&s.text&&(t+=s.text)}else if(h.parts&&Array.isArray(h.parts))for(let e of h.parts)"text"===e.kind&&e.text&&(t+=e.text);else if(h.status?.message?.parts)for(let e of h.status.message.parts)"text"===e.kind&&e.text&&(t+=e.text);t?s(t,`a2a_agent/${e}`):(console.warn("Could not extract text from A2A response, showing raw JSON:",h),s(JSON.stringify(h,null,2),`a2a_agent/${e}`))}}catch(e){if(a?.aborted)return void console.log("A2A request was cancelled");throw console.error("A2A send message error:",e),e}},eE=async(e,t,s,r,a,n,i,o,l)=>{let c,d=l||(0,eS.getProxyBaseUrl)(),u=d?`${d}/a2a/${e}`:`/a2a/${e}`,p=ep(),m=ep().replace(/-/g,""),h=performance.now(),f=!1,g="";try{let l=await fetch(u,{method:"POST",headers:{[(0,eS.getGlobalLitellmHeaderName)()]:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:p,method:"message/stream",params:{message:{kind:"message",messageId:m,role:"user",parts:[{kind:"text",text:t}]}}}),signal:a});if(!l.ok){let e=await l.json();throw Error(e.error?.message||e.detail||`HTTP ${l.status}`)}let d=l.body?.getReader();if(!d)throw Error("No response body");let y=new TextDecoder,x="",b=!1;for(;!b;){let t=await d.read();b=t.done;let r=t.value;if(b)break;let a=(x+=y.decode(r,{stream:!0})).split("\n");for(let t of(x=a.pop()||"",a))if(t.trim())try{let r=JSON.parse(t);if(!f){f=!0;let e=performance.now()-h;n&&n(e)}let a=r.result;if(a){let t=eN(a);t&&(c={...c,...t});let r=a.kind;if("artifact-update"===r&&a.artifact){let t=a.artifact;if(t.parts&&Array.isArray(t.parts))for(let r of t.parts)"text"===r.kind&&r.text&&(g+=r.text,s(g,`a2a_agent/${e}`))}else if(a.artifacts&&Array.isArray(a.artifacts)){for(let t of a.artifacts)if(t.parts&&Array.isArray(t.parts))for(let r of t.parts)"text"===r.kind&&r.text&&(g+=r.text,s(g,`a2a_agent/${e}`))}else if("status-update"===r);else if(a.parts&&Array.isArray(a.parts))for(let t of a.parts)"text"===t.kind&&t.text&&(g+=t.text,s(g,`a2a_agent/${e}`))}if(r.error){let e=r.error.message||"Unknown A2A error";throw Error(e)}}catch(e){if(e instanceof Error&&e.message&&!e.message.includes("JSON"))throw e;t.trim().length>0&&console.warn("Failed to parse A2A streaming chunk:",t,e)}}let v=performance.now()-h;i&&i(v),c&&o&&o(c)}catch(e){if(a?.aborted)return void console.log("A2A streaming request was cancelled");throw console.error("A2A stream message error:",e),e}};function eT(e,t,s,r,a){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,s):a?a.value=s:t.set(e,s),s}function eC(e,t,s,r){if("a"===s&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)}e.s(["makeA2ASendMessageRequest",0,ek,"makeA2AStreamMessageRequest",0,eE],953860);let eA=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return eA=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),s=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^s()&15>>e/4).toString(16))};function eO(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let eP=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return Error(JSON.stringify(e))}catch{}}return Error(e)};class eI extends Error{}class eR extends eI{constructor(e,t,s,r){super(`${eR.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.requestID=r?.get("request-id"),this.error=t}static makeMessage(e,t,s){let r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){return e&&r?400===e?new eU(e,t,s,r):401===e?new eD(e,t,s,r):403===e?new eq(e,t,s,r):404===e?new eB(e,t,s,r):409===e?new ez(e,t,s,r):422===e?new eF(e,t,s,r):429===e?new eH(e,t,s,r):e>=500?new eW(e,t,s,r):new eR(e,t,s,r):new eL({message:s,cause:eP(t)})}}class eM extends eR{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class eL extends eR{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class e$ extends eL{constructor({message:e}={}){super({message:e??"Request timed out."})}}class eU extends eR{}class eD extends eR{}class eq extends eR{}class eB extends eR{}class ez extends eR{}class eF extends eR{}class eH extends eR{}class eW extends eR{}let eJ=/^[a-z][a-z0-9+.-]*:/i;function eG(e){return"object"!=typeof e?{}:e??{}}let eV=e=>{try{return JSON.parse(e)}catch(e){return}},eK={off:0,error:200,warn:300,info:400,debug:500},eX=(e,t,s)=>{if(e){if(Object.prototype.hasOwnProperty.call(eK,e))return e;e1(s).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(eK))}`)}};function eY(){}function eQ(e,t,s){return!t||eK[e]>eK[s]?eY:t[e].bind(t)}let eZ={error:eY,warn:eY,info:eY,debug:eY},e0=new WeakMap;function e1(e){let t=e.logger,s=e.logLevel??"off";if(!t)return eZ;let r=e0.get(t);if(r&&r[0]===s)return r[1];let a={error:eQ("error",t,s),warn:eQ("warn",t,s),info:eQ("info",t,s),debug:eQ("debug",t,s)};return e0.set(t,[s,a]),a}let e2=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e),e4="0.54.0",e3=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",e5=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";function e6(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function e8(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return e6({start(){},async pull(e){let{done:s,value:r}=await t.next();s?e.close():e.enqueue(r)},async cancel(){await t.return?.()}})}function e7(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function e9(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await e[Symbol.asyncIterator]().return?.();let t=e.getReader(),s=t.cancel();t.releaseLock(),await s}let te=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});function tt(e){let t;return(r??(r=(t=new globalThis.TextEncoder).encode.bind(t)))(e)}function ts(e){let t;return(a??(a=(t=new globalThis.TextDecoder).decode.bind(t)))(e)}class tr{constructor(){n.set(this,void 0),i.set(this,void 0),eT(this,n,new Uint8Array,"f"),eT(this,i,null,"f")}decode(e){let t;if(null==e)return[];let s=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?tt(e):e;eT(this,n,function(e){let t=0;for(let s of e)t+=s.length;let s=new Uint8Array(t),r=0;for(let t of e)s.set(t,r),r+=t.length;return s}([eC(this,n,"f"),s]),"f");let r=[];for(;null!=(t=function(e,t){for(let s=t??0;s<e.length;s++){if(10===e[s])return{preceding:s,index:s+1,carriage:!1};if(13===e[s])return{preceding:s,index:s+1,carriage:!0}}return null}(eC(this,n,"f"),eC(this,i,"f")));){if(t.carriage&&null==eC(this,i,"f")){eT(this,i,t.index,"f");continue}if(null!=eC(this,i,"f")&&(t.index!==eC(this,i,"f")+1||t.carriage)){r.push(ts(eC(this,n,"f").subarray(0,eC(this,i,"f")-1))),eT(this,n,eC(this,n,"f").subarray(eC(this,i,"f")),"f"),eT(this,i,null,"f");continue}let e=null!==eC(this,i,"f")?t.preceding-1:t.preceding,s=ts(eC(this,n,"f").subarray(0,e));r.push(s),eT(this,n,eC(this,n,"f").subarray(t.index),"f"),eT(this,i,null,"f")}return r}flush(){return eC(this,n,"f").length?this.decode("\n"):[]}}n=new WeakMap,i=new WeakMap,tr.NEWLINE_CHARS=new Set(["\n","\r"]),tr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class ta{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;async function*r(){if(s)throw new eI("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let r=!1;try{for await(let s of tn(e,t)){if("completion"===s.event)try{yield JSON.parse(s.data)}catch(e){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),e}if("message_start"===s.event||"message_delta"===s.event||"message_stop"===s.event||"content_block_start"===s.event||"content_block_delta"===s.event||"content_block_stop"===s.event)try{yield JSON.parse(s.data)}catch(e){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),e}if("ping"!==s.event&&"error"===s.event)throw new eR(void 0,eV(s.data)??s.data,void 0,e.headers)}r=!0}catch(e){if(eO(e))return;throw e}finally{r||t.abort()}}return new ta(r,t)}static fromReadableStream(e,t){let s=!1;async function*r(){let t=new tr;for await(let s of e7(e))for(let e of t.decode(s))yield e;for(let e of t.flush())yield e}return new ta(async function*(){if(s)throw new eI("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let e=!1;try{for await(let t of r())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(eO(e))return;throw e}finally{e||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],s=this.iterator(),r=r=>({next:()=>{if(0===r.length){let r=s.next();e.push(r),t.push(r)}return r.shift()}});return[new ta(()=>r(e),this.controller),new ta(()=>r(t),this.controller)]}toReadableStream(){let e,t=this;return e6({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:s,done:r}=await e.next();if(r)return t.close();let a=tt(JSON.stringify(s)+"\n");t.enqueue(a)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*tn(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new eI("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new eI("Attempted to iterate over a response with no body")}let s=new to,r=new tr;for await(let t of ti(e7(e.body)))for(let e of r.decode(t)){let t=s.decode(e);t&&(yield t)}for(let e of r.flush()){let t=s.decode(e);t&&(yield t)}}async function*ti(e){let t=new Uint8Array;for await(let s of e){let e;if(null==s)continue;let r=s instanceof ArrayBuffer?new Uint8Array(s):"string"==typeof s?tt(s):s,a=new Uint8Array(t.length+r.length);for(a.set(t),a.set(r,t.length),t=a;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class to{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){var t;let s;if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,a,n]=-1!==(s=(t=e).indexOf(":"))?[t.substring(0,s),":",t.substring(s+1)]:[t,"",""];return n.startsWith(" ")&&(n=n.substring(1)),"event"===r?this.event=n:"data"===r&&this.data.push(n),null}}async function tl(e,t){let{response:s,requestLogID:r,retryOfRequestLogID:a,startTime:n}=t,i=await (async()=>{if(t.options.stream)return(e1(e).debug("response",s.status,s.url,s.headers,s.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(s,t.controller):ta.fromSSEResponse(s,t.controller);if(204===s.status)return null;if(t.options.__binaryResponse)return s;let r=s.headers.get("content-type"),a=r?.split(";")[0]?.trim();return a?.includes("application/json")||a?.endsWith("+json")?tc(await s.json(),s):await s.text()})();return e1(e).debug(`[${r}] response parsed`,e2({retryOfRequestLogID:a,url:s.url,status:s.status,body:i,durationMs:Date.now()-n})),i}function tc(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class td extends Promise{constructor(e,t,s=tl){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=s,o.set(this,void 0),eT(this,o,e,"f")}_thenUnwrap(e){return new td(eC(this,o,"f"),this.responsePromise,async(t,s)=>tc(e(await this.parseResponse(t,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(eC(this,o,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}o=new WeakMap;class tu{constructor(e,t,s,r){l.set(this,void 0),eT(this,l,e,"f"),this.options=r,this.response=t,this.body=s}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new eI("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await eC(this,l,"f").requestAPIList(this.constructor,e)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(l=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class tp extends td{constructor(e,t,s){super(e,t,async(e,t)=>new s(e,t.response,await tl(e,t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}class tm extends tu{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.first_id=s.first_id||null,this.last_id=s.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let e=this.first_id;return e?{...this.options,query:{...eG(this.options.query),before_id:e}}:null}let e=this.last_id;return e?{...this.options,query:{...eG(this.options.query),after_id:e}}:null}}let th=()=>{if("u"<typeof File){let{process:e}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof e?.versions?.node&&20>parseInt(e.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tf(e,t,s){return th(),new File(e,t??"unknown_file",s)}function tg(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}let ty=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],tx=async(e,t)=>({...e,body:await tv(e.body,t)}),tb=new WeakMap,tv=async(e,t)=>{if(!await function(e){let t="function"==typeof e?e:e.fetch,s=tb.get(t);if(s)return s;let r=(async()=>{try{let e="Response"in t?t.Response:(await t("data:,")).constructor,s=new FormData;if(s.toString()===await new e(s).text())return!1;return!0}catch{return!0}})();return tb.set(t,r),r}(t))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let s=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>tw(s,e,t))),s},tw=async(e,t,s)=>{if(void 0!==s){if(null==s)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof s||"number"==typeof s||"boolean"==typeof s)e.append(t,String(s));else if(s instanceof Response){let r={},a=s.headers.get("Content-Type");a&&(r={type:a}),e.append(t,tf([await s.blob()],tg(s),r))}else if(ty(s))e.append(t,tf([await new Response(e8(s)).blob()],tg(s)));else{let r;if((r=s)instanceof Blob&&"name"in r)e.append(t,tf([s],tg(s),{type:s.type}));else if(Array.isArray(s))await Promise.all(s.map(s=>tw(e,t+"[]",s)));else if("object"==typeof s)await Promise.all(Object.entries(s).map(([s,r])=>tw(e,`${t}[${s}]`,r)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`)}}},t_=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function tj(e,t,s){let r,a;if(th(),e=await e,t||(t=tg(e)),null!=(r=e)&&"object"==typeof r&&"string"==typeof r.name&&"number"==typeof r.lastModified&&t_(r))return e instanceof File&&null==t&&null==s?e:tf([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...s});if(null!=(a=e)&&"object"==typeof a&&"string"==typeof a.url&&"function"==typeof a.blob){let r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),tf(await tS(r),t,s)}let n=await tS(e);if(!s?.type){let e=n.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(s={...s,type:e})}return tf(n,t,s)}async function tS(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(t_(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(ty(e))for await(let s of e)t.push(...await tS(s));else{let t=e?.constructor?.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class tN{constructor(e){this._client=e}}let tk=Symbol.for("brand.privateNullableHeaders"),tE=Array.isArray,tT=e=>{let t=new Headers,s=new Set;for(let r of e){let e=new Set;for(let[a,n]of function*(e){let t;if(!e)return;if(tk in e){let{values:t,nulls:s}=e;for(let e of(yield*t.entries(),s))yield[e,null];return}let s=!1;for(let r of(e instanceof Headers?t=e.entries():tE(e)?t=e:(s=!0,t=Object.entries(e??{})),t)){let e=r[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=tE(r[1])?r[1]:[r[1]],a=!1;for(let r of t)void 0!==r&&(s&&!a&&(a=!0,yield[e,null]),yield[e,r])}}(r)){let r=a.toLowerCase();e.has(r)||(t.delete(a),e.add(r)),null===n?(t.delete(a),s.add(r)):(t.append(a,n),s.delete(r))}}return{[tk]:!0,values:t,nulls:s}};function tC(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let tA=((e=tC)=>function(t,...s){let r;if(1===t.length)return t[0];let a=!1,n=t.reduce((t,r,n)=>(/[?#]/.test(r)&&(a=!0),t+r+(n===s.length?"":(a?encodeURIComponent:e)(String(s[n])))),""),i=n.split(/[?#]/,1)[0],o=[],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(r=l.exec(i));)o.push({start:r.index,length:r[0].length});if(o.length>0){let e=0,t=o.reduce((t,s)=>{let r=" ".repeat(s.start-e),a="^".repeat(s.length);return e=s.start+s.length,t+r+a},"");throw new eI(`Path parameters result in path with invalid segments:
${n}
${t}`)}return n})(tC);class tO extends tN{list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/files",tm,{query:r,...t,headers:tT([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},s){let{betas:r}=t??{};return this._client.delete(tA`/v1/files/${e}`,{...s,headers:tT([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},s?.headers])})}download(e,t={},s){let{betas:r}=t??{};return this._client.get(tA`/v1/files/${e}/content`,{...s,headers:tT([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},s){let{betas:r}=t??{};return this._client.get(tA`/v1/files/${e}`,{...s,headers:tT([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},s?.headers])})}upload(e,t){let{betas:s,...r}=e;return this._client.post("/v1/files",tx({body:r,...t,headers:tT([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}class tP extends tN{retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(tA`/v1/models/${e}?beta=true`,{...s,headers:tT([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/models?beta=true",tm,{query:r,...t,headers:tT([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers])})}}class tI{constructor(e,t){this.iterator=e,this.controller=t}async *decoder(){let e=new tr;for await(let t of this.iterator)for(let s of e.decode(t))yield JSON.parse(s);for(let t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new eI("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new eI("Attempted to iterate over a response with no body")}return new tI(e7(e.body),t)}}class tR extends tN{create(e,t){let{betas:s,...r}=e;return this._client.post("/v1/messages/batches?beta=true",{body:r,...t,headers:tT([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(tA`/v1/messages/batches/${e}?beta=true`,{...s,headers:tT([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",tm,{query:r,...t,headers:tT([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},s){let{betas:r}=t??{};return this._client.delete(tA`/v1/messages/batches/${e}?beta=true`,{...s,headers:tT([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}cancel(e,t={},s){let{betas:r}=t??{};return this._client.post(tA`/v1/messages/batches/${e}/cancel?beta=true`,{...s,headers:tT([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}async results(e,t={},s){let r=await this.retrieve(e);if(!r.results_url)throw new eI(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);let{betas:a}=t??{};return this._client.get(r.results_url,{...s,headers:tT([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},s?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>tI.fromResponse(t.response,t.controller))}}let tM=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return tM(e=e.slice(0,e.length-1));case"number":let s=t.value[t.value.length-1];if("."===s||"-"===s)return tM(e=e.slice(0,e.length-1));case"string":let r=e[e.length-2];if(r?.type==="delimiter"||r?.type==="brace"&&"{"===r.value)return tM(e=e.slice(0,e.length-1));break;case"delimiter":return tM(e=e.slice(0,e.length-1))}return e},tL=e=>{var t;let s,r;return JSON.parse((t=tM((e=>{let t=0,s=[];for(;t<e.length;){let r=e[t];if("\\"===r){t++;continue}if("{"===r){s.push({type:"brace",value:"{"}),t++;continue}if("}"===r){s.push({type:"brace",value:"}"}),t++;continue}if("["===r){s.push({type:"paren",value:"["}),t++;continue}if("]"===r){s.push({type:"paren",value:"]"}),t++;continue}if(":"===r){s.push({type:"separator",value:":"}),t++;continue}if(","===r){s.push({type:"delimiter",value:","}),t++;continue}if('"'===r){let a="",n=!1;for(r=e[++t];'"'!==r;){if(t===e.length){n=!0;break}if("\\"===r){if(++t===e.length){n=!0;break}a+=r+e[t],r=e[++t]}else a+=r,r=e[++t]}r=e[++t],n||s.push({type:"string",value:a});continue}let a=/\s/;if(r&&a.test(r)){t++;continue}let n=/[0-9]/;if(r&&n.test(r)||"-"===r||"."===r){let a="";for("-"===r&&(a+=r,r=e[++t]);r&&n.test(r)||"."===r;)a+=r,r=e[++t];s.push({type:"number",value:a});continue}let i=/[a-z]/i;if(r&&i.test(r)){let a="";for(;r&&i.test(r)&&t!==e.length;)a+=r,r=e[++t];"true"==a||"false"==a||"null"===a?s.push({type:"name",value:a}):t++;continue}t++}return s})(e)),s=[],t.map(e=>{"brace"===e.type&&("{"===e.value?s.push("}"):s.splice(s.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?s.push("]"):s.splice(s.lastIndexOf("]"),1))}),s.length>0&&s.reverse().map(e=>{"}"===e?t.push({type:"brace",value:"}"}):"]"===e&&t.push({type:"paren",value:"]"})}),r="",t.map(e=>{"string"===e.type?r+='"'+e.value+'"':r+=e.value}),r))},t$="__json_buf";function tU(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class tD{constructor(){c.add(this),this.messages=[],this.receivedMessages=[],d.set(this,void 0),this.controller=new AbortController,u.set(this,void 0),p.set(this,()=>{}),m.set(this,()=>{}),h.set(this,void 0),f.set(this,()=>{}),g.set(this,()=>{}),y.set(this,{}),x.set(this,!1),b.set(this,!1),v.set(this,!1),w.set(this,!1),_.set(this,void 0),j.set(this,void 0),k.set(this,e=>{if(eT(this,b,!0,"f"),eO(e)&&(e=new eM),e instanceof eM)return eT(this,v,!0,"f"),this._emit("abort",e);if(e instanceof eI)return this._emit("error",e);if(e instanceof Error){let t=new eI(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new eI(String(e)))}),eT(this,u,new Promise((e,t)=>{eT(this,p,e,"f"),eT(this,m,t,"f")}),"f"),eT(this,h,new Promise((e,t)=>{eT(this,f,e,"f"),eT(this,g,t,"f")}),"f"),eC(this,u,"f").catch(()=>{}),eC(this,h,"f").catch(()=>{})}get response(){return eC(this,_,"f")}get request_id(){return eC(this,j,"f")}async withResponse(){let e=await eC(this,u,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new tD;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s){let r=new tD;for(let e of t.messages)r._addMessageParam(e);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},eC(this,k,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){let r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),eC(this,c,"m",E).call(this);let{response:a,data:n}=await e.create({...t,stream:!0},{...s,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(a),n))eC(this,c,"m",T).call(this,e);if(n.controller.signal?.aborted)throw new eM;eC(this,c,"m",C).call(this)}_connected(e){this.ended||(eT(this,_,e,"f"),eT(this,j,e?.headers.get("request-id"),"f"),eC(this,p,"f").call(this,e),this._emit("connect"))}get ended(){return eC(this,x,"f")}get errored(){return eC(this,b,"f")}get aborted(){return eC(this,v,"f")}abort(){this.controller.abort()}on(e,t){return(eC(this,y,"f")[e]||(eC(this,y,"f")[e]=[])).push({listener:t}),this}off(e,t){let s=eC(this,y,"f")[e];if(!s)return this;let r=s.findIndex(e=>e.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(eC(this,y,"f")[e]||(eC(this,y,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{eT(this,w,!0,"f"),"error"!==e&&this.once("error",s),this.once(e,t)})}async done(){eT(this,w,!0,"f"),await eC(this,h,"f")}get currentMessage(){return eC(this,d,"f")}async finalMessage(){return await this.done(),eC(this,c,"m",S).call(this)}async finalText(){return await this.done(),eC(this,c,"m",N).call(this)}_emit(e,...t){if(eC(this,x,"f"))return;"end"===e&&(eT(this,x,!0,"f"),eC(this,f,"f").call(this));let s=eC(this,y,"f")[e];if(s&&(eC(this,y,"f")[e]=s.filter(e=>!e.once),s.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];eC(this,w,"f")||s?.length||Promise.reject(e),eC(this,m,"f").call(this,e),eC(this,g,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];eC(this,w,"f")||s?.length||Promise.reject(e),eC(this,m,"f").call(this,e),eC(this,g,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",eC(this,c,"m",S).call(this))}async _fromReadableStream(e,t){let s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),eC(this,c,"m",E).call(this),this._connected(null);let r=ta.fromReadableStream(e,this.controller);for await(let e of r)eC(this,c,"m",T).call(this,e);if(r.controller.signal?.aborted)throw new eM;eC(this,c,"m",C).call(this)}[(d=new WeakMap,u=new WeakMap,p=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakMap,x=new WeakMap,b=new WeakMap,v=new WeakMap,w=new WeakMap,_=new WeakMap,j=new WeakMap,k=new WeakMap,c=new WeakSet,S=function(){if(0===this.receivedMessages.length)throw new eI("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},N=function(){if(0===this.receivedMessages.length)throw new eI("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new eI("stream ended without producing a content block with type=text");return e.join(" ")},E=function(){this.ended||eT(this,d,void 0,"f")},T=function(e){if(this.ended)return;let t=eC(this,c,"m",A).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let s=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===s.type&&this._emit("text",e.delta.text,s.text||"");break;case"citations_delta":"text"===s.type&&this._emit("citation",e.delta.citation,s.citations??[]);break;case"input_json_delta":tU(s)&&s.input&&this._emit("inputJson",e.delta.partial_json,s.input);break;case"thinking_delta":"thinking"===s.type&&this._emit("thinking",e.delta.thinking,s.thinking);break;case"signature_delta":"thinking"===s.type&&this._emit("signature",s.signature);break;default:tq(e.delta)}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":eT(this,d,t,"f")}},C=function(){if(this.ended)throw new eI("stream has ended, this shouldn't happen");let e=eC(this,d,"f");if(!e)throw new eI("request ended without sending any chunks");return eT(this,d,void 0,"f"),e},A=function(e){let t=eC(this,d,"f");if("message_start"===e.type){if(t)throw new eI(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new eI(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{let s=t.content.at(e.index);switch(e.delta.type){case"text_delta":s?.type==="text"&&(s.text+=e.delta.text);break;case"citations_delta":s?.type==="text"&&(s.citations??(s.citations=[]),s.citations.push(e.delta.citation));break;case"input_json_delta":if(s&&tU(s)){let t=s[t$]||"";if(Object.defineProperty(s,t$,{value:t+=e.delta.partial_json,enumerable:!1,writable:!0}),t)try{s.input=tL(t)}catch(s){let e=new eI(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${s}. JSON: ${t}`);eC(this,k,"f").call(this,e)}}break;case"thinking_delta":s?.type==="thinking"&&(s.thinking+=e.delta.thinking);break;case"signature_delta":s?.type==="thinking"&&(s.signature=e.delta.signature);break;default:tq(e.delta)}return t}}},Symbol.asyncIterator)](){let e=[],t=[],s=!1;return this.on("streamEvent",s=>{let r=t.shift();r?r.resolve(s):e.push(s)}),this.on("end",()=>{for(let e of(s=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((e,s)=>t.push({resolve:e,reject:s})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ta(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function tq(e){}let tB={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192},tz={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};class tF extends tN{constructor(){super(...arguments),this.batches=new tR(this._client)}create(e,t){let{betas:s,...r}=e;r.model in tz&&console.warn(`The model '${r.model}' is deprecated and will reach end-of-life on ${tz[r.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let a=this._client._options.timeout;if(!r.stream&&null==a){let e=tB[r.model]??void 0;a=this._client.calculateNonstreamingTimeout(r.max_tokens,e)}return this._client.post("/v1/messages?beta=true",{body:r,timeout:a??6e5,...t,headers:tT([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}stream(e,t){return tD.createMessage(this,e,t)}countTokens(e,t){let{betas:s,...r}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:r,...t,headers:tT([{"anthropic-beta":[...s??[],"token-counting-2024-11-01"].toString()},t?.headers])})}}tF.Batches=tR;class tH extends tN{constructor(){super(...arguments),this.models=new tP(this._client),this.messages=new tF(this._client),this.files=new tO(this._client)}}tH.Models=tP,tH.Messages=tF,tH.Files=tO;class tW extends tN{create(e,t){let{betas:s,...r}=e;return this._client.post("/v1/complete",{body:r,timeout:this._client._options.timeout??6e5,...t,headers:tT([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}let tJ="__json_buf";function tG(e){return"tool_use"===e.type||"server_tool_use"===e.type}class tV{constructor(){O.add(this),this.messages=[],this.receivedMessages=[],P.set(this,void 0),this.controller=new AbortController,I.set(this,void 0),R.set(this,()=>{}),M.set(this,()=>{}),L.set(this,void 0),$.set(this,()=>{}),U.set(this,()=>{}),D.set(this,{}),q.set(this,!1),B.set(this,!1),z.set(this,!1),F.set(this,!1),H.set(this,void 0),W.set(this,void 0),V.set(this,e=>{if(eT(this,B,!0,"f"),eO(e)&&(e=new eM),e instanceof eM)return eT(this,z,!0,"f"),this._emit("abort",e);if(e instanceof eI)return this._emit("error",e);if(e instanceof Error){let t=new eI(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new eI(String(e)))}),eT(this,I,new Promise((e,t)=>{eT(this,R,e,"f"),eT(this,M,t,"f")}),"f"),eT(this,L,new Promise((e,t)=>{eT(this,$,e,"f"),eT(this,U,t,"f")}),"f"),eC(this,I,"f").catch(()=>{}),eC(this,L,"f").catch(()=>{})}get response(){return eC(this,H,"f")}get request_id(){return eC(this,W,"f")}async withResponse(){let e=await eC(this,I,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new tV;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s){let r=new tV;for(let e of t.messages)r._addMessageParam(e);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},eC(this,V,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){let r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),eC(this,O,"m",K).call(this);let{response:a,data:n}=await e.create({...t,stream:!0},{...s,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(a),n))eC(this,O,"m",X).call(this,e);if(n.controller.signal?.aborted)throw new eM;eC(this,O,"m",Y).call(this)}_connected(e){this.ended||(eT(this,H,e,"f"),eT(this,W,e?.headers.get("request-id"),"f"),eC(this,R,"f").call(this,e),this._emit("connect"))}get ended(){return eC(this,q,"f")}get errored(){return eC(this,B,"f")}get aborted(){return eC(this,z,"f")}abort(){this.controller.abort()}on(e,t){return(eC(this,D,"f")[e]||(eC(this,D,"f")[e]=[])).push({listener:t}),this}off(e,t){let s=eC(this,D,"f")[e];if(!s)return this;let r=s.findIndex(e=>e.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(eC(this,D,"f")[e]||(eC(this,D,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{eT(this,F,!0,"f"),"error"!==e&&this.once("error",s),this.once(e,t)})}async done(){eT(this,F,!0,"f"),await eC(this,L,"f")}get currentMessage(){return eC(this,P,"f")}async finalMessage(){return await this.done(),eC(this,O,"m",J).call(this)}async finalText(){return await this.done(),eC(this,O,"m",G).call(this)}_emit(e,...t){if(eC(this,q,"f"))return;"end"===e&&(eT(this,q,!0,"f"),eC(this,$,"f").call(this));let s=eC(this,D,"f")[e];if(s&&(eC(this,D,"f")[e]=s.filter(e=>!e.once),s.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];eC(this,F,"f")||s?.length||Promise.reject(e),eC(this,M,"f").call(this,e),eC(this,U,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];eC(this,F,"f")||s?.length||Promise.reject(e),eC(this,M,"f").call(this,e),eC(this,U,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",eC(this,O,"m",J).call(this))}async _fromReadableStream(e,t){let s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),eC(this,O,"m",K).call(this),this._connected(null);let r=ta.fromReadableStream(e,this.controller);for await(let e of r)eC(this,O,"m",X).call(this,e);if(r.controller.signal?.aborted)throw new eM;eC(this,O,"m",Y).call(this)}[(P=new WeakMap,I=new WeakMap,R=new WeakMap,M=new WeakMap,L=new WeakMap,$=new WeakMap,U=new WeakMap,D=new WeakMap,q=new WeakMap,B=new WeakMap,z=new WeakMap,F=new WeakMap,H=new WeakMap,W=new WeakMap,V=new WeakMap,O=new WeakSet,J=function(){if(0===this.receivedMessages.length)throw new eI("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},G=function(){if(0===this.receivedMessages.length)throw new eI("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new eI("stream ended without producing a content block with type=text");return e.join(" ")},K=function(){this.ended||eT(this,P,void 0,"f")},X=function(e){if(this.ended)return;let t=eC(this,O,"m",Q).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let s=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===s.type&&this._emit("text",e.delta.text,s.text||"");break;case"citations_delta":"text"===s.type&&this._emit("citation",e.delta.citation,s.citations??[]);break;case"input_json_delta":tG(s)&&s.input&&this._emit("inputJson",e.delta.partial_json,s.input);break;case"thinking_delta":"thinking"===s.type&&this._emit("thinking",e.delta.thinking,s.thinking);break;case"signature_delta":"thinking"===s.type&&this._emit("signature",s.signature);break;default:tK(e.delta)}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":eT(this,P,t,"f")}},Y=function(){if(this.ended)throw new eI("stream has ended, this shouldn't happen");let e=eC(this,P,"f");if(!e)throw new eI("request ended without sending any chunks");return eT(this,P,void 0,"f"),e},Q=function(e){let t=eC(this,P,"f");if("message_start"===e.type){if(t)throw new eI(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new eI(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{let s=t.content.at(e.index);switch(e.delta.type){case"text_delta":s?.type==="text"&&(s.text+=e.delta.text);break;case"citations_delta":s?.type==="text"&&(s.citations??(s.citations=[]),s.citations.push(e.delta.citation));break;case"input_json_delta":if(s&&tG(s)){let t=s[tJ]||"";Object.defineProperty(s,tJ,{value:t+=e.delta.partial_json,enumerable:!1,writable:!0}),t&&(s.input=tL(t))}break;case"thinking_delta":s?.type==="thinking"&&(s.thinking+=e.delta.thinking);break;case"signature_delta":s?.type==="thinking"&&(s.signature=e.delta.signature);break;default:tK(e.delta)}return t}}},Symbol.asyncIterator)](){let e=[],t=[],s=!1;return this.on("streamEvent",s=>{let r=t.shift();r?r.resolve(s):e.push(s)}),this.on("end",()=>{for(let e of(s=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((e,s)=>t.push({resolve:e,reject:s})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ta(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function tK(e){}class tX extends tN{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(tA`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",tm,{query:e,...t})}delete(e,t){return this._client.delete(tA`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(tA`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){let s=await this.retrieve(e);if(!s.results_url)throw new eI(`No batch \`results_url\`; Has it finished processing? ${s.processing_status} - ${s.id}`);return this._client.get(s.results_url,{...t,headers:tT([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>tI.fromResponse(t.response,t.controller))}}class tY extends tN{constructor(){super(...arguments),this.batches=new tX(this._client)}create(e,t){e.model in tQ&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${tQ[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!e.stream&&null==s){let t=tB[e.model]??void 0;s=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",{body:e,timeout:s??6e5,...t,stream:e.stream??!1})}stream(e,t){return tV.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}let tQ={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};tY.Batches=tX;class tZ extends tN{retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(tA`/v1/models/${e}`,{...s,headers:tT([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/models",tm,{query:r,...t,headers:tT([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers])})}}let t0=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;class t1{constructor({baseURL:e=t0("ANTHROPIC_BASE_URL"),apiKey:t=t0("ANTHROPIC_API_KEY")??null,authToken:s=t0("ANTHROPIC_AUTH_TOKEN")??null,...r}={}){Z.set(this,void 0);const a={apiKey:t,authToken:s,...r,baseURL:e||"https://api.anthropic.com"};if(!a.dangerouslyAllowBrowser&&"u">typeof window&&void 0!==window.document&&"u">typeof navigator)throw new eI("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=a.baseURL,this.timeout=a.timeout??t2.DEFAULT_TIMEOUT,this.logger=a.logger??console;const n="warn";this.logLevel=n,this.logLevel=eX(a.logLevel,"ClientOptions.logLevel",this)??eX(t0("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??n,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??function(){if("u">typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),eT(this,Z,te,"f"),this._options=a,this.apiKey=t,this.authToken=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key")||t.has("x-api-key")||this.authToken&&e.get("authorization"))&&!t.has("authorization"))throw Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){return tT([this.apiKeyAuth(e),this.bearerAuth(e)])}apiKeyAuth(e){if(null!=this.apiKey)return tT([{"X-Api-Key":this.apiKey}])}bearerAuth(e){if(null!=this.authToken)return tT([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new eI(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${e4}`}defaultIdempotencyKey(){return`stainless-node-retry-${eA()}`}makeStatusError(e,t,s,r){return eR.generate(e,t,s,r)}buildURL(e,t){let s=new URL(eJ.test(e)?e:this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(r)&&(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new eI("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(s=>({method:e,path:t,...s})))}request(e,t=null){return new td(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){let r=await e,a=r.maxRetries??this.maxRetries;null==t&&(t=a),await this.prepareOptions(r);let{req:n,url:i,timeout:o}=this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(n,{url:i,options:r});let l="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),c=void 0===s?"":`, retryOf: ${s}`,d=Date.now();if(e1(this).debug(`[${l}] sending request`,e2({retryOfRequestLogID:s,method:r.method,url:i,options:r,headers:n.headers})),r.signal?.aborted)throw new eM;let u=new AbortController,p=await this.fetchWithTimeout(i,n,o,u).catch(eP),m=Date.now();if(p instanceof Error){let e=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new eM;let a=eO(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(t)return e1(this).info(`[${l}] connection ${a?"timed out":"failed"} - ${e}`),e1(this).debug(`[${l}] connection ${a?"timed out":"failed"} (${e})`,e2({retryOfRequestLogID:s,url:i,durationMs:m-d,message:p.message})),this.retryRequest(r,t,s??l);if(e1(this).info(`[${l}] connection ${a?"timed out":"failed"} - error; no more retries left`),e1(this).debug(`[${l}] connection ${a?"timed out":"failed"} (error; no more retries left)`,e2({retryOfRequestLogID:s,url:i,durationMs:m-d,message:p.message})),a)throw new e$;throw new eL({cause:p})}let h=[...p.headers.entries()].filter(([e])=>"request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join(""),f=`[${l}${c}${h}] ${n.method} ${i} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${m-d}ms`;if(!p.ok){let e=this.shouldRetry(p);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await e9(p.body),e1(this).info(`${f} - ${e}`),e1(this).debug(`[${l}] response error (${e})`,e2({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,durationMs:m-d})),this.retryRequest(r,t,s??l,p.headers)}let a=e?"error; no more retries left":"error; not retryable";e1(this).info(`${f} - ${a}`);let n=await p.text().catch(e=>eP(e).message),i=eV(n),o=i?void 0:n;throw e1(this).debug(`[${l}] response error (${a})`,e2({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,message:o,durationMs:Date.now()-d})),this.makeStatusError(p.status,i,o,p.headers)}return e1(this).info(f),e1(this).debug(`[${l}] response start`,e2({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,durationMs:m-d})),{response:p,options:r,controller:u,requestLogID:l,retryOfRequestLogID:s,startTime:d}}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}requestAPIList(e,t){return new tp(this,this.makeRequest(t,null,void 0),e)}async fetchWithTimeout(e,t,s,r){let{signal:a,method:n,...i}=t||{};a&&a.addEventListener("abort",()=>r.abort());let o=setTimeout(()=>r.abort(),s),l=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||"object"==typeof i.body&&null!==i.body&&Symbol.asyncIterator in i.body,c={signal:r.signal,...l?{duplex:"half"}:{},method:"GET",...i};n&&(c.method=n.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(o)}}shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||!!(e.status>=500))}async retryRequest(e,t,s,r){let a,n,i=r?.get("retry-after-ms");if(i){let e=parseFloat(i);Number.isNaN(e)||(a=e)}let o=r?.get("retry-after");if(o&&!a){let e=parseFloat(o);a=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(a&&0<=a&&a<6e4)){let s=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,s)}return await (n=a,new Promise(e=>setTimeout(e,n))),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||null!=t&&e>t)throw new eI("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}buildRequest(e,{retryCount:t=0}={}){let s={...e},{method:r,path:a,query:n}=s,i=this.buildURL(a,n);"timeout"in s&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new eI(`${e} must be an integer`);if(t<0)throw new eI(`${e} must be a positive integer`)})("timeout",s.timeout),s.timeout=s.timeout??this.timeout;let{bodyHeaders:o,body:l}=this.buildBody({options:s}),c=this.buildHeaders({options:e,method:r,bodyHeaders:o,retryCount:t});return{req:{method:r,headers:c,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&l instanceof globalThis.ReadableStream&&{duplex:"half"},...l&&{body:l},...this.fetchOptions??{},...s.fetchOptions??{}},url:i,timeout:s.timeout}}buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:a}){let n={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),n[this.idempotencyHeader]=e.idempotencyKey);let i=tT([n,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...s??(s=(()=>{let e="u">typeof Deno&&null!=Deno.build?"deno":"u">typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":e5(Deno.build.os),"X-Stainless-Arch":e3(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("u">typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":e5(globalThis.process.platform??"unknown"),"X-Stainless-Arch":e3(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=function(){if("u"<typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let s=t.exec(navigator.userAgent);if(s){let t=s[1]||0,r=s[2]||0,a=s[3]||0;return{browser:e,version:`${t}.${r}.${a}`}}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let s=tT([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&s.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:e8(e)}:eC(this,Z,"f").call(this,{body:e,headers:s})}}Z=new WeakMap,t1.Anthropic=t1,t1.HUMAN_PROMPT="\n\nHuman:",t1.AI_PROMPT="\n\nAssistant:",t1.DEFAULT_TIMEOUT=6e5,t1.AnthropicError=eI,t1.APIError=eR,t1.APIConnectionError=eL,t1.APIConnectionTimeoutError=e$,t1.APIUserAbortError=eM,t1.NotFoundError=eB,t1.ConflictError=ez,t1.RateLimitError=eH,t1.BadRequestError=eU,t1.AuthenticationError=eD,t1.InternalServerError=eW,t1.PermissionDeniedError=eq,t1.UnprocessableEntityError=eF,t1.toFile=tj;class t2 extends t1{constructor(){super(...arguments),this.completions=new tW(this),this.messages=new tY(this),this.models=new tZ(this),this.beta=new tH(this)}}t2.Completions=tW,t2.Messages=tY,t2.Models=tZ,t2.Beta=tH;let{HUMAN_PROMPT:t4,AI_PROMPT:t3}=t2;var t5=e.i(727749);async function t6(e,t,s,r,a=[],n,i,o,l,c,d,u,p,m,h){if(!r)throw Error("Virtual Key is required");console.log=function(){};let f=h||(0,eS.getProxyBaseUrl)(),g={};a&&a.length>0&&(g["x-litellm-tags"]=a.join(","));let y=new t2({apiKey:r,baseURL:f,dangerouslyAllowBrowser:!0,defaultHeaders:g});try{let r=Date.now(),a=!1,m={model:s,messages:e.map(e=>({role:e.role,content:e.content})),stream:!0,max_tokens:1024,litellm_trace_id:c};for await(let e of(d&&(m.vector_store_ids=d),u&&(m.guardrails=u),p&&(m.policies=p),y.messages.stream(m,{signal:n}))){if(console.log("Stream event:",e),"content_block_delta"===e.type){let n=e.delta;if(!a){a=!0;let e=Date.now()-r;console.log("First token received! Time:",e,"ms"),o&&o(e)}"text_delta"===n.type?t("assistant",n.text,s):"reasoning_delta"===n.type&&i&&i(n.text)}if("message_delta"===e.type&&e.usage&&l){let t=e.usage;console.log("Usage data found:",t);let s={completionTokens:t.output_tokens,promptTokens:t.input_tokens,totalTokens:t.input_tokens+t.output_tokens};l(s)}}}catch(e){throw n?.aborted?console.log("Anthropic messages request was cancelled"):t5.default.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`),e}}e.s(["makeAnthropicMessagesRequest",()=>t6],434788);var t8=e.i(356449);async function t7(e,t,s,r,a,n,i,o,l,c){console.log=function(){},console.log("isLocal:",!1);let d=c||(0,eS.getProxyBaseUrl)(),u=new t8.default.OpenAI({apiKey:a,baseURL:d,dangerouslyAllowBrowser:!0,defaultHeaders:n&&n.length>0?{"x-litellm-tags":n.join(",")}:void 0});try{let a=await u.audio.speech.create({model:r,input:e,voice:t,...o?{response_format:o}:{},...l?{speed:l}:{}},{signal:i}),n=await a.blob(),c=URL.createObjectURL(n);s(c,r)}catch(e){throw i?.aborted?console.log("Audio speech request was cancelled"):t5.default.fromBackend(`Error occurred while generating speech. Please try again. Error: ${e}`),e}}async function t9(e,t,s,r,a,n,i,o,l,c,d){console.log=function(){},console.log("isLocal:",!1);let u=d||(0,eS.getProxyBaseUrl)(),p=new t8.default.OpenAI({apiKey:r,baseURL:u,dangerouslyAllowBrowser:!0,defaultHeaders:a&&a.length>0?{"x-litellm-tags":a.join(",")}:void 0});try{console.log("Processing audio file for transcription:",e.name);let r=await p.audio.transcriptions.create({model:s,file:e,...i?{language:i}:{},...o?{prompt:o}:{},...l?{response_format:l}:{},...void 0!==c?{temperature:c}:{}},{signal:n});if(console.log("Transcription response:",r),r&&r.text)t(r.text,s),t5.default.success("Audio transcribed successfully");else throw Error("No transcription text in response")}catch(e){if(console.error("Error making audio transcription request:",e),n?.aborted)console.log("Audio transcription request was cancelled");else{let t="Failed to transcribe audio";e?.error?.message?t=e.error.message:e?.message&&(t=e.message),t5.default.fromBackend(`Audio transcription failed: ${t}`)}throw e}}e.s(["makeOpenAIAudioSpeechRequest",()=>t7],512882),e.s(["makeOpenAIAudioTranscriptionRequest",()=>t9],584976)},720762,e=>{"use strict";var t=e.i(727749),s=e.i(764205);async function r(e,r,a,n,i,o){if(!n)throw Error("Virtual Key is required");console.log=function(){};let l=o||(0,s.getProxyBaseUrl)(),c={};i&&i.length>0&&(c["x-litellm-tags"]=i.join(","));try{let t=l.endsWith("/")?l.slice(0,-1):l,i=`${t}/embeddings`,o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",[(0,s.getGlobalLitellmHeaderName)()]:`Bearer ${n}`,...c},body:JSON.stringify({model:a,input:e})});if(!o.ok){let e=await o.text();throw Error(e||`Request failed with status ${o.status}`)}let d=await o.json(),u=d?.data?.[0]?.embedding;if(!u)throw Error("No embedding returned from server");r(JSON.stringify(u),d?.model??a)}catch(e){throw t.default.fromBackend(`Error occurred while making embeddings request. Please try again. Error: ${e}`),e}}e.s(["makeOpenAIEmbeddingsRequest",()=>r])},488143,(e,t,s)=>{"use strict";function r({widthInt:e,heightInt:t,blurWidth:s,blurHeight:r,blurDataURL:a,objectFit:n}){let i=s?40*s:e,o=r?40*r:t,l=i&&o?`viewBox='0 0 ${i} ${o}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${l}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${l?"none":"contain"===n?"xMidYMid":"cover"===n?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${a}'/%3E%3C/svg%3E`}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},987690,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={VALID_LOADERS:function(){return n},imageConfigDefault:function(){return i}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,maximumResponseBody:5e7,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},908927,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImgProps",{enumerable:!0,get:function(){return c}}),e.r(233525);let r=e.r(543369),a=e.r(488143),n=e.r(987690),i=["-moz-initial","fill","none","scale-down",void 0];function o(e){return void 0!==e.default}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function c({src:e,sizes:t,unoptimized:s=!1,priority:c=!1,preload:d=!1,loading:u,className:p,quality:m,width:h,height:f,fill:g=!1,style:y,overrideSrc:x,onLoad:b,onLoadingComplete:v,placeholder:w="empty",blurDataURL:_,fetchPriority:j,decoding:S="async",layout:N,objectFit:k,objectPosition:E,lazyBoundary:T,lazyRoot:C,...A},O){var P;let I,R,M,{imgConf:L,showAltText:$,blurComplete:U,defaultLoader:D}=O,q=L||n.imageConfigDefault;if("allSizes"in q)I=q;else{let e=[...q.deviceSizes,...q.imageSizes].sort((e,t)=>e-t),t=q.deviceSizes.sort((e,t)=>e-t),s=q.qualities?.sort((e,t)=>e-t);I={...q,allSizes:e,deviceSizes:t,qualities:s}}if(void 0===D)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let B=A.loader||D;delete A.loader,delete A.srcSet;let z="__next_img_default"in B;if(z){if("custom"===I.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=B;B=t=>{let{config:s,...r}=t;return e(r)}}if(N){"fill"===N&&(g=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[N];e&&(y={...y,...e});let s={responsive:"100vw",fill:"100vw"}[N];s&&!t&&(t=s)}let F="",H=l(h),W=l(f);if((P=e)&&"object"==typeof P&&(o(P)||void 0!==P.src)){let t=o(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(R=t.blurWidth,M=t.blurHeight,_=_||t.blurDataURL,F=t.src,!g)if(H||W){if(H&&!W){let e=H/t.width;W=Math.round(t.height*e)}else if(!H&&W){let e=W/t.height;H=Math.round(t.width*e)}}else H=t.width,W=t.height}let J=!c&&!d&&("lazy"===u||void 0===u);(!(e="string"==typeof e?e:F)||e.startsWith("data:")||e.startsWith("blob:"))&&(s=!0,J=!1),I.unoptimized&&(s=!0),z&&!I.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(s=!0);let G=l(m),V=Object.assign(g?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:k,objectPosition:E}:{},$?{}:{color:"transparent"},y),K=U||"empty"===w?null:"blur"===w?`url("data:image/svg+xml;charset=utf-8,${(0,a.getImageBlurSvg)({widthInt:H,heightInt:W,blurWidth:R,blurHeight:M,blurDataURL:_||"",objectFit:V.objectFit})}")`:`url("${w}")`,X=i.includes(V.objectFit)?"fill"===V.objectFit?"100% 100%":"cover":V.objectFit,Y=K?{backgroundSize:X,backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:K}:{},Q=function({config:e,src:t,unoptimized:s,width:a,quality:n,sizes:i,loader:o}){if(s){let e=(0,r.getDeploymentId)();if(t.startsWith("/")&&!t.startsWith("//")&&e){let s=t.includes("?")?"&":"?";t=`${t}${s}dpl=${e}`}return{src:t,srcSet:void 0,sizes:void 0}}let{widths:l,kind:c}=function({deviceSizes:e,allSizes:t},s,r){if(r){let s=/(^|\s)(1?\d?\d)vw/g,a=[];for(let e;e=s.exec(r);)a.push(parseInt(e[2]));if(a.length){let s=.01*Math.min(...a);return{widths:t.filter(t=>t>=e[0]*s),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof s?{widths:e,kind:"w"}:{widths:[...new Set([s,2*s].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,a,i),d=l.length-1;return{sizes:i||"w"!==c?i:"100vw",srcSet:l.map((s,r)=>`${o({config:e,src:t,quality:n,width:s})} ${"w"===c?s:r+1}${c}`).join(", "),src:o({config:e,src:t,quality:n,width:l[d]})}}({config:I,src:e,unoptimized:s,width:H,quality:G,sizes:t,loader:B}),Z=J?"lazy":u;return{props:{...A,loading:Z,fetchPriority:j,width:H,height:W,decoding:S,className:p,style:{...V,...Y},sizes:Q.sizes,srcSet:Q.srcSet,src:x||Q.src},meta:{unoptimized:s,preload:d||c,placeholder:w,fill:g}}}},898879,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o}});let r=e.r(271645),a="u"<typeof window,n=a?()=>{}:r.useLayoutEffect,i=a?()=>{}:r.useEffect;function o(e){let{headManager:t,reduceComponentsToState:s}=e;function o(){if(t&&t.mountedInstances){let e=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(s(e))}}return a&&(t?.mountedInstances?.add(e.children),o()),n(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),n(()=>(t&&(t._pendingUpdate=o),()=>{t&&(t._pendingUpdate=o)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},325633,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return f},defaultHead:function(){return u}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(563141),i=e.r(151836),o=e.r(843476),l=i._(e.r(271645)),c=n._(e.r(898879)),d=e.r(742732);function u(){return[(0,o.jsx)("meta",{charSet:"utf-8"},"charset"),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function p(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(233525);let m=["name","httpEquiv","charSet","itemProp"];function h(e){let t,s,r,a;return e.reduce(p,[]).reverse().concat(u().reverse()).filter((t=new Set,s=new Set,r=new Set,a={},e=>{let n=!0,i=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){i=!0;let s=e.key.slice(e.key.indexOf("$")+1);t.has(s)?n=!1:t.add(s)}switch(e.type){case"title":case"base":s.has(e.type)?n=!1:s.add(e.type);break;case"meta":for(let t=0,s=m.length;t<s;t++){let s=m[t];if(e.props.hasOwnProperty(s))if("charSet"===s)r.has(s)?n=!1:r.add(s);else{let t=e.props[s],r=a[s]||new Set;("name"!==s||!i)&&r.has(t)?n=!1:(r.add(t),a[s]=r)}}}return n})).reverse().map((e,t)=>{let s=e.key||t;return l.default.cloneElement(e,{key:s})})}let f=function({children:e}){let t=(0,l.useContext)(d.HeadManagerContext);return(0,o.jsx)(c.default,{reduceComponentsToState:h,headManager:t,children:e})};("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},918556,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ImageConfigContext",{enumerable:!0,get:function(){return n}});let r=e.r(563141)._(e.r(271645)),a=e.r(987690),n=r.default.createContext(a.imageConfigDefault)},65856,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"RouterContext",{enumerable:!0,get:function(){return r}});let r=e.r(563141)._(e.r(271645)).default.createContext(null)},670965,(e,t,s)=>{"use strict";function r(e,t){let s=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e,0):s}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"findClosestQuality",{enumerable:!0,get:function(){return r}})},1948,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return i}});let r=e.r(670965),a=e.r(543369);function n({config:e,src:t,width:s,quality:n}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let i=(0,r.findClosestQuality)(n,e),o=(0,a.getDeploymentId)();return`${e.path}?url=${encodeURIComponent(t)}&w=${s}&q=${i}${t.startsWith("/")&&o?`&dpl=${o}`:""}`}n.__next_img_default=!0;let i=n},605500,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Image",{enumerable:!0,get:function(){return v}});let r=e.r(563141),a=e.r(151836),n=e.r(843476),i=a._(e.r(271645)),o=r._(e.r(174080)),l=r._(e.r(325633)),c=e.r(908927),d=e.r(987690),u=e.r(918556);e.r(233525);let p=e.r(65856),m=r._(e.r(1948)),h=e.r(818581),f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function g(e,t,s,r,a,n,i){let o=e?.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),s?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,a=!1;s.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}r?.current&&r.current(e)}}))}function y(e){return i.use?{fetchPriority:e}:{fetchpriority:e}}"u"<typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let x=(0,i.forwardRef)(({src:e,srcSet:t,sizes:s,height:r,width:a,decoding:o,className:l,style:c,fetchPriority:d,placeholder:u,loading:p,unoptimized:m,fill:f,onLoadRef:x,onLoadingCompleteRef:b,setBlurComplete:v,setShowAltText:w,sizesInput:_,onLoad:j,onError:S,...N},k)=>{let E=(0,i.useCallback)(e=>{e&&(S&&(e.src=e.src),e.complete&&g(e,u,x,b,v,m,_))},[e,u,x,b,v,S,m,_]),T=(0,h.useMergedRef)(k,E);return(0,n.jsx)("img",{...N,...y(d),loading:p,width:a,height:r,decoding:o,"data-nimg":f?"fill":"1",className:l,style:c,sizes:s,srcSet:t,src:e,ref:T,onLoad:e=>{g(e.currentTarget,u,x,b,v,m,_)},onError:e=>{w(!0),"empty"!==u&&v(!0),S&&S(e)}})});function b({isAppRouter:e,imgAttributes:t}){let s={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...y(t.fetchPriority)};return e&&o.default.preload?(o.default.preload(t.src,s),null):(0,n.jsx)(l.default,{children:(0,n.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...s},"__nimg-"+t.src+t.srcSet+t.sizes)})}let v=(0,i.forwardRef)((e,t)=>{let s=(0,i.useContext)(p.RouterContext),r=(0,i.useContext)(u.ImageConfigContext),a=(0,i.useMemo)(()=>{let e=f||r||d.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),s=e.deviceSizes.sort((e,t)=>e-t),a=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:s,qualities:a,localPatterns:"u"<typeof window?r?.localPatterns:e.localPatterns}},[r]),{onLoad:o,onLoadingComplete:l}=e,h=(0,i.useRef)(o);(0,i.useEffect)(()=>{h.current=o},[o]);let g=(0,i.useRef)(l);(0,i.useEffect)(()=>{g.current=l},[l]);let[y,v]=(0,i.useState)(!1),[w,_]=(0,i.useState)(!1),{props:j,meta:S}=(0,c.getImgProps)(e,{defaultLoader:m.default,imgConf:a,blurComplete:y,showAltText:w});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{...j,unoptimized:S.unoptimized,placeholder:S.placeholder,fill:S.fill,onLoadRef:h,onLoadingCompleteRef:g,setBlurComplete:v,setShowAltText:_,sizesInput:e.sizes,ref:t}),S.preload?(0,n.jsx)(b,{isAppRouter:!s,imgAttributes:j}):null]})});("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},794909,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return d},getImageProps:function(){return c}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(563141),i=e.r(908927),o=e.r(605500),l=n._(e.r(1948));function c(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let d=o.Image},657688,(e,t,s)=>{t.exports=e.r(794909)},220486,964421,843153,761793,966988,152401,e=>{"use strict";var t=e.i(843476),s=e.i(218129),r=e.i(132104),a=e.i(447593),n=e.i(245094),i=e.i(210612),o=e.i(955135),l=e.i(91500),c=e.i(827252),d=e.i(438957),u=e.i(596239),p=e.i(56456),m=e.i(124608),h=e.i(983561),f=e.i(602073),g=e.i(313603),y=e.i(782273),x=e.i(232164),b=e.i(366308),v=e.i(771674),w=e.i(304967),_=e.i(599724),j=e.i(779241),S=e.i(629569),N=e.i(994388),k=e.i(464571),E=e.i(311451),T=e.i(212931),C=e.i(282786),A=e.i(199133),O=e.i(482725),P=e.i(592968),I=e.i(898586),R=e.i(515831),M=e.i(271645);e.i(785269);var L=e.i(322831),$=e.i(918789),U=e.i(650056),D=e.i(219470),q=e.i(422233),B=e.i(122550),z=e.i(891547),F=e.i(921511),H=e.i(235267),W=e.i(727749),J=e.i(764205),G=e.i(318059),V=e.i(916940),K=e.i(953860),X=e.i(434788),Y=e.i(512882),Q=e.i(584976),Z=e.i(254530),ee=e.i(720762),et=e.i(921687),es=e.i(689020);e.i(247167);var er=e.i(356449);async function ea(e,t,s,r,a,n,i,o){console.log=function(){},console.log("isLocal:",!1);let l=o||(0,J.getProxyBaseUrl)(),c=new er.default.OpenAI({apiKey:a,baseURL:l,dangerouslyAllowBrowser:!0,defaultHeaders:n&&n.length>0?{"x-litellm-tags":n.join(",")}:void 0});try{let a=Array.isArray(e)?e:[e],n=[];for(let e=0;e<a.length;e++){let o=a[e];console.log(`Processing image ${e+1} of ${a.length}`);let l=await c.images.edit({model:r,image:o,prompt:t},{signal:i});if(console.log(`Response for image ${e+1}:`,l.data),l.data&&l.data[0]){if(l.data[0].url)s(l.data[0].url,r),n.push(l.data[0].url);else if(l.data[0].b64_json){let e=l.data[0].b64_json,t=`data:image/png;base64,${e}`;s(t,r),n.push(t)}}}n.length>1&&W.default.success(`Successfully processed ${n.length} images`)}catch(e){if(console.error("Error making image edit request:",e),i?.aborted)console.log("Image edits request was cancelled");else{let t="Failed to edit image(s)";e?.error?.message?t=e.error.message:e?.message&&(t=e.message),W.default.fromBackend(`Image edit failed: ${t}`)}throw e}}async function en(e,t,s,r,a,n,i){console.log=function(){},console.log("isLocal:",!1);let o=i||(0,J.getProxyBaseUrl)(),l=new er.default.OpenAI({apiKey:r,baseURL:o,dangerouslyAllowBrowser:!0,defaultHeaders:a&&a.length>0?{"x-litellm-tags":a.join(",")}:void 0});try{let r=await l.images.generate({model:s,prompt:e},{signal:n});if(console.log(r.data),r.data&&r.data[0])if(r.data[0].url)t(r.data[0].url,s);else if(r.data[0].b64_json){let e=r.data[0].b64_json;t(`data:image/png;base64,${e}`,s)}else throw Error("No image data found in response");else throw Error("Invalid response format")}catch(e){throw n?.aborted?console.log("Image generation request was cancelled"):W.default.fromBackend(`Error occurred while generating image. Please try again. Error: ${e}`),e}}async function ei(e,t,s,r,a=[],n,i,o,l,c,d,u,p,m,h,f,g,y,x,b,v,w){if(!r)throw Error("Virtual Key is required");if(!s||""===s.trim())throw Error("Model is required. Please select a model before sending a request.");console.log=function(){};let _=b||(0,J.getProxyBaseUrl)(),j={};a&&a.length>0&&(j["x-litellm-tags"]=a.join(","));let S=new er.default.OpenAI({apiKey:r,baseURL:_,dangerouslyAllowBrowser:!0,defaultHeaders:j});try{let r=Date.now(),a=!1,b=e.map(e=>(Array.isArray(e.content),{role:e.role,content:e.content,type:"message"})),_=[];m&&m.length>0&&(m.includes("__all__")?_.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never"}):m.forEach(e=>{let t=v?.find(t=>t.server_id===e),s=t?.alias||t?.server_name||e,r=w?.[e]||[];_.push({type:"mcp",server_label:"litellm",server_url:`litellm_proxy/mcp/${s}`,require_approval:"never",...r.length>0?{allowed_tools:r}:{}})})),y&&_.push({type:"code_interpreter",container:{type:"auto"}});let j=await S.responses.create({model:s,input:b,stream:!0,litellm_trace_id:c,...h?{previous_response_id:h}:{},...d?{vector_store_ids:d}:{},...u?{guardrails:u}:{},...p?{policies:p}:{},..._.length>0?{tools:_,tool_choice:"auto"}:{}},{signal:n}),E="",T={code:"",containerId:""};for await(let e of j)if(console.log("Response event:",e),"object"==typeof e&&null!==e){if((e.type?.startsWith("response.mcp_")||"response.output_item.done"===e.type&&(e.item?.type==="mcp_list_tools"||e.item?.type==="mcp_call"))&&(console.log("MCP event received:",e),g)){let t={type:e.type,sequence_number:e.sequence_number,output_index:e.output_index,item_id:e.item_id||e.item?.id,item:e.item,delta:e.delta,arguments:e.arguments,timestamp:Date.now()};g(t)}"response.output_item.done"===e.type&&e.item?.type==="mcp_call"&&e.item?.name&&(E=e.item.name,console.log("MCP tool used:",E)),N=T;var N,k=T="response.output_item.done"===e.type&&e.item?.type==="code_interpreter_call"?(console.log("Code interpreter call completed:",e.item),{code:e.item.code||"",containerId:e.item.container_id||""}):N;if("response.output_item.done"===e.type&&e.item?.type==="message"&&e.item?.content&&x){for(let t of e.item.content)if("output_text"===t.type&&t.annotations){let e=t.annotations.filter(e=>"container_file_citation"===e.type);(e.length>0||k.code)&&x({code:k.code,containerId:k.containerId,annotations:e})}}if("response.role.delta"===e.type)continue;if("response.output_text.delta"===e.type&&"string"==typeof e.delta){let n=e.delta;if(console.log("Text delta",n),n.trim().length>0&&(t("assistant",n,s),!a)){a=!0;let e=Date.now()-r;console.log("First token received! Time:",e,"ms"),o&&o(e)}}if("response.reasoning.delta"===e.type&&"delta"in e){let t=e.delta;"string"==typeof t&&i&&i(t)}if("response.completed"===e.type&&"response"in e){let t=e.response,s=t.usage;if(console.log("Usage data:",s),console.log("Response completed event:",t),t.id&&f&&(console.log("Response ID for session management:",t.id),f(t.id)),s&&l){console.log("Usage data:",s);let e={completionTokens:s.output_tokens,promptTokens:s.input_tokens,totalTokens:s.total_tokens};s.completion_tokens_details?.reasoning_tokens&&(e.reasoningTokens=s.completion_tokens_details.reasoning_tokens),l(e,E)}}}return j}catch(e){throw n?.aborted?console.log("Responses API request was cancelled"):W.default.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`),e}}var eo=e.i(245704),el=e.i(637235),ec=e.i(270377),ed=e.i(166406),eu=e.i(755151),ep=e.i(240647),em=e.i(993914);let eh=(e,t=8)=>e?e.length>t?`${e.substring(0,t)}`:e:null,ef=e=>{navigator.clipboard.writeText(e)},eg=({a2aMetadata:e,timeToFirstToken:s,totalLatency:r})=>{let[a,n]=(0,M.useState)(!1);if(!e&&!s&&!r)return null;let{taskId:i,contextId:o,status:l,metadata:c}=e||{},d=(e=>{if(!e)return null;try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return e}})(l?.timestamp);return(0,t.jsxs)("div",{className:"a2a-metrics mt-3 pt-2 border-t border-gray-200 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2 text-gray-600",children:[(0,t.jsx)(h.RobotOutlined,{className:"mr-1.5 text-blue-500"}),(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"A2A Metadata"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-gray-500 ml-4",children:[l?.state&&(0,t.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"completed":return"bg-green-100 text-green-700";case"working":case"submitted":return"bg-blue-100 text-blue-700";case"failed":case"canceled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(l.state)}`,children:[(e=>{switch(e){case"completed":return(0,t.jsx)(eo.CheckCircleOutlined,{className:"text-green-500"});case"working":case"submitted":return(0,t.jsx)(p.LoadingOutlined,{className:"text-blue-500"});case"failed":case"canceled":return(0,t.jsx)(ec.ExclamationCircleOutlined,{className:"text-red-500"});default:return(0,t.jsx)(el.ClockCircleOutlined,{className:"text-gray-500"})}})(l.state),(0,t.jsx)("span",{className:"ml-1 capitalize",children:l.state})]}),d&&(0,t.jsx)(P.Tooltip,{title:l?.timestamp,children:(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(el.ClockCircleOutlined,{className:"mr-1"}),d]})}),void 0!==r&&(0,t.jsx)(P.Tooltip,{title:"Total latency",children:(0,t.jsxs)("span",{className:"flex items-center text-blue-600",children:[(0,t.jsx)(el.ClockCircleOutlined,{className:"mr-1"}),(r/1e3).toFixed(2),"s"]})}),void 0!==s&&(0,t.jsx)(P.Tooltip,{title:"Time to first token",children:(0,t.jsxs)("span",{className:"flex items-center text-green-600",children:["TTFT: ",(s/1e3).toFixed(2),"s"]})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-gray-500 ml-4 mt-1.5",children:[i&&(0,t.jsx)(P.Tooltip,{title:`Click to copy: ${i}`,children:(0,t.jsxs)("span",{className:"flex items-center cursor-pointer hover:text-gray-700",onClick:()=>ef(i),children:[(0,t.jsx)(em.FileTextOutlined,{className:"mr-1"}),"Task: ",eh(i),(0,t.jsx)(ed.CopyOutlined,{className:"ml-1 text-gray-400 hover:text-gray-600"})]})}),o&&(0,t.jsx)(P.Tooltip,{title:`Click to copy: ${o}`,children:(0,t.jsxs)("span",{className:"flex items-center cursor-pointer hover:text-gray-700",onClick:()=>ef(o),children:[(0,t.jsx)(u.LinkOutlined,{className:"mr-1"}),"Session: ",eh(o),(0,t.jsx)(ed.CopyOutlined,{className:"ml-1 text-gray-400 hover:text-gray-600"})]})}),(c||l?.message)&&(0,t.jsxs)(k.Button,{type:"text",size:"small",className:"text-xs text-blue-500 hover:text-blue-700 p-0 h-auto",onClick:()=>n(!a),children:[a?(0,t.jsx)(eu.DownOutlined,{}):(0,t.jsx)(ep.RightOutlined,{}),(0,t.jsx)("span",{className:"ml-1",children:"Details"})]})]}),a&&(0,t.jsxs)("div",{className:"mt-2 ml-4 p-3 bg-gray-50 rounded-md text-gray-600 border border-gray-200",children:[l?.message&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"Status Message:"}),(0,t.jsx)("span",{className:"ml-2",children:l.message})]}),i&&(0,t.jsxs)("div",{className:"mb-1.5 flex items-center",children:[(0,t.jsx)("span",{className:"font-medium text-gray-700 w-24",children:"Task ID:"}),(0,t.jsx)("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-200 rounded text-xs font-mono",children:i}),(0,t.jsx)(ed.CopyOutlined,{className:"ml-2 cursor-pointer text-gray-400 hover:text-blue-500",onClick:()=>ef(i)})]}),o&&(0,t.jsxs)("div",{className:"mb-1.5 flex items-center",children:[(0,t.jsx)("span",{className:"font-medium text-gray-700 w-24",children:"Session ID:"}),(0,t.jsx)("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-200 rounded text-xs font-mono",children:o}),(0,t.jsx)(ed.CopyOutlined,{className:"ml-2 cursor-pointer text-gray-400 hover:text-blue-500",onClick:()=>ef(o)})]}),c&&Object.keys(c).length>0&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"Custom Metadata:"}),(0,t.jsx)("pre",{className:"mt-1.5 p-2 bg-white border border-gray-200 rounded text-xs font-mono overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(c,null,2)})]})]})]})};var ey=e.i(536916),ex=e.i(28651),eb=e.i(850627);let ev=({temperature:e=1,maxTokens:s=2048,useAdvancedParams:r,onTemperatureChange:a,onMaxTokensChange:n,onUseAdvancedParamsChange:i,mockTestFallbacks:o,onMockTestFallbacksChange:l})=>{let[d,u]=(0,M.useState)(!1),p=void 0!==r?r:d,[m,h]=(0,M.useState)(e),[f,g]=(0,M.useState)(s);(0,M.useEffect)(()=>{h(e)},[e]),(0,M.useEffect)(()=>{g(s)},[s]);let y=e=>{let t=e??1;h(t),a?.(t)},x=e=>{let t=e??1e3;g(t),n?.(t)},b=p?"text-gray-700":"text-gray-400";return(0,t.jsxs)("div",{className:"space-y-4 p-4 w-80",children:[(0,t.jsx)(ey.Checkbox,{checked:p,onChange:e=>{var t;return t=e.target.checked,void(i?i(t):u(t))},children:(0,t.jsx)("span",{className:"font-medium",children:"Use Advanced Parameters"})}),l&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(ey.Checkbox,{checked:o??!1,onChange:e=>l(e.target.checked),children:(0,t.jsx)("span",{className:"font-medium",children:"Simulate failure to test fallbacks"})}),(0,t.jsx)(C.Popover,{trigger:"hover",placement:"right",content:(0,t.jsxs)("div",{style:{maxWidth:340},children:[(0,t.jsx)(I.Typography.Paragraph,{className:"text-sm",style:{marginBottom:8},children:"Causes the first request to fail so the router tries fallbacks (if configured). Use this to verify your fallback setup."}),(0,t.jsxs)(I.Typography.Paragraph,{className:"text-sm",style:{marginBottom:0},children:["Behavior can differ when keys, teams, or router settings are configured."," ",(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/keys_teams_router_settings",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"Learn more"})]})]}),children:(0,t.jsx)(c.InfoCircleOutlined,{className:"text-xs text-gray-400 cursor-pointer shrink-0 hover:text-gray-600","aria-label":"Help: Simulate failure to test fallbacks"})})]}),(0,t.jsxs)("div",{className:"space-y-4 transition-opacity duration-200",style:{opacity:p?1:.4},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(_.Text,{className:`text-sm ${b}`,children:"Temperature"}),(0,t.jsx)(P.Tooltip,{title:"Controls randomness. Lower values make output more deterministic, higher values more creative.",children:(0,t.jsx)(c.InfoCircleOutlined,{className:`text-xs ${b} cursor-help`})})]}),(0,t.jsx)(ex.InputNumber,{min:0,max:2,step:.1,value:m,onChange:y,disabled:!p,precision:1,className:"w-20"})]}),(0,t.jsx)(eb.Slider,{min:0,max:2,step:.1,value:m,onChange:y,disabled:!p,marks:{0:"0",1:"1.0",2:"2.0"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(_.Text,{className:`text-sm ${b}`,children:"Max Tokens"}),(0,t.jsx)(P.Tooltip,{title:"Maximum number of tokens to generate in the response.",children:(0,t.jsx)(c.InfoCircleOutlined,{className:`text-xs ${b} cursor-help`})})]}),(0,t.jsx)(ex.InputNumber,{min:1,max:32768,step:1,value:f,onChange:x,disabled:!p})]}),(0,t.jsx)(eb.Slider,{min:1,max:32768,step:1,value:f,onChange:x,disabled:!p,marks:{1:"1",32768:"32768"}})]})]})]})},ew=({message:e})=>e.isAudio&&"string"==typeof e.content?(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)("audio",{controls:!0,src:e.content,className:"max-w-full",style:{maxWidth:"500px"},children:"Your browser does not support the audio element."})}):null;var e_=e.i(785913);let ej={ALLOY:"Alloy - Professional and confident",ASH:"Ash - Casual and relaxed",BALAD:"Ballad - Smooth and melodic",CORAL:"Coral - Warm and engaging",ECHO:"Echo - Friendly and conversational",FABLE:"Fable - Wise and measured",NOVA:"Nova - Friendly and conversational",ONYX:"Onyx - Deep and authoritative",SAGE:"Sage - Wise and measured",SHIMMER:"Shimmer - Bright and cheerful"},eS=Object.entries({ALLOY:"alloy",ASH:"ash",BALAD:"ballad",CORAL:"coral",ECHO:"echo",FABLE:"fable",NOVA:"nova",ONYX:"onyx",SAGE:"sage",SHIMMER:"shimmer"}).map(([e,t])=>({value:t,label:ej[e]})),eN=[{value:e_.EndpointType.CHAT,label:"/v1/chat/completions"},{value:e_.EndpointType.RESPONSES,label:"/v1/responses"},{value:e_.EndpointType.ANTHROPIC_MESSAGES,label:"/v1/messages"},{value:e_.EndpointType.IMAGE,label:"/v1/images/generations"},{value:e_.EndpointType.IMAGE_EDITS,label:"/v1/images/edits"},{value:e_.EndpointType.EMBEDDINGS,label:"/v1/embeddings"},{value:e_.EndpointType.SPEECH,label:"/v1/audio/speech"},{value:e_.EndpointType.TRANSCRIPTION,label:"/v1/audio/transcriptions"},{value:e_.EndpointType.A2A_AGENTS,label:"/v1/a2a/message/send"},{value:e_.EndpointType.MCP,label:"/mcp-rest/tools/call"}];var ek=e.i(657688);let eE=async(e,t)=>({role:"user",content:[{type:"text",text:e},{type:"image_url",image_url:{url:await new Promise((e,s)=>{let r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=s,r.readAsDataURL(t)})}}]}),eT=(e,t,s,r)=>{let a="";t&&r&&(a=r.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let n={role:"user",content:t?`${e} ${a}`:e};return t&&s&&(n.imagePreviewUrl=s),n},eC=e=>"user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&!!e.imagePreviewUrl;e.s(["createChatDisplayMessage",0,eT,"createChatMultimodalMessage",0,eE,"shouldShowChatAttachedImage",0,eC],964421);let eA=({message:e})=>{if(!eC(e))return null;let s="string"==typeof e.content&&e.content.includes("[PDF attached]");return(0,t.jsx)("div",{className:"mb-2",children:s?(0,t.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,t.jsx)(l.FilePdfOutlined,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,t.jsx)(ek.default,{src:e.imagePreviewUrl||"",alt:"User uploaded image",width:256,height:200,className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px",width:"auto",height:"auto"}})})};e.s(["default",0,eA],843153);var eO=e.i(955719),eO=eO;let{Dragger:eP}=R.Upload,eI=({chatUploadedImage:e,chatImagePreviewUrl:s,onImageUpload:r,onRemoveImage:a})=>(0,t.jsx)(t.Fragment,{children:!e&&(0,t.jsx)(eP,{beforeUpload:r,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,t.jsx)(P.Tooltip,{title:"Attach image or PDF",children:(0,t.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,t.jsx)(eO.default,{style:{fontSize:"16px"}})})})})});e.s(["default",0,eI],761793);var eR=e.i(362024),eM=e.i(737434),eL=e.i(931067);let e$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};var eU=e.i(9583),eD=M.forwardRef(function(e,t){return M.createElement(eU.default,(0,eL.default)({},e,{ref:t,icon:e$}))});let eq=({code:e,containerId:s,annotations:r=[],accessToken:a})=>{let[i,o]=(0,M.useState)({}),[l,c]=(0,M.useState)({}),d=(0,J.getProxyBaseUrl)();(0,M.useEffect)(()=>{let e=async()=>{for(let e of r)if((e.filename?.toLowerCase().endsWith(".png")||e.filename?.toLowerCase().endsWith(".jpg")||e.filename?.toLowerCase().endsWith(".jpeg")||e.filename?.toLowerCase().endsWith(".gif"))&&e.container_id&&e.file_id){c(t=>({...t,[e.file_id]:!0}));try{let t=await fetch(`${d}/v1/containers/${e.container_id}/files/${e.file_id}/content`,{headers:{[(0,J.getGlobalLitellmHeaderName)()]:`Bearer ${a}`}});if(t.ok){let s=await t.blob(),r=URL.createObjectURL(s);o(t=>({...t,[e.file_id]:r}))}}catch(e){console.error("Error fetching image:",e)}finally{c(t=>({...t,[e.file_id]:!1}))}}};return r.length>0&&a&&e(),()=>{Object.values(i).forEach(e=>URL.revokeObjectURL(e))}},[r,a,d]);let u=async e=>{try{let t=await fetch(`${d}/v1/containers/${e.container_id}/files/${e.file_id}/content`,{headers:{[(0,J.getGlobalLitellmHeaderName)()]:`Bearer ${a}`}});if(t.ok){let s=await t.blob(),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=e.filename||`file_${e.file_id}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}}catch(e){console.error("Error downloading file:",e)}},m=r.filter(e=>e.filename?.toLowerCase().endsWith(".png")||e.filename?.toLowerCase().endsWith(".jpg")||e.filename?.toLowerCase().endsWith(".jpeg")||e.filename?.toLowerCase().endsWith(".gif")),h=r.filter(e=>!e.filename?.toLowerCase().endsWith(".png")&&!e.filename?.toLowerCase().endsWith(".jpg")&&!e.filename?.toLowerCase().endsWith(".jpeg")&&!e.filename?.toLowerCase().endsWith(".gif"));return e||0!==r.length?(0,t.jsxs)("div",{className:"mt-3 space-y-3",children:[e&&(0,t.jsx)(eR.Collapse,{size:"small",items:[{key:"code",label:(0,t.jsxs)("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(n.CodeOutlined,{})," Python Code Executed"]}),children:(0,t.jsx)(U.Prism,{language:"python",style:D.coy,customStyle:{margin:0,borderRadius:"6px",fontSize:"12px",maxHeight:"300px",overflow:"auto"},children:e})}]}),m.map(e=>(0,t.jsx)("div",{className:"rounded-lg border border-gray-200 overflow-hidden",children:l[e.file_id]?(0,t.jsxs)("div",{className:"flex items-center justify-center p-8 bg-gray-50",children:[(0,t.jsx)(O.Spin,{indicator:(0,t.jsx)(p.LoadingOutlined,{spin:!0})}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Loading image..."})]}):i[e.file_id]?(0,t.jsxs)("div",{children:[(0,t.jsx)("img",{src:i[e.file_id],alt:e.filename||"Generated chart",className:"max-w-full",style:{maxHeight:"400px"}}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 border-t border-gray-200",children:[(0,t.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,t.jsx)(eD,{})," ",e.filename]}),(0,t.jsxs)("button",{onClick:()=>u(e),className:"text-xs text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[(0,t.jsx)(eM.DownloadOutlined,{})," Download"]})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center p-4 bg-gray-50",children:(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Image not available"})})},e.file_id)),h.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:h.map(e=>(0,t.jsxs)("button",{onClick:()=>u(e),className:"flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,t.jsx)(em.FileTextOutlined,{className:"text-blue-500"}),(0,t.jsx)("span",{className:"text-sm",children:e.filename}),(0,t.jsx)(eM.DownloadOutlined,{className:"text-gray-400"})]},e.file_id))})]}):null};var eB=e.i(790848),ez=e.i(998573);let eF=({enabled:e,onEnabledChange:s,selectedModel:r,disabled:a=!1})=>{let i=(e=>{if(!e)return!1;let t=e.toLowerCase();return t.startsWith("openai/")||t.startsWith("gpt-")||t.startsWith("o1")||t.startsWith("o3")||t.includes("openai")})(r);return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.CodeOutlined,{className:"text-blue-500"}),(0,t.jsx)(_.Text,{className:"font-medium text-gray-700",children:"Code Interpreter"}),(0,t.jsx)(P.Tooltip,{title:"Run Python code to generate files, charts, and analyze data. Container is created automatically.",children:(0,t.jsx)(c.InfoCircleOutlined,{className:"text-gray-400 text-xs"})})]}),(0,t.jsx)(eB.Switch,{checked:e&&i,onChange:e=>{e&&!i?ez.message.warning("Code Interpreter is only available for OpenAI models"):s(e)},disabled:a||!i,size:"small",className:e&&i?"bg-blue-500":""})]}),!i&&(0,t.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(ec.ExclamationCircleOutlined,{className:"text-amber-500 mt-0.5"}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,t.jsx)("span",{children:"Code Interpreter is currently only supported for OpenAI models. "}),(0,t.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues/new?template=feature_request.yml",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Request support for other providers"})]})]})})]})};var eH=e.i(190272);let eW=({endpointType:e,onEndpointChange:s,className:r})=>(0,t.jsx)("div",{className:r,children:(0,t.jsx)(A.Select,{showSearch:!0,value:e,style:{width:"100%"},onChange:s,options:eN,className:"rounded-md",filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase())||(t?.value??"").toLowerCase().includes(e.toLowerCase())})});var eJ=e.i(437902);let{Text:eG}=I.Typography,{Panel:eV}=eR.Collapse,eK=({events:e,className:s})=>{if(console.log("MCPEventsDisplay: Received events:",e),!e||0===e.length)return console.log("MCPEventsDisplay: No events, returning null"),null;let r=e.find(e=>"response.output_item.done"===e.type&&e.item?.type==="mcp_list_tools"&&e.item.tools&&e.item.tools.length>0),a=e.filter(e=>"response.output_item.done"===e.type&&e.item?.type==="mcp_call");return(console.log("MCPEventsDisplay: toolsEvent:",r),console.log("MCPEventsDisplay: mcpCallEvents:",a),r||0!==a.length)?(0,t.jsxs)("div",{className:`jsx-32b14b04f420f3ac mcp-events-display ${s||""}`,children:[(0,t.jsx)(eJ.default,{id:"32b14b04f420f3ac",children:".openai-mcp-tools.jsx-32b14b04f420f3ac{margin:0;padding:0;position:relative}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse.jsx-32b14b04f420f3ac,.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-item.jsx-32b14b04f420f3ac{background:0 0!important;border:none!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac{color:#9ca3af!important;background:0 0!important;border:none!important;min-height:20px!important;padding:0 0 0 20px!important;font-size:14px!important;font-weight:400!important;line-height:20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac:hover{color:#6b7280!important;background:0 0!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content.jsx-32b14b04f420f3ac{background:0 0!important;border:none!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content-box.jsx-32b14b04f420f3ac{padding:4px 0 0 20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac{color:#9ca3af!important;justify-content:center!important;align-items:center!important;width:16px!important;height:16px!important;font-size:10px!important;display:flex!important;position:absolute!important;top:2px!important;left:2px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac:hover{color:#6b7280!important}.openai-vertical-line.jsx-32b14b04f420f3ac{opacity:.8;background-color:#f3f4f6;width:.5px;position:absolute;top:18px;bottom:0;left:9px}.tool-item.jsx-32b14b04f420f3ac{color:#4b5563;z-index:1;background:#fff;margin:0;padding:0;font-family:ui-monospace,SFMono-Regular,SF Mono,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:13px;line-height:18px;position:relative}.mcp-section.jsx-32b14b04f420f3ac{z-index:1;background:#fff;margin-bottom:12px;position:relative}.mcp-section.jsx-32b14b04f420f3ac:last-child{margin-bottom:0}.mcp-section-header.jsx-32b14b04f420f3ac{color:#6b7280;margin-bottom:4px;font-size:13px;font-weight:500}.mcp-code-block.jsx-32b14b04f420f3ac{background:#f9fafb;border:1px solid #f3f4f6;border-radius:6px;padding:8px;font-size:12px}.mcp-json.jsx-32b14b04f420f3ac{color:#374151;white-space:pre-wrap;word-wrap:break-word;margin:0;font-family:ui-monospace,SFMono-Regular,SF Mono,Monaco,Consolas,Liberation Mono,Courier New,monospace}.mcp-approved.jsx-32b14b04f420f3ac{color:#6b7280;align-items:center;font-size:13px;display:flex}.mcp-checkmark.jsx-32b14b04f420f3ac{color:#10b981;margin-right:6px;font-weight:700}.mcp-response-content.jsx-32b14b04f420f3ac{color:#374151;white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,SF Mono,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:13px;line-height:1.5}"}),(0,t.jsxs)("div",{className:"jsx-32b14b04f420f3ac openai-mcp-tools",children:[(0,t.jsx)("div",{className:"jsx-32b14b04f420f3ac openai-vertical-line"}),(0,t.jsxs)(eR.Collapse,{ghost:!0,size:"small",expandIconPosition:"start",defaultActiveKey:r?["list-tools"]:a.map((e,t)=>`mcp-call-${t}`),children:[r&&(0,t.jsx)(eV,{header:"List tools",children:(0,t.jsx)("div",{className:"jsx-32b14b04f420f3ac",children:r.item?.tools?.map((e,s)=>(0,t.jsx)("div",{className:"jsx-32b14b04f420f3ac tool-item",children:e.name},s))})},"list-tools"),a.map((e,s)=>(0,t.jsx)(eV,{header:e.item?.name||"Tool call",children:(0,t.jsxs)("div",{className:"jsx-32b14b04f420f3ac",children:[(0,t.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,t.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Request"}),(0,t.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-code-block",children:e.item?.arguments&&(0,t.jsx)("pre",{className:"jsx-32b14b04f420f3ac mcp-json",children:(()=>{try{return JSON.stringify(JSON.parse(e.item.arguments),null,2)}catch(t){return e.item.arguments}})()})})]}),(0,t.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:(0,t.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-approved",children:[(0,t.jsx)("span",{className:"jsx-32b14b04f420f3ac mcp-checkmark",children:""})," Approved"]})}),e.item?.output&&(0,t.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,t.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Response"}),(0,t.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-response-content",children:e.item.output})]})]})},`mcp-call-${s}`))]})]})]}):(console.log("MCPEventsDisplay: No valid events found, returning null"),null)};var eX=e.i(812618);let eY=({reasoningContent:e})=>{let[s,r]=(0,M.useState)(!0);return e?(0,t.jsxs)("div",{className:"reasoning-content mt-1 mb-2",children:[(0,t.jsxs)(k.Button,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>r(!s),icon:(0,t.jsx)(eX.BulbOutlined,{}),children:[s?"Hide reasoning":"Show reasoning",s?(0,t.jsx)(eu.DownOutlined,{className:"ml-1"}):(0,t.jsx)(ep.RightOutlined,{className:"ml-1"})]}),s&&(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm text-gray-700",children:(0,t.jsx)($.default,{components:{code({node:e,inline:s,className:r,children:a,...n}){let i=/language-(\w+)/.exec(r||"");return!s&&i?(0,t.jsx)(U.Prism,{style:D.coy,language:i[1],PreTag:"div",className:"rounded-md my-2",...n,children:String(a).replace(/\n$/,"")}):(0,t.jsx)("code",{className:`${r} px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono`,...n,children:a})}},children:e})})]}):null};e.s(["default",0,eY],966988);var eQ=e.i(989022);let eZ=async(e,t)=>{let s=await new Promise((e,s)=>{let r=new FileReader;r.onload=()=>{e(r.result.split(",")[1])},r.onerror=s,r.readAsDataURL(t)}),r=t.type||(t.name.toLowerCase().endsWith(".pdf")?"application/pdf":"image/jpeg");return{role:"user",content:[{type:"input_text",text:e},{type:"input_image",image_url:`data:${r};base64,${s}`}]}},e0=(e,t,s,r)=>{let a="";t&&r&&(a=r.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let n={role:"user",content:t?`${e} ${a}`:e};return t&&s&&(n.imagePreviewUrl=s),n},e1=({message:e})=>{if(!("user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&e.imagePreviewUrl))return null;let s="string"==typeof e.content&&e.content.includes("[PDF attached]");return(0,t.jsx)("div",{className:"mb-2",children:s?(0,t.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,t.jsx)(l.FilePdfOutlined,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,t.jsx)("img",{src:e.imagePreviewUrl,alt:"User uploaded image",className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px"}})})};var eO=eO;let{Dragger:e2}=R.Upload,e4=({responsesUploadedImage:e,responsesImagePreviewUrl:s,onImageUpload:r,onRemoveImage:a})=>(0,t.jsx)(t.Fragment,{children:!e&&(0,t.jsx)(e2,{beforeUpload:r,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,t.jsx)(P.Tooltip,{title:"Attach image or PDF",children:(0,t.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,t.jsx)(eO.default,{style:{fontSize:"16px"}})})})})});function e3({searchResults:e}){let[s,r]=(0,M.useState)(!0),[a,n]=(0,M.useState)({});if(!e||0===e.length)return null;let o=e.reduce((e,t)=>e+t.data.length,0);return(0,t.jsxs)("div",{className:"search-results-content mt-1 mb-2",children:[(0,t.jsxs)(k.Button,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>r(!s),icon:(0,t.jsx)(i.DatabaseOutlined,{}),children:[s?"Hide sources":`Show sources (${o})`,s?(0,t.jsx)(eu.DownOutlined,{className:"ml-1"}):(0,t.jsx)(ep.RightOutlined,{className:"ml-1"})]}),s&&(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm",children:(0,t.jsx)("div",{className:"space-y-3",children:e.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-xs text-gray-600 mb-2 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Query:"}),(0,t.jsxs)("span",{className:"italic",children:['"',e.search_query,'"']}),(0,t.jsx)("span",{className:"text-gray-400",children:""}),(0,t.jsxs)("span",{className:"text-gray-500",children:[e.data.length," result",1!==e.data.length?"s":""]})]}),(0,t.jsx)("div",{className:"space-y-2",children:e.data.map((e,r)=>{let i=a[`${s}-${r}`]||!1;return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-md overflow-hidden bg-white",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-2 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{let e;return e=`${s}-${r}`,void n(t=>({...t,[e]:!t[e]}))},children:(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,t.jsx)("svg",{className:`w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ${i?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,t.jsx)(em.FileTextOutlined,{className:"text-gray-400 flex-shrink-0",style:{fontSize:"12px"}}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-700 truncate",children:e.filename||e.file_id||`Result ${r+1}`}),(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-700 font-mono flex-shrink-0",children:e.score.toFixed(3)})]})}),i&&(0,t.jsx)("div",{className:"border-t border-gray-200 bg-white",children:(0,t.jsxs)("div",{className:"p-3 space-y-2",children:[e.content.map((e,s)=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"text-xs font-mono bg-gray-50 p-2 rounded text-gray-800 whitespace-pre-wrap break-words",children:e.text})},s)),e.attributes&&Object.keys(e.attributes).length>0&&(0,t.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Metadata:"}),(0,t.jsx)("div",{className:"space-y-1",children:Object.entries(e.attributes).map(([e,s])=>(0,t.jsxs)("div",{className:"text-xs flex gap-2",children:[(0,t.jsxs)("span",{className:"text-gray-500 font-medium",children:[e,":"]}),(0,t.jsx)("span",{className:"text-gray-700 font-mono break-all",children:String(s)})]},e))})]})]})})]},r)})})]},s))})})]})}e.s(["SearchResultsDisplay",()=>e3],152401);let e5=({endpointType:e,responsesSessionId:s,useApiSessionManagement:r,onToggleSessionManagement:a})=>e!==e_.EndpointType.RESPONSES?null:(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),(0,t.jsx)(P.Tooltip,{title:"Choose between LiteLLM API session management (using previous_response_id) or UI-based session management (using chat history)",children:(0,t.jsx)(c.InfoCircleOutlined,{className:"text-gray-400",style:{fontSize:"12px"}})})]}),(0,t.jsx)(eB.Switch,{checked:r,onChange:a,checkedChildren:"API",unCheckedChildren:"UI",size:"small"})]}),(0,t.jsxs)("div",{className:`text-xs p-2 rounded-md ${s?"bg-green-50 text-green-700 border border-green-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.InfoCircleOutlined,{style:{fontSize:"12px"}}),(()=>{if(!s)return r?"API Session: Ready":"UI Session: Ready";let e=r?"Response ID":"UI Session",t=s.slice(0,10);return`${e}: ${t}...`})()]}),s&&(0,t.jsx)(P.Tooltip,{title:(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsx)("div",{className:"mb-1",children:"Copy response ID to continue session:"}),(0,t.jsx)("div",{className:"bg-gray-800 text-gray-100 p-2 rounded font-mono text-xs whitespace-pre-wrap",children:`curl -X POST "your-proxy-url/v1/responses" \\
  -H "Authorization: Bearer your-api-key" \\
  -H "Content-Type: application/json" \\
  -d '{
    "model": "your-model",
    "input": [{"role": "user", "content": "your message", "type": "message"}],
    "previous_response_id": "${s}",
    "stream": true
  }'`})]}),overlayStyle:{maxWidth:"500px"},children:(0,t.jsx)("button",{onClick:()=>{s&&(navigator.clipboard.writeText(s),W.default.success("Response ID copied to clipboard!"))},className:"ml-2 p-1 hover:bg-green-100 rounded transition-colors",children:(0,t.jsx)(ed.CopyOutlined,{style:{fontSize:"12px"}})})})]}),(0,t.jsx)("div",{className:"text-xs opacity-75 mt-1",children:s?r?"LiteLLM API session active - context maintained server-side":"UI session active - context maintained client-side":r?"LiteLLM will manage session using previous_response_id":"UI will manage session using chat history"})]})]}),{TextArea:e6}=E.Input,{Dragger:e8}=R.Upload,e7=new Set([e_.EndpointType.CHAT,e_.EndpointType.RESPONSES,e_.EndpointType.MCP]);e.s(["default",0,({accessToken:e,token:E,userRole:R,userID:er,disabledPersonalKeyCreation:eo,proxySettings:el,simplified:ec=!1,fixedModel:ed})=>{let eu,{t:ep}=(0,L.useTranslation)(),[em,eh]=(0,M.useState)([]),[ef,ey]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedMCPServers");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedMCPServers from sessionStorage",e),[]}}),[ex,eb]=(0,M.useState)(!1),[ej,eN]=(0,M.useState)({}),[ek,eC]=(0,M.useState)(void 0),eO=(0,M.useRef)(null),[eP,eR]=(0,M.useState)(()=>{let e=sessionStorage.getItem("mcpServerToolRestrictions");try{return e?JSON.parse(e):{}}catch(e){return console.error("Error parsing mcpServerToolRestrictions from sessionStorage",e),{}}}),[eM,eL]=(0,M.useState)(()=>{let e=sessionStorage.getItem("apiKeySource");if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing apiKeySource from sessionStorage",e)}return eo?"custom":"session"}),[e$,eU]=(0,M.useState)(()=>sessionStorage.getItem("apiKey")||""),[eD,eB]=(0,M.useState)(()=>sessionStorage.getItem("customProxyBaseUrl")||""),[ez,eJ]=(0,M.useState)(""),[eG,eV]=(0,M.useState)(()=>{if(ec)return[];try{let e=sessionStorage.getItem("chatHistory");return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing chatHistory from sessionStorage",e),[]}}),[eX,e2]=(0,M.useState)(ec?ed:void 0),[e9,te]=(0,M.useState)(!1),[tt,ts]=(0,M.useState)([]),[tr,ta]=(0,M.useState)([]),[tn,ti]=(0,M.useState)(void 0),to=(0,M.useRef)(null),[tl,tc]=(0,M.useState)(()=>sessionStorage.getItem("endpointType")||e_.EndpointType.CHAT),[td,tu]=(0,M.useState)(!1),tp=(0,M.useRef)(null),[tm,th]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedTags");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedTags from sessionStorage",e),[]}}),[tf,tg]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedVoice");if(!e)return"alloy";try{return JSON.parse(e)}catch{return e}}),[ty,tx]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedVectorStores");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedVectorStores from sessionStorage",e),[]}}),[tb,tv]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedGuardrails");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedGuardrails from sessionStorage",e),[]}}),[tw,t_]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedPolicies");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedPolicies from sessionStorage",e),[]}}),[tj,tS]=(0,M.useState)(()=>sessionStorage.getItem("messageTraceId")||null),[tN,tk]=(0,M.useState)(()=>sessionStorage.getItem("responsesSessionId")||null),[tE,tT]=(0,M.useState)(()=>{let e=sessionStorage.getItem("useApiSessionManagement");return!e||JSON.parse(e)}),[tC,tA]=(0,M.useState)([]),[tO,tP]=(0,M.useState)([]),[tI,tR]=(0,M.useState)(null),[tM,tL]=(0,M.useState)(null),[t$,tU]=(0,M.useState)(null),[tD,tq]=(0,M.useState)(null),[tB,tz]=(0,M.useState)(null),[tF,tH]=(0,M.useState)(!1),[tW,tJ]=(0,M.useState)(""),[tG,tV]=(0,M.useState)("openai"),[tK,tX]=(0,M.useState)([]),[tY,tQ]=(0,M.useState)(1),[tZ,t0]=(0,M.useState)(2048),[t1,t2]=(0,M.useState)(!1),[t4,t3]=(0,M.useState)(!1),t5=function(){let[e,t]=(0,M.useState)(()=>{let e=sessionStorage.getItem("codeInterpreterEnabled");return!!e&&JSON.parse(e)}),[s,r]=(0,M.useState)(null),a=(0,M.useCallback)(e=>{t(e),sessionStorage.setItem("codeInterpreterEnabled",JSON.stringify(e))},[]),n=(0,M.useCallback)(()=>{r(null)},[]),i=(0,M.useCallback)(()=>{a(!e)},[e,a]);return{enabled:e,result:s,setEnabled:a,setResult:r,clearResult:n,toggle:i}}(),t6=(0,M.useRef)(null),t8=async()=>{let t="session"===eM?e:e$;if(t){eb(!0);try{let e=await (0,J.fetchMCPServers)(t);eh(Array.isArray(e)?e:e.data||[])}catch(e){console.error("Error fetching MCP servers:",e)}finally{eb(!1)}}};(0,M.useEffect)(()=>{ec&&ed&&(e2(ed),tc(e_.EndpointType.CHAT))},[ec,ed]);let t7=async t=>{let s="session"===eM?e:e$;if(s&&!ej[t])try{let e=await (0,J.listMCPTools)(s,t);eN(s=>({...s,[t]:e.tools||[]}))}catch(e){console.error(`Error fetching tools for server ${t}:`,e)}};(0,M.useEffect)(()=>{if(tF){let t=(0,eH.generateCodeSnippet)({apiKeySource:eM,accessToken:e,apiKey:e$,inputMessage:ez,chatHistory:eG,selectedTags:tm,selectedVectorStores:ty,selectedGuardrails:tb,selectedPolicies:tw,selectedMCPServers:ef,mcpServers:em,mcpServerToolRestrictions:eP,endpointType:tl,selectedModel:eX,selectedSdk:tG,selectedVoice:tf,proxySettings:el});tJ(t)}},[tF,tG,eM,e,e$,ez,eG,tm,ty,tb,tw,ef,em,eP,tl,eX,el]),(0,M.useEffect)(()=>{if(ec)return;let e=setTimeout(()=>{sessionStorage.setItem("chatHistory",JSON.stringify(eG))},500);return()=>{clearTimeout(e)}},[eG,ec]),(0,M.useEffect)(()=>{sessionStorage.setItem("apiKeySource",JSON.stringify(eM)),sessionStorage.setItem("apiKey",e$),sessionStorage.setItem("endpointType",tl),sessionStorage.setItem("selectedTags",JSON.stringify(tm)),sessionStorage.setItem("selectedVectorStores",JSON.stringify(ty)),sessionStorage.setItem("selectedGuardrails",JSON.stringify(tb)),sessionStorage.setItem("selectedPolicies",JSON.stringify(tw)),sessionStorage.setItem("selectedMCPServers",JSON.stringify(ef)),sessionStorage.setItem("mcpServerToolRestrictions",JSON.stringify(eP)),sessionStorage.setItem("selectedVoice",tf),sessionStorage.removeItem("selectedMCPTools"),ec||(eX?sessionStorage.setItem("selectedModel",eX):sessionStorage.removeItem("selectedModel")),tj?sessionStorage.setItem("messageTraceId",tj):sessionStorage.removeItem("messageTraceId"),tN?sessionStorage.setItem("responsesSessionId",tN):sessionStorage.removeItem("responsesSessionId"),sessionStorage.setItem("useApiSessionManagement",JSON.stringify(tE))},[ec,eM,e$,eX,tl,tm,ty,tb,tw,tj,tN,tE,ef,eP,tf]),(0,M.useEffect)(()=>{let t="session"===eM?e:e$;if(!t||!E||!R||!er)return void console.log("userApiKey or token or userRole or userID is missing = ",t,E,R,er);let s=async()=>{try{if(!t)return void console.log("userApiKey is missing");let e=await (0,es.fetchAvailableModels)(t);console.log("Fetched models:",e),ts(e);let s=e.some(e=>e.model_group===eX);e.length&&s||e2(void 0)}catch(e){console.error("Error fetching model info:",e)}};ec||s(),t8()},[e,er,R,eM,e$,E,ec]),(0,M.useEffect)(()=>{tl!==e_.EndpointType.MCP||1!==ef.length||"__all__"===ef[0]||ej[ef[0]]||t7(ef[0])},[tl,ef,ej]),(0,M.useEffect)(()=>{let t="session"===eM?e:e$;t&&tl===e_.EndpointType.A2A_AGENTS&&(async()=>{try{let e=await (0,et.fetchAvailableAgents)(t,eD||void 0);ta(e),tn&&!e.some(e=>e.agent_name===tn)&&ti(void 0)}catch(e){console.error("Error fetching agents:",e)}})()},[e,eM,e$,tl,eD,tn]),(0,M.useEffect)(()=>{t6.current&&setTimeout(()=>{t6.current?.scrollIntoView({behavior:"smooth",block:"end"})},100)},[eG]);let t9=(e,t,s)=>{console.log("updateTextUI called with:",e,t,s),eV(r=>{let a=r[r.length-1];if(!a||a.role!==e||a.isImage||a.isAudio)return[...r,{role:e,content:t,model:s}];{let e={...a,content:a.content+t,model:a.model??s};return[...r.slice(0,-1),e]}})},se=e=>{eV(t=>{let s=t[t.length-1];return!s||"assistant"!==s.role||s.isImage||s.isAudio?t.length>0&&"user"===t[t.length-1].role?[...t,{role:"assistant",content:"",reasoningContent:e}]:t:[...t.slice(0,t.length-1),{...s,reasoningContent:(s.reasoningContent||"")+e}]})},st=e=>{console.log("updateTimingData called with:",e),eV(t=>{let s=t[t.length-1];if(console.log("Current last message:",s),s&&"assistant"===s.role){console.log("Updating assistant message with timeToFirstToken:",e);let r=[...t.slice(0,t.length-1),{...s,timeToFirstToken:e}];return console.log("Updated chat history:",r),r}return s&&"user"===s.role?(console.log("Creating new assistant message with timeToFirstToken:",e),[...t,{role:"assistant",content:"",timeToFirstToken:e}]):(console.log("No appropriate message found to update timing"),t)})},ss=(e,t)=>{console.log("Received usage data:",e),eV(s=>{let r=s[s.length-1];if(r&&"assistant"===r.role){console.log("Updating message with usage data:",e);let a={...r,usage:e,toolName:t};return console.log("Updated message:",a),[...s.slice(0,s.length-1),a]}return s})},sr=e=>{console.log("Received A2A metadata:",e),eV(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){let r={...s,a2aMetadata:e};return[...t.slice(0,t.length-1),r]}return t})},sa=e=>{eV(t=>{let s=t[t.length-1];return s&&"assistant"===s.role?[...t.slice(0,t.length-1),{...s,totalLatency:e}]:t})},sn=e=>{console.log("Received search results:",e),eV(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){console.log("Updating message with search results");let r={...s,searchResults:e};return[...t.slice(0,t.length-1),r]}return t})},si=e=>{console.log("Received response ID for session management:",e),tE&&tk(e)},so=e=>{console.log("ChatUI: Received MCP event:",e),tX(t=>{if(e.item_id&&t.some(t=>t.item_id===e.item_id&&t.type===e.type&&(t.sequence_number===e.sequence_number||void 0===t.sequence_number&&void 0===e.sequence_number)))return console.log("ChatUI: Duplicate MCP event, skipping"),t;let s=[...t,e];return console.log("ChatUI: Updated MCP events:",s),s})},sl=(e,t)=>{eV(s=>[...s,{role:"assistant",content:e,model:t,isImage:!0}])},sc=(e,t)=>{eV(s=>{let r=s[s.length-1];if(!r||"assistant"!==r.role||r.isImage||r.isAudio)return[...s,{role:"assistant",content:"",model:t,image:{url:e,detail:"auto"}}];{let a={...r,image:{url:e,detail:"auto"},model:r.model??t};return[...s.slice(0,-1),a]}})},sd=e=>{tA(t=>[...t,e]);let t=URL.createObjectURL(e);return tP(e=>[...e,t]),!1},su=()=>{tO.forEach(e=>{URL.revokeObjectURL(e)}),tA([]),tP([])},sp=()=>{tM&&URL.revokeObjectURL(tM),tR(null),tL(null)},sm=()=>{tD&&URL.revokeObjectURL(tD),tU(null),tq(null)},sh=()=>{tz(null)},sf=async()=>{let t;if(""===ez.trim()&&tl!==e_.EndpointType.TRANSCRIPTION&&tl!==e_.EndpointType.MCP)return;if(tl===e_.EndpointType.IMAGE_EDITS&&0===tC.length)return void W.default.fromBackend(ep("playground.uploadImageForEditing"));if(tl===e_.EndpointType.TRANSCRIPTION&&!tB)return void W.default.fromBackend(ep("playground.uploadAudioForTranscription"));if(tl===e_.EndpointType.A2A_AGENTS&&!tn)return void W.default.fromBackend(ep("playground.selectAgentToSend"));let s={};if(tl===e_.EndpointType.MCP){if(!(1===ef.length&&"__all__"!==ef[0]?ef[0]:null))return void W.default.fromBackend(ep("playground.selectMcpServer"));if(!ek)return void W.default.fromBackend(ep("playground.selectMcpTool"));if(!(ej[ef[0]]||[]).find(e=>e.name===ek))return void W.default.fromBackend(ep("playground.waitForToolSchema"));try{s=await eO.current?.getSubmitValues()??{}}catch(e){W.default.fromBackend(e instanceof Error?e.message:"Please fill in all required parameters");return}}if([e_.EndpointType.CHAT,e_.EndpointType.IMAGE,e_.EndpointType.SPEECH,e_.EndpointType.IMAGE_EDITS,e_.EndpointType.RESPONSES,e_.EndpointType.ANTHROPIC_MESSAGES,e_.EndpointType.EMBEDDINGS,e_.EndpointType.TRANSCRIPTION].includes(tl)&&!eX)return void W.default.fromBackend(ep("playground.selectModelFirst"));if(!E||!R||!er)return;let r=ec||"session"===eM?e:e$;if(!r)return void W.default.fromBackend(ep("playground.provideVirtualKey"));tp.current=new AbortController;let a=tp.current.signal;if(tl===e_.EndpointType.RESPONSES&&tI)try{t=await eZ(ez,tI)}catch(e){W.default.fromBackend("Failed to process image. Please try again.");return}else if(tl===e_.EndpointType.CHAT&&t$)try{t=await eE(ez,t$)}catch(e){W.default.fromBackend("Failed to process image. Please try again.");return}else t={role:"user",content:ez};let n=tj||(0,q.v4)();tj||tS(n),eV([...eG,tl===e_.EndpointType.RESPONSES&&tI?e0(ez,!0,tM||void 0,tI.name):tl===e_.EndpointType.CHAT&&t$?eT(ez,!0,tD||void 0,t$.name):tl===e_.EndpointType.TRANSCRIPTION&&tB?e0(ez?` Audio file: ${tB.name}
Prompt: ${ez}`:` Audio file: ${tB.name}`,!1):tl===e_.EndpointType.MCP&&ek?e0(` MCP Tool: ${ek}
Arguments: ${JSON.stringify(s,null,2)}`,!1):e0(ez,!1)]),tX([]),t5.clearResult(),tu(!0);try{if(eX)if(tl===e_.EndpointType.CHAT){let e=[...eG.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:"string"==typeof t?t:""})),t],s=ec&&el?el.LITELLM_UI_API_DOC_BASE_URL??el.PROXY_BASE_URL??void 0:eD||void 0;await (0,Z.makeOpenAIChatCompletionRequest)(e,(e,t)=>t9("assistant",e,t),eX,r,tm,a,se,st,ss,n,ty.length>0?ty:void 0,tb.length>0?tb:void 0,tw.length>0?tw:void 0,ef,sc,sn,t1?tY:void 0,t1?tZ:void 0,sa,s,em,eP,so,t4)}else if(tl===e_.EndpointType.IMAGE)await en(ez,(e,t)=>sl(e,t),eX,r,tm,a,eD||void 0);else if(tl===e_.EndpointType.SPEECH)await (0,Y.makeOpenAIAudioSpeechRequest)(ez,tf,(e,t)=>{eV(s=>[...s,{role:"assistant",content:e,model:t,isAudio:!0}])},eX||"",r,tm,a,void 0,void 0,eD||void 0);else if(tl===e_.EndpointType.IMAGE_EDITS)tC.length>0&&await ea(1===tC.length?tC[0]:tC,ez,(e,t)=>sl(e,t),eX,r,tm,a,eD||void 0);else if(tl===e_.EndpointType.RESPONSES){let e;e=tE&&tN?[t]:[...eG.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:t})),t],await ei(e,(e,t,s)=>t9(e,t,s),eX,r,tm,a,se,st,ss,n,ty.length>0?ty:void 0,tb.length>0?tb:void 0,tw.length>0?tw:void 0,ef,tE?tN:null,si,so,t5.enabled,t5.setResult,eD||void 0,em,eP)}else if(tl===e_.EndpointType.ANTHROPIC_MESSAGES){let e=[...eG.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:t})),t];await (0,X.makeAnthropicMessagesRequest)(e,(e,t,s)=>t9(e,t,s),eX,r,tm,a,se,st,ss,n,ty.length>0?ty:void 0,tb.length>0?tb:void 0,tw.length>0?tw:void 0,ef,eD||void 0)}else tl===e_.EndpointType.EMBEDDINGS?await (0,ee.makeOpenAIEmbeddingsRequest)(ez,(e,t)=>{eV(s=>[...s,{role:"assistant",content:(0,B.truncateString)(e,100),model:t,isEmbeddings:!0}])},eX,r,tm,eD||void 0):tl===e_.EndpointType.TRANSCRIPTION&&tB&&await (0,Q.makeOpenAIAudioTranscriptionRequest)(tB,(e,t)=>t9("assistant",e,t),eX,r,tm,a,void 0,void 0,void 0,void 0,eD||void 0);if(tl===e_.EndpointType.MCP){let e=1===ef.length&&"__all__"!==ef[0]?ef[0]:null;if(e&&ek){let t=await (0,J.callMCPTool)(r,e,ek,s,tb.length>0?{guardrails:tb}:void 0),a=t?.content?.length>0?JSON.stringify(t.content.map(e=>"text"===e.type?e.text:e).filter(Boolean),null,2):JSON.stringify(t,null,2);t9("assistant",a||"Tool executed successfully.")}}tl===e_.EndpointType.A2A_AGENTS&&tn&&await (0,K.makeA2ASendMessageRequest)(tn,ez,(e,t)=>t9("assistant",e,t),r,a,st,sa,sr,eD||void 0,tb.length>0?tb:void 0)}catch(e){a.aborted?console.log("Request was cancelled"):(console.error("Error fetching response",e),t9("assistant","Error fetching response:"+e))}finally{tu(!1),tp.current=null,tl===e_.EndpointType.IMAGE_EDITS&&su(),tl===e_.EndpointType.RESPONSES&&tI&&sp(),tl===e_.EndpointType.CHAT&&t$&&sm(),tl===e_.EndpointType.TRANSCRIPTION&&tB&&sh()}eJ("")};if(R&&"Admin Viewer"===R){let{Title:e,Paragraph:s}=I.Typography;return(0,t.jsxs)("div",{children:[(0,t.jsx)(e,{level:1,children:ep("playground.accessDenied")}),(0,t.jsx)(s,{children:ep("playground.askAdminForAccess")})]})}let sg=(0,t.jsx)(p.LoadingOutlined,{style:{fontSize:24},spin:!0});return(0,t.jsxs)("div",{className:`w-full bg-white ${ec?"h-full flex flex-col":"p-4 pb-0"}`,children:[(0,t.jsx)(w.Card,{className:`w-full rounded-xl shadow-md overflow-hidden ${ec?"h-full flex flex-col":""}`,children:(0,t.jsxs)("div",{className:`flex w-full gap-4 ${ec?"h-full":"h-[80vh]"}`,children:[!ec&&(0,t.jsxs)("div",{className:"w-1/4 p-4 bg-gray-50 overflow-y-auto",children:[(0,t.jsx)(S.Title,{className:"text-xl font-semibold mb-6 mt-2",children:ep("playground.configurations")}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(d.KeyOutlined,{className:"mr-2"})," Virtual Key Source"]}),(0,t.jsx)(A.Select,{disabled:eo,value:eM,style:{width:"100%"},onChange:e=>{eL(e)},options:[{value:"session",label:ep("playground.currentUISession")},{value:"custom",label:ep("playground.virtualKey")}],className:"rounded-md"}),"custom"===eM&&(0,t.jsx)(j.TextInput,{className:"mt-2",placeholder:ep("playground.enterCustomVirtualKey"),type:"password",onValueChange:eU,value:e$,icon:d.KeyOutlined})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)(_.Text,{className:"font-medium block text-gray-700 flex items-center",children:[(0,t.jsx)(g.SettingOutlined,{className:"mr-2"})," Custom Proxy Base URL"]}),el?.LITELLM_UI_API_DOC_BASE_URL&&!eD&&(0,t.jsx)(k.Button,{type:"link",size:"small",icon:(0,t.jsx)(u.LinkOutlined,{}),onClick:()=>{eB(el.LITELLM_UI_API_DOC_BASE_URL||""),sessionStorage.setItem("customProxyBaseUrl",el.LITELLM_UI_API_DOC_BASE_URL||"")},className:"text-gray-500 hover:text-gray-700",children:"Fill"}),eD&&(0,t.jsx)(k.Button,{type:"link",size:"small",icon:(0,t.jsx)(a.ClearOutlined,{}),onClick:()=>{eB(""),sessionStorage.removeItem("customProxyBaseUrl")},className:"text-gray-500 hover:text-gray-700",children:"Clear"})]}),(0,t.jsx)(j.TextInput,{placeholder:ep("playground.enterCustomProxyUrl"),onValueChange:e=>{eB(e),sessionStorage.setItem("customProxyBaseUrl",e)},value:eD,icon:s.ApiOutlined}),eD&&(0,t.jsxs)(_.Text,{className:"text-xs text-gray-500 mt-1",children:["API calls will be sent to: ",eD]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(s.ApiOutlined,{className:"mr-2"})," Endpoint Type"]}),(0,t.jsx)(eW,{endpointType:tl,onEndpointChange:e=>{tc(e),e2(void 0),ti(void 0),te(!1),eC(void 0),e===e_.EndpointType.MCP&&ey(e=>1===e.length&&"__all__"!==e[0]?e:[]);try{sessionStorage.removeItem("selectedModel"),sessionStorage.removeItem("selectedAgent")}catch{}},className:"mb-4"}),tl===e_.EndpointType.SPEECH&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(y.SoundOutlined,{className:"mr-2"}),"Voice"]}),(0,t.jsx)(A.Select,{value:tf,onChange:e=>{tg(e),sessionStorage.setItem("selectedVoice",e)},style:{width:"100%"},className:"rounded-md",options:eS})]}),(0,t.jsx)(e5,{endpointType:tl,responsesSessionId:tN,useApiSessionManagement:tE,onToggleSessionManagement:e=>{tT(e),e||tk(null)}})]}),tl!==e_.EndpointType.A2A_AGENTS&&tl!==e_.EndpointType.MCP&&(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(h.RobotOutlined,{className:"mr-2"})," Select Model"]}),(()=>{if(!eX||"custom"===eX)return!1;let e=tt.find(e=>e.model_group===eX);return!!e&&(!e.mode||"chat"===e.mode)})()?(0,t.jsx)(C.Popover,{content:(0,t.jsx)(ev,{temperature:tY,maxTokens:tZ,useAdvancedParams:t1,onTemperatureChange:tQ,onMaxTokensChange:t0,onUseAdvancedParamsChange:t2,mockTestFallbacks:t4,onMockTestFallbacksChange:t3}),title:ep("playground.modelSettings"),trigger:"click",placement:"right",children:(0,t.jsx)(k.Button,{type:"text",size:"small",icon:(0,t.jsx)(g.SettingOutlined,{}),className:"text-gray-500 hover:text-gray-700","aria-label":ep("playground.modelSettings"),"data-testid":"model-settings-button"})}):(0,t.jsx)(P.Tooltip,{title:ep("playground.advancedParamsTooltip"),children:(0,t.jsx)(k.Button,{type:"text",size:"small",icon:(0,t.jsx)(g.SettingOutlined,{}),className:"text-gray-300 cursor-not-allowed",disabled:!0})})]}),(0,t.jsx)(A.Select,{value:eX,placeholder:ep("playground.selectModel"),onChange:e=>{console.log(`selected ${e}`),e2(e),te("custom"===e)},options:[{value:"custom",label:ep("playground.enterCustomModel"),key:"custom"},...Array.from(new Set(tt.filter(e=>{if(!e.mode)return!0;let t=(0,e_.getEndpointType)(e.mode);return tl===e_.EndpointType.RESPONSES||tl===e_.EndpointType.ANTHROPIC_MESSAGES?t===tl||t===e_.EndpointType.CHAT:tl===e_.EndpointType.IMAGE_EDITS?t===tl||t===e_.EndpointType.IMAGE:t===tl}).map(e=>e.model_group))).map((e,t)=>({value:e,label:e,key:t}))],style:{width:"100%"},showSearch:!0,className:"rounded-md"}),e9&&(0,t.jsx)(j.TextInput,{className:"mt-2",placeholder:ep("playground.enterCustomModelName"),onValueChange:e=>{to.current&&clearTimeout(to.current),to.current=setTimeout(()=>{e2(e)},500)}})]}),tl===e_.EndpointType.A2A_AGENTS&&(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(h.RobotOutlined,{className:"mr-2"})," Select Agent"]}),(0,t.jsx)(A.Select,{value:tn,placeholder:ep("playground.selectAgent"),onChange:e=>ti(e),options:tr.map(e=>({value:e.agent_name,label:e.agent_name||e.agent_id,key:e.agent_id})),style:{width:"100%"},showSearch:!0,className:"rounded-md",optionLabelProp:"label",children:tr.map(e=>(0,t.jsx)(A.Select.Option,{value:e.agent_name,label:e.agent_name||e.agent_id,children:(0,t.jsxs)("div",{className:"flex flex-col py-1",children:[(0,t.jsx)("span",{className:"font-medium",children:e.agent_name||e.agent_id}),e.agent_card_params?.description&&(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.agent_card_params.description})]})},e.agent_id))}),0===tr.length&&(0,t.jsx)(_.Text,{className:"text-xs text-gray-500 mt-2 block",children:"No agents found. Create agents via /v1/agents endpoint."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(x.TagsOutlined,{className:"mr-2"})," Tags"]}),(0,t.jsx)(G.default,{value:tm,onChange:th,className:"mb-4",accessToken:e||""})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(b.ToolOutlined,{className:"mr-2"}),tl===e_.EndpointType.MCP?ep("playground.mcpServer"):ep("playground.mcpServers"),(0,t.jsx)(P.Tooltip,{className:"ml-1",title:tl===e_.EndpointType.MCP?"Select an MCP server to test tools directly.":"Select MCP servers to use in your conversation.",children:(0,t.jsx)(c.InfoCircleOutlined,{})})]}),(0,t.jsxs)(A.Select,{mode:tl===e_.EndpointType.MCP?void 0:"multiple",style:{width:"100%"},placeholder:tl===e_.EndpointType.MCP?ep("playground.selectMcpServerSingle"):ep("playground.selectMcpServersMulti"),value:tl===e_.EndpointType.MCP?"__all__"!==ef[0]&&1===ef.length?ef[0]:void 0:ef,onChange:e=>{tl===e_.EndpointType.MCP?(ey(e?[e]:[]),eC(void 0),e&&!ej[e]&&t7(e)):e.includes("__all__")?(ey(["__all__"]),eR({})):(ey(e),eR(t=>{let s={...t};return Object.keys(s).forEach(t=>{e.includes(t)||delete s[t]}),s}),e.forEach(e=>{ej[e]||t7(e)}))},loading:ex,className:"mb-2",allowClear:!0,optionLabelProp:"label",disabled:!e7.has(tl),maxTagCount:tl===e_.EndpointType.MCP?1:"responsive",children:[tl!==e_.EndpointType.MCP&&(0,t.jsx)(A.Select.Option,{value:"__all__",label:"All MCP Servers",children:(0,t.jsxs)("div",{className:"flex flex-col py-1",children:[(0,t.jsx)("span",{className:"font-medium",children:ep("playground.allMcpServers")}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:ep("playground.useAllMcpServers")})]})},"__all__"),em.map(e=>(0,t.jsx)(A.Select.Option,{value:e.server_id,label:e.alias||e.server_name||e.server_id,disabled:tl!==e_.EndpointType.MCP&&ef.includes("__all__"),children:(0,t.jsxs)("div",{className:"flex flex-col py-1",children:[(0,t.jsx)("span",{className:"font-medium",children:e.alias||e.server_name||e.server_id}),e.description&&(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.description})]})},e.server_id))]}),tl===e_.EndpointType.MCP&&1===ef.length&&"__all__"!==ef[0]&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)(_.Text,{className:"text-xs text-gray-600 mb-1 block",children:ep("playground.selectTool")}),(0,t.jsx)(A.Select,{style:{width:"100%"},placeholder:ep("playground.selectToolToCall"),value:ek,onChange:e=>eC(e),options:(ej[ef[0]]||[]).map(e=>({value:e.name,label:e.name})),allowClear:!0,className:"rounded-md"})]}),ef.length>0&&!ef.includes("__all__")&&tl!==e_.EndpointType.MCP&&e7.has(tl)&&(0,t.jsx)("div",{className:"mt-3 space-y-2",children:ef.map(e=>{let s=em.find(t=>t.server_id===e),r=ej[e]||[];return 0===r.length?null:(0,t.jsxs)("div",{className:"border rounded p-2",children:[(0,t.jsxs)(_.Text,{className:"text-xs text-gray-600 mb-1",children:["Limit tools for ",s?.alias||s?.server_name||e,":"]}),(0,t.jsx)(A.Select,{mode:"multiple",size:"small",style:{width:"100%"},placeholder:ep("playground.allToolsDefault"),value:eP[e]||[],onChange:t=>{eR(s=>({...s,[e]:t}))},options:r.map(e=>({value:e.name,label:e.name})),maxTagCount:2})]},e)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(i.DatabaseOutlined,{className:"mr-2"})," Vector Store",(0,t.jsx)(P.Tooltip,{className:"ml-1",title:(0,t.jsxs)("span",{children:["Select vector store(s) to use for this LLM API call. You can set up your vector store"," ",(0,t.jsx)("a",{href:"?page=vector-stores",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,t.jsx)(c.InfoCircleOutlined,{})})]}),(0,t.jsx)(V.default,{value:ty,onChange:tx,className:"mb-4",accessToken:e||""})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(f.SafetyOutlined,{className:"mr-2"})," Guardrails",(0,t.jsx)(P.Tooltip,{className:"ml-1",title:(0,t.jsxs)("span",{children:["Select guardrail(s) to use for this LLM API call. You can set up your guardrails"," ",(0,t.jsx)("a",{href:"?page=guardrails",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,t.jsx)(c.InfoCircleOutlined,{})})]}),(0,t.jsx)(z.default,{value:tb,onChange:tv,className:"mb-4",accessToken:e||""})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(_.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(f.SafetyOutlined,{className:"mr-2"})," Policies",(0,t.jsx)(P.Tooltip,{className:"ml-1",title:(0,t.jsxs)("span",{children:["Select policy/policies to apply to this LLM API call. Policies define which guardrails are applied based on conditions. You can set up your policies"," ",(0,t.jsx)("a",{href:"?page=policies",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,t.jsx)(c.InfoCircleOutlined,{})})]}),(0,t.jsx)(F.default,{value:tw,onChange:t_,className:"mb-4",accessToken:e||""})]}),tl===e_.EndpointType.RESPONSES&&(0,t.jsx)("div",{children:(0,t.jsx)(eF,{accessToken:"session"===eM?e||"":e$,enabled:t5.enabled,onEnabledChange:t5.setEnabled,selectedContainerId:null,onContainerChange:()=>{},selectedModel:eX||""})})]})]}),(0,t.jsxs)("div",{className:`flex flex-col bg-white ${ec?"flex-1 w-full":"w-3/4"}`,children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,t.jsx)(S.Title,{className:"text-xl font-semibold mb-0",children:ec?ep("playground.chat"):ep("playground.testKey")}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.Button,{onClick:()=>{eG.forEach(e=>{e.isAudio&&"string"==typeof e.content&&URL.revokeObjectURL(e.content)}),eV([]),tS(null),tk(null),tX([]),su(),sp(),sm(),sh(),ec||(sessionStorage.removeItem("chatHistory"),sessionStorage.removeItem("messageTraceId"),sessionStorage.removeItem("responsesSessionId")),W.default.success(ep("playground.chatHistoryCleared"))},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:a.ClearOutlined,children:ep("playground.clearChat")}),!ec&&(0,t.jsx)(N.Button,{onClick:()=>tH(!0),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:n.CodeOutlined,children:ep("playground.getCode")})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===eG.length&&(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,t.jsx)(h.RobotOutlined,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,t.jsx)(_.Text,{children:ep("playground.startConversation")})]}),eG.map((s,r)=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:`mb-4 ${"user"===s.role?"text-right":"text-left"}`,children:(0,t.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"user"===s.role?"#f0f8ff":"#ffffff",border:"user"===s.role?"1px solid #e6f0fa":"1px solid #f0f0f0",textAlign:"left"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"user"===s.role?"#e6f0fa":"#f5f5f5"},children:"user"===s.role?(0,t.jsx)(v.UserOutlined,{style:{fontSize:"12px",color:"#2563eb"}}):(0,t.jsx)(h.RobotOutlined,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,t.jsx)("strong",{className:"text-sm capitalize",children:s.role}),"assistant"===s.role&&s.model&&(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600 font-normal",children:s.model})]}),s.reasoningContent&&(0,t.jsx)(eY,{reasoningContent:s.reasoningContent}),"assistant"===s.role&&r===eG.length-1&&tK.length>0&&(tl===e_.EndpointType.RESPONSES||tl===e_.EndpointType.CHAT)&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)(eK,{events:tK})}),"assistant"===s.role&&s.searchResults&&(0,t.jsx)(e3,{searchResults:s.searchResults}),"assistant"===s.role&&r===eG.length-1&&t5.result&&tl===e_.EndpointType.RESPONSES&&(0,t.jsx)(eq,{code:t5.result.code,containerId:t5.result.containerId,annotations:t5.result.annotations,accessToken:"session"===eM?e||"":e$}),(0,t.jsxs)("div",{className:"whitespace-pre-wrap break-words max-w-full message-content",style:{wordWrap:"break-word",overflowWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},children:[s.isImage?(0,t.jsx)("img",{src:"string"==typeof s.content?s.content:"",alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}}):s.isAudio?(0,t.jsx)(ew,{message:s}):(0,t.jsxs)(t.Fragment,{children:[tl===e_.EndpointType.RESPONSES&&(0,t.jsx)(e1,{message:s}),tl===e_.EndpointType.CHAT&&(0,t.jsx)(eA,{message:s}),(0,t.jsx)($.default,{components:{code({node:e,inline:s,className:r,children:a,...n}){let i=/language-(\w+)/.exec(r||"");return!s&&i?(0,t.jsx)(U.Prism,{style:D.coy,language:i[1],PreTag:"div",className:"rounded-md my-2",wrapLines:!0,wrapLongLines:!0,...n,children:String(a).replace(/\n$/,"")}):(0,t.jsx)("code",{className:`${r} px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono`,style:{wordBreak:"break-word"},...n,children:a})},pre:({node:e,...s})=>(0,t.jsx)("pre",{style:{overflowX:"auto",maxWidth:"100%"},...s})},children:"string"==typeof s.content?s.content:""}),s.image&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)("img",{src:s.image.url,alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}})})]}),"assistant"===s.role&&(s.timeToFirstToken||s.totalLatency||s.usage)&&!s.a2aMetadata&&(0,t.jsx)(eQ.default,{timeToFirstToken:s.timeToFirstToken,totalLatency:s.totalLatency,usage:s.usage,toolName:s.toolName}),"assistant"===s.role&&s.a2aMetadata&&(0,t.jsx)(eg,{a2aMetadata:s.a2aMetadata,timeToFirstToken:s.timeToFirstToken,totalLatency:s.totalLatency})]})]})})},r)),td&&tK.length>0&&(tl===e_.EndpointType.RESPONSES||tl===e_.EndpointType.CHAT)&&eG.length>0&&"user"===eG[eG.length-1].role&&(0,t.jsx)("div",{className:"text-left mb-4",children:(0,t.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"#ffffff",border:"1px solid #f0f0f0",textAlign:"left"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"#f5f5f5"},children:(0,t.jsx)(h.RobotOutlined,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,t.jsx)("strong",{className:"text-sm capitalize",children:ep("playground.assistant")})]}),(0,t.jsx)(eK,{events:tK})]})}),td&&(0,t.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,t.jsx)(O.Spin,{indicator:sg})}),(0,t.jsx)("div",{ref:t6,style:{height:"1px"}})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[tl===e_.EndpointType.IMAGE_EDITS&&(0,t.jsx)("div",{className:"mb-4",children:0===tC.length?(0,t.jsxs)(e8,{beforeUpload:sd,accept:"image/*",showUploadList:!1,children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(m.PictureOutlined,{style:{fontSize:"24px",color:"#666"}})}),(0,t.jsx)("p",{className:"ant-upload-text text-sm",children:ep("playground.clickOrDragImages")}),(0,t.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:"Support for PNG, JPG, JPEG formats. Multiple images supported."})]}):(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[tC.map((e,s)=>(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsx)("img",{src:tO[s]||"",alt:`Upload preview ${s+1}`,className:"max-w-32 max-h-32 rounded-md border border-gray-200 object-cover"}),(0,t.jsx)("button",{className:"absolute top-1 right-1 bg-white shadow-sm border border-gray-200 rounded px-1 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:()=>{tO[s]&&URL.revokeObjectURL(tO[s]),tA(e=>e.filter((e,t)=>t!==s)),tP(e=>e.filter((e,t)=>t!==s))},children:(0,t.jsx)(o.DeleteOutlined,{})})]},s)),(0,t.jsxs)("div",{className:"flex items-center justify-center w-32 h-32 border-2 border-dashed border-gray-300 rounded-md hover:border-gray-400 cursor-pointer",onClick:()=>document.getElementById("additional-image-upload")?.click(),children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(m.PictureOutlined,{style:{fontSize:"24px",color:"#666"}}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:ep("playground.addMore")})]}),(0,t.jsx)("input",{id:"additional-image-upload",type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:e=>{Array.from(e.target.files||[]).forEach(e=>sd(e))}})]})]})}),tl===e_.EndpointType.TRANSCRIPTION&&(0,t.jsx)("div",{className:"mb-4",children:tB?(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)(y.SoundOutlined,{style:{fontSize:"20px",color:"#666"}}),(0,t.jsx)("span",{className:"text-sm font-medium",children:tB.name}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(tB.size/1024/1024).toFixed(2)," MB)"]})]}),(0,t.jsxs)("button",{className:"bg-white shadow-sm border border-gray-200 rounded px-2 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:sh,children:[(0,t.jsx)(o.DeleteOutlined,{})," Remove"]})]}):(0,t.jsxs)(e8,{beforeUpload:e=>(tz(e),!1),accept:"audio/*,.mp3,.mp4,.mpeg,.mpga,.m4a,.wav,.webm",showUploadList:!1,children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(y.SoundOutlined,{style:{fontSize:"24px",color:"#666"}})}),(0,t.jsx)("p",{className:"ant-upload-text text-sm",children:ep("playground.clickOrDragAudio")}),(0,t.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:"Support for MP3, MP4, MPEG, MPGA, M4A, WAV, WEBM formats. Max file size: 25 MB."})]})}),tl===e_.EndpointType.RESPONSES&&tI&&(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsx)("div",{className:"relative inline-block",children:tI.name.toLowerCase().endsWith(".pdf")?(0,t.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,t.jsx)(l.FilePdfOutlined,{style:{fontSize:"16px",color:"white"}})}):(0,t.jsx)("img",{src:tM||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:tI.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:tI.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,t.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:sp,children:(0,t.jsx)(o.DeleteOutlined,{style:{fontSize:"12px"}})})]})}),tl===e_.EndpointType.CHAT&&t$&&(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsx)("div",{className:"relative inline-block",children:t$.name.toLowerCase().endsWith(".pdf")?(0,t.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,t.jsx)(l.FilePdfOutlined,{style:{fontSize:"16px",color:"white"}})}):(0,t.jsx)("img",{src:tD||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:t$.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:t$.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,t.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:sm,children:(0,t.jsx)(o.DeleteOutlined,{style:{fontSize:"12px"}})})]})}),tl===e_.EndpointType.RESPONSES&&t5.enabled&&(0,t.jsxs)("div",{className:"mb-2 space-y-2",children:[(0,t.jsxs)("div",{className:"px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:td?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.LoadingOutlined,{className:"text-blue-500",spin:!0}),(0,t.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Running Python code..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.CodeOutlined,{className:"text-blue-500"}),(0,t.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:ep("playground.codeInterpreterActive")})]})}),(0,t.jsx)("button",{className:"text-xs text-blue-500 hover:text-blue-700",onClick:()=>t5.setEnabled(!1),children:"Disable"})]}),!td&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["Generate sample sales data CSV and create a chart","Create a PNG bar chart comparing AI gateway providers including LiteLLM","Generate a CSV of LLM pricing data and visualize it as a line chart"].map((e,s)=>(0,t.jsx)("button",{className:"text-xs px-3 py-1.5 bg-white border border-gray-200 rounded-full hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors",onClick:()=>eJ(e),children:e},s))})]}),0===eG.length&&!td&&tl!==e_.EndpointType.MCP&&(0,t.jsx)("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto",children:(tl===e_.EndpointType.A2A_AGENTS?["What can you help me with?","Tell me about yourself","What tasks can you perform?"]:["Write me a poem","Explain quantum computing","Draft a polite email requesting a meeting"]).map(e=>(0,t.jsx)("button",{type:"button",className:"shrink-0 rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 transition-colors hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 cursor-pointer",onClick:()=>eJ(e),children:e},e))}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center flex-1 bg-white border border-gray-300 rounded-xl px-3 py-1 min-h-[44px]",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 mr-2 flex items-center gap-1",children:[tl===e_.EndpointType.RESPONSES&&!tI&&(0,t.jsx)(e4,{responsesUploadedImage:tI,responsesImagePreviewUrl:tM,onImageUpload:e=>(tR(e),tL(URL.createObjectURL(e)),!1),onRemoveImage:sp}),tl===e_.EndpointType.CHAT&&!t$&&(0,t.jsx)(eI,{chatUploadedImage:t$,chatImagePreviewUrl:tD,onImageUpload:e=>(tU(e),tq(URL.createObjectURL(e)),!1),onRemoveImage:sm}),tl===e_.EndpointType.RESPONSES&&(0,t.jsx)(P.Tooltip,{title:t5.enabled?ep("playground.codeInterpreterEnabledClickToDisable"):ep("playground.enableCodeInterpreter"),children:(0,t.jsx)("button",{className:`p-1.5 rounded-md transition-colors ${t5.enabled?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,onClick:()=>{t5.toggle(),t5.enabled||W.default.success(ep("playground.codeInterpreterEnabled"))},children:(0,t.jsx)(n.CodeOutlined,{style:{fontSize:"16px"}})})})]}),tl===e_.EndpointType.MCP&&1===ef.length&&"__all__"!==ef[0]&&ek?(0,t.jsx)("div",{className:"flex-1 overflow-y-auto max-h-48 min-h-[44px] p-2 border border-gray-200 rounded-lg bg-gray-50/50",children:(eu=(ej[ef[0]]||[]).find(e=>e.name===ek))?(0,t.jsx)(H.default,{ref:eO,tool:eu,className:"space-y-2"}):(0,t.jsx)("div",{className:"flex items-center justify-center h-10 text-sm text-gray-500",children:"Loading tool schema..."})}):(0,t.jsx)(e6,{value:ez,onChange:e=>eJ(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),sf())},placeholder:tl===e_.EndpointType.CHAT||tl===e_.EndpointType.EMBEDDINGS||tl===e_.EndpointType.RESPONSES||tl===e_.EndpointType.ANTHROPIC_MESSAGES?ep("playground.typeMessageShiftEnter"):tl===e_.EndpointType.A2A_AGENTS?ep("playground.sendMessageToA2A"):tl===e_.EndpointType.IMAGE_EDITS?ep("playground.describeImageEdit"):tl===e_.EndpointType.SPEECH?ep("playground.enterTextToSpeech"):tl===e_.EndpointType.TRANSCRIPTION?ep("playground.addTranscriptionPrompt"):ep("playground.describeImageGenerate"),disabled:td,className:"flex-1",autoSize:{minRows:1,maxRows:4},style:{resize:"none",border:"none",boxShadow:"none",background:"transparent",padding:"4px 0",fontSize:"14px",lineHeight:"20px"}}),(0,t.jsx)(N.Button,{onClick:sf,disabled:td||(tl===e_.EndpointType.MCP?!(1===ef.length&&"__all__"!==ef[0]&&ek):tl===e_.EndpointType.TRANSCRIPTION?!tB:!ez.trim()),className:"flex-shrink-0 ml-2 !w-8 !h-8 !min-w-8 !p-0 !rounded-full !bg-blue-600 hover:!bg-blue-700 disabled:!bg-gray-300 !border-none !text-white disabled:!text-gray-500 !flex !items-center !justify-center",children:(0,t.jsx)(r.ArrowUpOutlined,{style:{fontSize:"14px"}})})]}),td&&(0,t.jsx)(N.Button,{onClick:()=>{tp.current&&(tp.current.abort(),tp.current=null,tu(!1),W.default.info(ep("playground.requestCancelled")))},className:"bg-red-50 hover:bg-red-100 text-red-600 border-red-200",icon:o.DeleteOutlined,children:"Cancel"})]})]})]})]})}),(0,t.jsxs)(T.Modal,{title:ep("playground.generatedCode"),open:tF,onCancel:()=>tH(!1),footer:null,width:800,children:[(0,t.jsxs)("div",{className:"flex justify-between items-end my-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(_.Text,{className:"font-medium block mb-1 text-gray-700",children:ep("playground.sdkType")}),(0,t.jsx)(A.Select,{value:tG,onChange:e=>tV(e),style:{width:150},options:[{value:"openai",label:"OpenAI SDK"},{value:"azure",label:"Azure SDK"}]})]}),(0,t.jsx)(k.Button,{onClick:()=>{navigator.clipboard.writeText(tW),W.default.success(ep("playground.copiedToClipboard"))},children:"Copy to Clipboard"})]}),(0,t.jsx)(U.Prism,{language:"python",style:D.coy,wrapLines:!0,wrapLongLines:!0,className:"rounded-md",customStyle:{maxHeight:"60vh",overflowY:"auto"},children:tW})]})]})}],220486)}]);