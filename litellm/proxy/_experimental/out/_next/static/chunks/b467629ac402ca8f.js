(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,392110,939510,e=>{"use strict";var t=e.i(843476),l=e.i(271645),s=e.i(199133),a=e.i(592968),r=e.i(312361),i=e.i(790848),n=e.i(827252),o=e.i(779241);let{Option:c}=s.Select;e.s(["default",0,({form:e,autoRotationEnabled:d,onAutoRotationChange:u,rotationInterval:m,onRotationIntervalChange:p,isCreateMode:h=!1})=>{let g=m&&!["7d","30d","90d","180d","365d"].includes(m),[x,y]=(0,l.useState)(g),[_,f]=(0,l.useState)(g?m:""),[j,b]=(0,l.useState)(e?.getFieldValue?.("duration")||"");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Key Expiry Settings"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,t.jsx)("span",{children:"Expire Key"}),(0,t.jsx)(a.Tooltip,{title:h?"Set when this key should expire. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days). Leave empty to never expire.":"Set when this key should expire. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days). Use -1 to never expire.",children:(0,t.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,t.jsx)(o.TextInput,{name:"duration",placeholder:h?"e.g., 30d or leave empty to never expire":"e.g., 30d or -1 to never expire",className:"w-full",value:j,onValueChange:t=>{b(t),e&&"function"==typeof e.setFieldValue?e.setFieldValue("duration",t):e&&"function"==typeof e.setFieldsValue&&e.setFieldsValue({duration:t})}})]})]}),(0,t.jsx)(r.Divider,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-Rotation Settings"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,t.jsx)("span",{children:"Enable Auto-Rotation"}),(0,t.jsx)(a.Tooltip,{title:"Key will automatically regenerate at the specified interval for enhanced security.",children:(0,t.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,t.jsx)(i.Switch,{checked:d,onChange:u,size:"default",className:d?"":"bg-gray-400"})]}),d&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,t.jsx)("span",{children:"Rotation Interval"}),(0,t.jsx)(a.Tooltip,{title:"How often the key should be automatically rotated. Choose the interval that best fits your security requirements.",children:(0,t.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(s.Select,{value:x?"custom":m,onChange:e=>{"custom"===e?y(!0):(y(!1),f(""),p(e))},className:"w-full",placeholder:"Select interval",children:[(0,t.jsx)(c,{value:"7d",children:"7 days"}),(0,t.jsx)(c,{value:"30d",children:"30 days"}),(0,t.jsx)(c,{value:"90d",children:"90 days"}),(0,t.jsx)(c,{value:"180d",children:"180 days"}),(0,t.jsx)(c,{value:"365d",children:"365 days"}),(0,t.jsx)(c,{value:"custom",children:"Custom interval"})]}),x&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o.TextInput,{value:_,onChange:e=>{let t=e.target.value;f(t),p(t)},placeholder:"e.g., 1s, 5m, 2h, 14d"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Supported formats: seconds (s), minutes (m), hours (h), days (d)"})]})]})]})]}),d&&(0,t.jsx)("div",{className:"bg-blue-50 p-3 rounded-md text-sm text-blue-700",children:"When rotation occurs, you'll receive a notification with the new key. The old key will be deactivated after a brief grace period."})]})]})}],392110);var d=e.i(808613);let{Option:u}=s.Select;e.s(["default",0,({type:e,name:l,showDetailedDescriptions:r=!0,className:i="",initialValue:o=null,form:c,onChange:m})=>{let p=e.toUpperCase(),h=e.toLowerCase(),g=`Select 'guaranteed_throughput' to prevent overallocating ${p} limit when the key belongs to a Team with specific ${p} limits.`;return(0,t.jsx)(d.Form.Item,{label:(0,t.jsxs)("span",{children:[p," Rate Limit Type"," ",(0,t.jsx)(a.Tooltip,{title:g,children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:l,initialValue:o,className:i,children:(0,t.jsx)(s.Select,{defaultValue:r?"default":void 0,placeholder:"Select rate limit type",style:{width:"100%"},optionLabelProp:r?"label":void 0,onChange:e=>{c&&c.setFieldValue(l,e),m&&m(e)},children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{value:"best_effort_throughput",label:"Default",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"Default"}),(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Best effort throughput - no error if we're overallocating ",h," (Team/Key Limits checked at runtime)."]})]})}),(0,t.jsx)(u,{value:"guaranteed_throughput",label:"Guaranteed throughput",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"Guaranteed throughput"}),(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Guaranteed throughput - raise an error if we're overallocating ",h," (also checks model-specific limits)"]})]})}),(0,t.jsx)(u,{value:"dynamic",label:"Dynamic",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"Dynamic"}),(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["If the key has a set ",p," (e.g. 2 ",p,") and there are no 429 errors, it can dynamically exceed the limit when the model being called is not erroring."]})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{value:"best_effort_throughput",children:"Best effort throughput"}),(0,t.jsx)(u,{value:"guaranteed_throughput",children:"Guaranteed throughput"}),(0,t.jsx)(u,{value:"dynamic",children:"Dynamic"})]})})})}],939510)},207082,e=>{"use strict";var t=e.i(619273),l=e.i(266027),s=e.i(243652),a=e.i(764205),r=e.i(135214);let i=(0,s.createQueryKeys)("keys"),n=async(e,t,l,s={})=>{try{let r=(0,a.getProxyBaseUrl)(),i=new URLSearchParams(Object.entries({team_id:s.teamID,organization_id:s.organizationID,key_alias:s.selectedKeyAlias,key_hash:s.keyHash,user_id:s.userID,page:t,size:l,sort_by:s.sortBy,sort_order:s.sortOrder,expand:s.expand,status:s.status,return_full_object:"true",include_team_keys:"true",include_created_by_keys:"true"}).filter(([,e])=>null!=e).map(([e,t])=>[e,String(t)])),n=`${r?`${r}/key/list`:"/key/list"}?${i}`,o=await fetch(n,{method:"GET",headers:{[(0,a.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){let e=await o.json(),t=(0,a.deriveErrorMessage)(e);throw(0,a.handleError)(t),Error(t)}let c=await o.json();return console.log("/key/list API Response:",c),c}catch(e){throw console.error("Failed to list keys:",e),e}},o=(0,s.createQueryKeys)("deletedKeys");e.s(["keyKeys",0,i,"useDeletedKeys",0,(e,s,a={})=>{let{accessToken:i}=(0,r.default)();return(0,l.useQuery)({queryKey:o.list({page:e,limit:s,...a}),queryFn:async()=>await n(i,e,s,{...a,status:"deleted"}),enabled:!!i,staleTime:3e4,placeholderData:t.keepPreviousData})},"useKeys",0,(e,s,a={})=>{let{accessToken:o}=(0,r.default)();return(0,l.useQuery)({queryKey:i.list({page:e,limit:s,...a}),queryFn:async()=>await n(o,e,s,a),enabled:!!o,staleTime:3e4,placeholderData:t.keepPreviousData})}])},460285,750419,e=>{"use strict";var t=e.i(843476),l=e.i(271645),s=e.i(404206),a=e.i(723731),r=e.i(653824),i=e.i(881073),n=e.i(197647),o=e.i(764205),c=e.i(158392),d=e.i(419470),u=e.i(689020);let m=(0,l.forwardRef)(({accessToken:e,value:m,onChange:p,modelData:h},g)=>{let[x,y]=(0,l.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[_,f]=(0,l.useState)([]),[j,b]=(0,l.useState)([]),[v,w]=(0,l.useState)([]),[S,k]=(0,l.useState)([]),[T,C]=(0,l.useState)({}),[N,I]=(0,l.useState)({}),K=(0,l.useRef)(!1),A=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=m?.router_settings?JSON.stringify({routing_strategy:m.router_settings.routing_strategy,fallbacks:m.router_settings.fallbacks,enable_tag_filtering:m.router_settings.enable_tag_filtering}):null;if(K.current&&e===A.current){K.current=!1;return}if(K.current&&e!==A.current&&(K.current=!1),e!==A.current)if(A.current=e,m?.router_settings){let e=m.router_settings,{fallbacks:t,...l}=e;y({routerSettings:l,selectedStrategy:e.routing_strategy||null,enableTagFiltering:e.enable_tag_filtering??!1});let s=e.fallbacks||[];f(s),b(s&&0!==s.length?s.map((e,t)=>{let[l,s]=Object.entries(e)[0];return{id:(t+1).toString(),primaryModel:l||null,fallbackModels:s||[]}}):[{id:"1",primaryModel:null,fallbackModels:[]}])}else y({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),f([]),b([{id:"1",primaryModel:null,fallbackModels:[]}])},[m]),(0,l.useEffect)(()=>{e&&(0,o.getRouterSettingsCall)(e).then(e=>{if(e.fields){let t={};e.fields.forEach(e=>{t[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),C(t);let l=e.fields.find(e=>"routing_strategy"===e.field_name);l?.options&&k(l.options),e.routing_strategy_descriptions&&I(e.routing_strategy_descriptions)}})},[e]),(0,l.useEffect)(()=>{e&&(async()=>{try{let t=await (0,u.fetchAvailableModels)(e);w(t)}catch(e){console.error("Error fetching model info for fallbacks:",e)}})()},[e]);let F=()=>{let e=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),t=new Set(["model_group_alias","retry_policy"]),l=Object.fromEntries(Object.entries({...x.routerSettings,enable_tag_filtering:x.enableTagFiltering,routing_strategy:x.selectedStrategy,fallbacks:_.length>0?_:null}).map(([l,s])=>{if("routing_strategy_args"!==l&&"routing_strategy"!==l&&"enable_tag_filtering"!==l&&"fallbacks"!==l){let a=document.querySelector(`input[name="${l}"]`);if(a&&void 0!==a.value&&""!==a.value){let r=((l,s,a)=>{if(null==s)return a;let r=String(s).trim();if(""===r||"null"===r.toLowerCase())return null;if(e.has(l)){let e=Number(r);return Number.isNaN(e)?a:e}if(t.has(l)){if(""===r)return null;try{return JSON.parse(r)}catch{return a}}return"true"===r.toLowerCase()||"false"!==r.toLowerCase()&&r})(l,a.value,s);return[l,r]}}else if("routing_strategy"===l)return[l,x.selectedStrategy];else if("enable_tag_filtering"===l)return[l,x.enableTagFiltering];else if("fallbacks"===l)return[l,_.length>0?_:null];else if("routing_strategy_args"===l&&"latency-based-routing"===x.selectedStrategy){let e=document.querySelector('input[name="lowest_latency_buffer"]'),t=document.querySelector('input[name="ttl"]'),l={};return e?.value&&(l.lowest_latency_buffer=Number(e.value)),t?.value&&(l.ttl=Number(t.value)),["routing_strategy_args",Object.keys(l).length>0?l:null]}return[l,s]}).filter(e=>null!=e)),s=(e,t=!1)=>null==e||"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length||t&&("number"!=typeof e||Number.isNaN(e))?null:e;return{routing_strategy:s(l.routing_strategy),allowed_fails:s(l.allowed_fails,!0),cooldown_time:s(l.cooldown_time,!0),num_retries:s(l.num_retries,!0),timeout:s(l.timeout,!0),retry_after:s(l.retry_after,!0),fallbacks:_.length>0?_:null,context_window_fallbacks:s(l.context_window_fallbacks),retry_policy:s(l.retry_policy),model_group_alias:s(l.model_group_alias),enable_tag_filtering:x.enableTagFiltering,routing_strategy_args:s(l.routing_strategy_args)}};(0,l.useEffect)(()=>{if(!p)return;let e=setTimeout(()=>{K.current=!0,p({router_settings:F()})},100);return()=>clearTimeout(e)},[x,_]);let P=Array.from(new Set(v.map(e=>e.model_group))).sort();return((0,l.useImperativeHandle)(g,()=>({getValue:()=>({router_settings:F()})})),e)?(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(r.TabGroup,{className:"w-full",children:[(0,t.jsxs)(i.TabList,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,t.jsx)(n.Tab,{value:"1",children:"Loadbalancing"}),(0,t.jsx)(n.Tab,{value:"2",children:"Fallbacks"})]}),(0,t.jsxs)(a.TabPanels,{className:"px-8 py-6",children:[(0,t.jsx)(s.TabPanel,{children:(0,t.jsx)(c.default,{value:x,onChange:y,routerFieldsMetadata:T,availableRoutingStrategies:S,routingStrategyDescriptions:N})}),(0,t.jsx)(s.TabPanel,{children:(0,t.jsx)(d.FallbackSelectionForm,{groups:j,onGroupsChange:e=>{b(e),f(e.filter(e=>e.primaryModel&&e.fallbackModels.length>0).map(e=>({[e.primaryModel]:e.fallbackModels})))},availableModels:P,maxGroups:5})})]})]})}):null});m.displayName="RouterSettingsAccordion",e.s(["default",0,m],460285),e.s(["simplifyKeyGenerateError",0,e=>{let t;if(!(t=!e||"object"!=typeof e||e instanceof Error?String(e):JSON.stringify(e)).includes("/key/generate")&&!t.includes("KeyManagementRoutes.KEY_GENERATE"))return`Error creating the key: ${e}`;let l=t;try{if(!e||"object"!=typeof e||e instanceof Error){let e=t.match(/\{[\s\S]*\}/);if(e){let t=JSON.parse(e[0]),s=t?.error||t;s?.message&&(l=s.message)}}else{let t=e?.error||e;t?.message&&(l=t.message)}}catch(e){}return t.includes("team_member_permission_error")||l.includes("Team member does not have permissions")?"Team member does not have permission to generate key for this team. Ask your proxy admin to configure the team member permission settings.":`Error creating the key: ${e}`}],750419)},364769,e=>{"use strict";var t=e.i(843476),l=e.i(271645),s=e.i(237016),a=e.i(464571),r=e.i(998573);e.s(["default",0,({apiKey:e})=>{let[i,n]=(0,l.useState)(!1);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"mb-2",children:["Please save this secret key somewhere safe and accessible. For security reasons,"," ",(0,t.jsx)("b",{children:"you will not be able to view it again"})," through your LiteLLM account. If you lose this secret key, you will need to generate a new one."]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Virtual Key:"}),(0,t.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",borderRadius:"5px",marginBottom:"10px"},children:(0,t.jsx)("pre",{style:{wordWrap:"break-word",whiteSpace:"normal",margin:0},children:e})}),(0,t.jsx)(s.CopyToClipboard,{text:e,onCopy:()=>{n(!0),r.message.success("Key copied to clipboard"),setTimeout(()=>n(!1),2e3)},children:(0,t.jsx)(a.Button,{type:"primary",style:{marginTop:12},children:i?"Copied!":"Copy Virtual Key"})})]})}])},702597,e=>{"use strict";var t=e.i(843476),l=e.i(207082),s=e.i(135214),a=e.i(500330),r=e.i(827252),i=e.i(912598),n=e.i(677667),o=e.i(130643),c=e.i(898667),d=e.i(994388),u=e.i(309426),m=e.i(350967),p=e.i(599724),h=e.i(779241),g=e.i(629569),x=e.i(464571),y=e.i(808613),_=e.i(311451),f=e.i(998573),j=e.i(212931),b=e.i(91739),v=e.i(199133),w=e.i(790848),S=e.i(262218),k=e.i(592968),T=e.i(374009),C=e.i(271645);e.i(785269);var N=e.i(322831),I=e.i(708347),K=e.i(552130),A=e.i(557662),F=e.i(860585),P=e.i(82946),O=e.i(392110),L=e.i(533882),M=e.i(844565),R=e.i(651904),E=e.i(939510),V=e.i(460285),U=e.i(9314),B=e.i(663435),D=e.i(371455),G=e.i(355619),$=e.i(75921),q=e.i(390605),H=e.i(727749),J=e.i(764205),W=e.i(435451),z=e.i(916940),Q=e.i(750419),Y=e.i(364769);let{Option:X}=v.Select,Z=async(e,t,l,s)=>{try{if(null===e||null===t)return[];if(null!==l){let a=(await (0,J.modelAvailableCall)(l,e,t,!0,s,!0)).data.map(e=>e.id);return console.log("available_model_names:",a),a}return[]}catch(e){return console.error("Error fetching user models:",e),[]}},ee=async(e,t,l,s)=>{try{if(null===e||null===t)return;if(null!==l){let a=(await (0,J.modelAvailableCall)(l,e,t)).data.map(e=>e.id);console.log("available_model_names:",a),s(a)}}catch(e){console.error("Error fetching user models:",e)}};e.s(["default",0,({team:e,teams:et,data:el,addKey:es})=>{let{t:ea}=(0,N.useTranslation)(),{accessToken:er,userId:ei,userRole:en,premiumUser:eo}=(0,s.default)(),ec=(0,i.useQueryClient)(),[ed]=y.Form.useForm(),[eu,em]=(0,C.useState)(!1),[ep,eh]=(0,C.useState)(null),[eg,ex]=(0,C.useState)(null),[ey,e_]=(0,C.useState)([]),[ef,ej]=(0,C.useState)([]),[eb,ev]=(0,C.useState)("you"),[ew,eS]=(0,C.useState)((e=>{let t=[];if(console.log("data:",JSON.stringify(e)),e)for(let l of e)l.metadata&&l.metadata.tags&&t.push(...l.metadata.tags);let l=Array.from(new Set(t)).map(e=>({value:e,label:e}));return console.log("uniqueTags:",l),l})(el)),[ek,eT]=(0,C.useState)([]),[eC,eN]=(0,C.useState)([]),[eI,eK]=(0,C.useState)([]),[eA,eF]=(0,C.useState)([]),[eP,eO]=(0,C.useState)(e),[eL,eM]=(0,C.useState)(!1),[eR,eE]=(0,C.useState)(null),[eV,eU]=(0,C.useState)({}),[eB,eD]=(0,C.useState)([]),[eG,e$]=(0,C.useState)(!1),[eq,eH]=(0,C.useState)([]),[eJ,eW]=(0,C.useState)([]),[ez,eQ]=(0,C.useState)("llm_api"),[eY,eX]=(0,C.useState)({}),[eZ,e0]=(0,C.useState)(!1),[e4,e1]=(0,C.useState)("30d"),[e2,e3]=(0,C.useState)(null),[e5,e7]=(0,C.useState)(0),[e6,e8]=(0,C.useState)([]),[e9,te]=(0,C.useState)(null),tt=()=>{em(!1),ed.resetFields(),eF([]),eW([]),eQ("llm_api"),eX({}),e0(!1),e1("30d"),e3(null),e7(e=>e+1),te(null)},tl=()=>{em(!1),eh(null),eO(null),ed.resetFields(),eF([]),eW([]),eQ("llm_api"),eX({}),e0(!1),e1("30d"),e3(null),e7(e=>e+1),te(null)};(0,C.useEffect)(()=>{ei&&en&&er&&ee(ei,en,er,e_)},[er,ei,en]),(0,C.useEffect)(()=>{er&&(0,J.getAgentsList)(er).then(e=>e8(e?.agents||[])).catch(()=>e8([]))},[er]),(0,C.useEffect)(()=>{let e=async()=>{try{let e=(await (0,J.getPoliciesList)(er)).policies.map(e=>e.policy_name);eN(e)}catch(e){console.error("Failed to fetch policies:",e)}},t=async()=>{try{let e=await (0,J.getPromptsList)(er);eK(e.prompts.map(e=>e.prompt_id))}catch(e){console.error("Failed to fetch prompts:",e)}};(async()=>{try{let e=(await (0,J.getGuardrailsList)(er)).guardrails.map(e=>e.guardrail_name);eT(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})(),e(),t()},[er]),(0,C.useEffect)(()=>{(async()=>{try{if(er){let e=sessionStorage.getItem("possibleUserRoles");if(e)eU(JSON.parse(e));else{let e=await (0,J.getPossibleUserRoles)(er);sessionStorage.setItem("possibleUserRoles",JSON.stringify(e)),eU(e)}}}catch(e){console.error("Error fetching possible user roles:",e)}})()},[er]);let ts=ef.includes("no-default-models")&&!eP,ta=async e=>{try{let t,s=e?.key_alias??"",a=e?.team_id??null;if((el?.filter(e=>e.team_id===a).map(e=>e.key_alias)??[]).includes(s))throw Error(`Key alias ${s} already exists for team with ID ${a}, please provide another key alias`);if(H.default.info(ea("createKey.makingApiCall")),em(!0),"you"===eb)e.user_id=ei;else if("agent"===eb){if(!e9)return void f.message.error("Please select an agent");e.agent_id=e9}let r={};try{r=JSON.parse(e.metadata||"{}")}catch(e){console.error("Error parsing metadata:",e)}if("service_account"===eb&&(r.service_account_id=e.key_alias),eA.length>0&&(r={...r,logging:eA.filter(e=>e.callback_name)}),eJ.length>0){let e=(0,A.mapDisplayToInternalNames)(eJ);r={...r,litellm_disabled_callbacks:e}}if(eZ&&(e.auto_rotate=!0,e.rotation_interval=e4),e.duration&&""!==e.duration.trim()||(e.duration=null),e.metadata=JSON.stringify(r),e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission={vector_stores:e.allowed_vector_store_ids},delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{servers:t,accessGroups:l}=e.allowed_mcp_servers_and_groups;t&&t.length>0&&(e.object_permission.mcp_servers=t),l&&l.length>0&&(e.object_permission.mcp_access_groups=l),delete e.allowed_mcp_servers_and_groups}let i=e.mcp_tool_permissions||{};if(Object.keys(i).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=i),delete e.mcp_tool_permissions,e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),e.allowed_agents_and_groups&&(e.allowed_agents_and_groups.agents?.length>0||e.allowed_agents_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{agents:t,accessGroups:l}=e.allowed_agents_and_groups;t&&t.length>0&&(e.object_permission.agents=t),l&&l.length>0&&(e.object_permission.agent_access_groups=l),delete e.allowed_agents_and_groups}Object.keys(eY).length>0&&(e.aliases=JSON.stringify(eY)),e2?.router_settings&&Object.values(e2.router_settings).some(e=>null!=e&&""!==e)&&(e.router_settings=e2.router_settings),t="service_account"===eb?await (0,J.keyCreateServiceAccountCall)(er,e):await (0,J.keyCreateCall)(er,ei,e),console.log("key create Response:",t),es(t),ec.invalidateQueries({queryKey:l.keyKeys.lists()}),eh(t.key),ex(t.soft_budget),H.default.success(ea("createKey.virtualKeyCreated")),ed.resetFields(),localStorage.removeItem("userData"+ei)}catch(t){console.log("error in create key:",t);let e=(0,Q.simplifyKeyGenerateError)(t);H.default.fromBackend(e)}};(0,C.useEffect)(()=>{ei&&en&&er&&Z(ei,en,er,eP?.team_id??null).then(e=>{ej(Array.from(new Set([...eP?.models??[],...e])))}),ed.setFieldValue("models",[])},[eP,er,ei,en]);let tr=async e=>{if(!e)return void eD([]);e$(!0);try{let t=new URLSearchParams;if(t.append("user_email",e),null==er)return;let l=(await (0,J.userFilterUICall)(er,t)).map(e=>({label:`${e.user_email} (${e.user_id})`,value:e.user_id,user:e}));eD(l)}catch(e){console.error("Error fetching users:",e),H.default.fromBackend("Failed to search for users")}finally{e$(!1)}},ti=(0,C.useCallback)((0,T.default)(e=>tr(e),300),[er]);return(0,t.jsxs)("div",{children:[en&&I.rolesWithWriteAccess.includes(en)&&(0,t.jsx)(d.Button,{className:"mx-auto",onClick:()=>em(!0),children:"+ Create New Key"}),(0,t.jsx)(j.Modal,{open:eu,width:1e3,footer:null,onOk:tt,onCancel:tl,children:(0,t.jsxs)(y.Form,{form:ed,onFinish:ta,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(g.Title,{className:"mb-4",children:ea("createKey.keyOwnership")}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Owned By"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.selectOwnerTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),className:"mb-4",children:(0,t.jsxs)(b.Radio.Group,{onChange:e=>ev(e.target.value),value:eb,children:[(0,t.jsx)(b.Radio,{value:"you",children:"You"}),(0,t.jsx)(b.Radio,{value:"service_account",children:ea("createKey.serviceAccount")}),"Admin"===en&&(0,t.jsx)(b.Radio,{value:"another_user",children:ea("createKey.anotherUser")}),(0,t.jsxs)(b.Radio,{value:"agent",children:["Agent ",(0,t.jsx)(S.Tag,{color:"purple",children:"New"})]})]})}),"another_user"===eb&&(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["User ID"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.userOwnerTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"user_id",className:"mt-4",rules:[{required:"another_user"===eb,message:"Please input the user ID of the user you are assigning the key to"}],children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",marginBottom:"8px"},children:[(0,t.jsx)(v.Select,{showSearch:!0,placeholder:ea("createKey.searchUsersPlaceholder"),filterOption:!1,onSearch:e=>{ti(e)},onSelect:(e,t)=>{let l;return l=t.user,void ed.setFieldsValue({user_id:l.user_id})},options:eB,loading:eG,allowClear:!0,style:{width:"100%"},notFoundContent:eG?"Searching...":"No users found"}),(0,t.jsx)(x.Button,{onClick:()=>eM(!0),style:{marginLeft:"8px"},children:"Create User"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:ea("createKey.searchByEmail")})]})}),"agent"===eb&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-md",children:[(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Select Agent ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]})}),(0,t.jsx)(v.Select,{showSearch:!0,placeholder:ea("createKey.selectAgent"),style:{width:"100%"},value:e9,onChange:e=>te(e),filterOption:(e,t)=>t?.label?.toLowerCase().includes(e.toLowerCase()),options:e6.map(e=>({label:e.agent_name||e.agent_id,value:e.agent_id}))}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"This key will be used by the selected agent to make requests to LiteLLM"})]}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Team"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.teamTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"team_id",initialValue:e?e.team_id:null,className:"mt-4",rules:[{required:"service_account"===eb,message:"Please select a team for the service account"}],help:"service_account"===eb?"required":"",children:(0,t.jsx)(B.default,{teams:et,onChange:e=>{eO(et?.find(t=>t.team_id===e)||null)}})})]}),ts&&(0,t.jsx)("div",{className:"mb-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,t.jsx)(p.Text,{className:"text-blue-800 text-sm",children:"Please select a team to continue configuring your Virtual Key. If you do not see any teams, please contact your Proxy Admin to either provide you with access to models or to add you to a team."})}),!ts&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(g.Title,{className:"mb-4",children:ea("createKey.keyDetails")}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["you"===eb||"another_user"===eb?"Key Name":"Service Account ID"," ",(0,t.jsx)(k.Tooltip,{title:"you"===eb||"another_user"===eb?"A descriptive name to identify this key":"Unique identifier for this service account",children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"key_alias",rules:[{required:!0,message:`Please input a ${"you"===eb?"key name":"service account ID"}`}],help:"required",children:(0,t.jsx)(h.TextInput,{placeholder:""})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Models"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.modelsTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"models",rules:"management"===ez||"read_only"===ez?[]:[{required:!0,message:"Please select a model"}],help:"management"===ez||"read_only"===ez?"Models field is disabled for this key type":"required",className:"mt-4",children:(0,t.jsxs)(v.Select,{mode:"multiple",placeholder:ea("createKey.selectModels"),style:{width:"100%"},disabled:"management"===ez||"read_only"===ez,onChange:e=>{e.includes("all-team-models")&&ed.setFieldsValue({models:["all-team-models"]})},children:[(0,t.jsx)(X,{value:"all-team-models",children:"All Team Models"},"all-team-models"),ef.map(e=>(0,t.jsx)(X,{value:e,children:(0,G.getModelDisplayName)(e)},e))]})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Key Type"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.keyTypeTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"key_type",initialValue:"llm_api",className:"mt-4",children:(0,t.jsxs)(v.Select,{defaultValue:"llm_api",placeholder:ea("createKey.selectKeyType"),style:{width:"100%"},optionLabelProp:"label",onChange:e=>{eQ(e),("management"===e||"read_only"===e)&&ed.setFieldsValue({models:[]})},children:[(0,t.jsx)(X,{value:"default",label:"Default",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:ea("createKey.default")}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"Can call AI APIs + Management routes"})]})}),(0,t.jsx)(X,{value:"llm_api",label:"AI APIs",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:ea("createKey.aiApis")}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"Can call only AI API routes (chat/completions, embeddings, etc.)"})]})}),(0,t.jsx)(X,{value:"management",label:"Management",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:ea("createKey.management")}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"Can call only management routes (user/team/key management)"})]})})]})})]}),!ts&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsx)(g.Title,{className:"m-0",children:ea("createKey.optionalSettings")})}),(0,t.jsxs)(o.AccordionBody,{children:[(0,t.jsx)(y.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Max Budget (USD)"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.maxBudgetTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"max_budget",help:`Budget cannot exceed team max budget: $${e?.max_budget!==null&&e?.max_budget!==void 0?e?.max_budget:"unlimited"}`,rules:[{validator:async(t,l)=>{if(l&&e&&null!==e.max_budget&&l>e.max_budget)throw Error(`Budget cannot exceed team max budget: $${(0,a.formatNumberWithCommas)(e.max_budget,4)}`)}}],children:(0,t.jsx)(W.default,{step:.01,precision:2,width:200})}),(0,t.jsx)(y.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Reset Budget"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.budgetResetTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"budget_duration",help:`Team Reset Budget: ${e?.budget_duration!==null&&e?.budget_duration!==void 0?e?.budget_duration:"None"}`,children:(0,t.jsx)(F.default,{onChange:e=>ed.setFieldValue("budget_duration",e)})}),(0,t.jsx)(y.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Tokens per minute Limit (TPM)"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.tpmLimitTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"tpm_limit",help:`TPM cannot exceed team TPM limit: ${e?.tpm_limit!==null&&e?.tpm_limit!==void 0?e?.tpm_limit:"unlimited"}`,rules:[{validator:async(t,l)=>{if(l&&e&&null!==e.tpm_limit&&l>e.tpm_limit)throw Error(`TPM limit cannot exceed team TPM limit: ${e.tpm_limit}`)}}],children:(0,t.jsx)(W.default,{step:1,width:400})}),(0,t.jsx)(E.default,{type:"tpm",name:"tpm_limit_type",className:"mt-4",initialValue:null,form:ed,showDetailedDescriptions:!0}),(0,t.jsx)(y.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Requests per minute Limit (RPM)"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.rpmLimitTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"rpm_limit",help:`RPM cannot exceed team RPM limit: ${e?.rpm_limit!==null&&e?.rpm_limit!==void 0?e?.rpm_limit:"unlimited"}`,rules:[{validator:async(t,l)=>{if(l&&e&&null!==e.rpm_limit&&l>e.rpm_limit)throw Error(`RPM limit cannot exceed team RPM limit: ${e.rpm_limit}`)}}],children:(0,t.jsx)(W.default,{step:1,width:400})}),(0,t.jsx)(E.default,{type:"rpm",name:"rpm_limit_type",className:"mt-4",initialValue:null,form:ed,showDetailedDescriptions:!0}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Guardrails"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.guardrailsTooltip"),children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:eo?"Select existing guardrails or enter new ones":"Premium feature - Upgrade to set guardrails by key",children:(0,t.jsx)(v.Select,{mode:"tags",style:{width:"100%"},disabled:!eo,placeholder:eo?"Select or enter guardrails":"Premium feature - Upgrade to set guardrails by key",options:ek.map(e=>({value:e,label:e}))})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Disable Global Guardrails"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.bypassGuardrailsTooltip"),children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"disable_global_guardrails",className:"mt-4",valuePropName:"checked",help:eo?"Bypass global guardrails for this key":"Premium feature - Upgrade to disable global guardrails by key",children:(0,t.jsx)(w.Switch,{disabled:!eo,checkedChildren:"Yes",unCheckedChildren:"No"})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Policies"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.policiesTooltip"),children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/guardrail_policies",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"policies",className:"mt-4",help:eo?"Select existing policies or enter new ones":"Premium feature - Upgrade to set policies by key",children:(0,t.jsx)(v.Select,{mode:"tags",style:{width:"100%"},disabled:!eo,placeholder:eo?"Select or enter policies":"Premium feature - Upgrade to set policies by key",options:eC.map(e=>({value:e,label:e}))})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Prompts"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.promptTemplatesTooltip"),children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/prompt_management",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"prompts",className:"mt-4",help:eo?"Select existing prompts or enter new ones":"Premium feature - Upgrade to set prompts by key",children:(0,t.jsx)(v.Select,{mode:"tags",style:{width:"100%"},disabled:!eo,placeholder:eo?"Select or enter prompts":"Premium feature - Upgrade to set prompts by key",options:eI.map(e=>({value:e,label:e}))})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Access Groups"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.accessGroupsTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"access_group_ids",className:"mt-4",help:"Select access groups to assign to this key",children:(0,t.jsx)(U.default,{placeholder:ea("createKey.selectAccessGroups")})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed Pass Through Routes"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.passThroughRoutesTooltip"),children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/pass_through",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"allowed_passthrough_routes",className:"mt-4",help:eo?"Select existing pass through routes or enter new ones":"Premium feature - Upgrade to set pass through routes by key",children:(0,t.jsx)(M.default,{onChange:e=>ed.setFieldValue("allowed_passthrough_routes",e),value:ed.getFieldValue("allowed_passthrough_routes"),accessToken:er,placeholder:eo?"Select or enter pass through routes":"Premium feature - Upgrade to set pass through routes by key",disabled:!eo,teamId:eP?eP.team_id:null})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed Vector Stores"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.vectorStoresTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-4",help:"Select vector stores this key can access. Leave empty for access to all vector stores",children:(0,t.jsx)(z.default,{onChange:e=>ed.setFieldValue("allowed_vector_store_ids",e),value:ed.getFieldValue("allowed_vector_store_ids"),accessToken:er,placeholder:ea("createKey.selectVectorStores")})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Metadata"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.metadataTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"metadata",className:"mt-4",children:(0,t.jsx)(_.Input.TextArea,{rows:4,placeholder:ea("createKey.enterMetadataJson")})}),(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Tags"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.tagsTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"tags",className:"mt-4",help:"Tags for tracking spend and/or doing tag-based routing.",children:(0,t.jsx)(v.Select,{mode:"tags",style:{width:"100%"},placeholder:ea("createKey.enterTags"),tokenSeparators:[","],options:ew})}),(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsx)("b",{children:ea("createKey.mcpSettings")})}),(0,t.jsxs)(o.AccordionBody,{children:[(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed MCP Servers"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.mcpServersTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",help:"Select MCP servers or access groups this key can access",children:(0,t.jsx)($.default,{onChange:e=>ed.setFieldValue("allowed_mcp_servers_and_groups",e),value:ed.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:er,placeholder:ea("createKey.selectMcpServers")})}),(0,t.jsx)(y.Form.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,t.jsx)(_.Input,{type:"hidden"})}),(0,t.jsx)(y.Form.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.allowed_mcp_servers_and_groups!==t.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==t.mcp_tool_permissions,children:()=>(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(q.default,{accessToken:er,selectedServers:ed.getFieldValue("allowed_mcp_servers_and_groups")?.servers||[],toolPermissions:ed.getFieldValue("mcp_tool_permissions")||{},onChange:e=>ed.setFieldsValue({mcp_tool_permissions:e})})})})]})]}),(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsx)("b",{children:ea("createKey.agentSettings")})}),(0,t.jsx)(o.AccordionBody,{children:(0,t.jsx)(y.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed Agents"," ",(0,t.jsx)(k.Tooltip,{title:ea("createKey.agentsTooltip"),children:(0,t.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_agents_and_groups",help:"Select agents or access groups this key can access",children:(0,t.jsx)(K.default,{onChange:e=>ed.setFieldValue("allowed_agents_and_groups",e),value:ed.getFieldValue("allowed_agents_and_groups"),accessToken:er,placeholder:ea("createKey.selectAgents")})})})]}),eo?(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsx)("b",{children:ea("createKey.loggingSettings")})}),(0,t.jsx)(o.AccordionBody,{children:(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(R.default,{value:eA,onChange:eF,premiumUser:!0,disabledCallbacks:eJ,onDisabledCallbacksChange:eW})})})]}):(0,t.jsx)(k.Tooltip,{title:(0,t.jsxs)("span",{children:["Key-level logging settings is an enterprise feature, get in touch -",(0,t.jsx)("a",{href:"https://www.litellm.ai/enterprise",target:"_blank",children:"https://www.litellm.ai/enterprise"})]}),placement:"top",children:(0,t.jsxs)("div",{style:{position:"relative"},children:[(0,t.jsx)("div",{style:{opacity:.5},children:(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsx)("b",{children:ea("createKey.loggingSettings")})}),(0,t.jsx)(o.AccordionBody,{children:(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(R.default,{value:eA,onChange:eF,premiumUser:!1,disabledCallbacks:eJ,onDisabledCallbacksChange:eW})})})]})}),(0,t.jsx)("div",{style:{position:"absolute",inset:0,cursor:"not-allowed"}})]})}),(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsx)("b",{children:ea("createKey.routerSettings")})}),(0,t.jsx)(o.AccordionBody,{children:(0,t.jsx)("div",{className:"mt-4 w-full",children:(0,t.jsx)(V.default,{accessToken:er||"",value:e2||void 0,onChange:e3,modelData:ey.length>0?{data:ey.map(e=>({model_name:e}))}:void 0},e5)})})]},`router-settings-accordion-${e5}`),(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsx)("b",{children:ea("createKey.modelAliases")})}),(0,t.jsx)(o.AccordionBody,{children:(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(p.Text,{className:"text-sm text-gray-600 mb-4",children:"Create custom aliases for models that can be used in API calls. This allows you to create shortcuts for specific models."}),(0,t.jsx)(L.default,{accessToken:er,initialModelAliases:eY,onAliasUpdate:eX,showExampleConfig:!1})]})})]}),(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsx)("b",{children:ea("createKey.keyLifecycle")})}),(0,t.jsx)(o.AccordionBody,{children:(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(O.default,{form:ed,autoRotationEnabled:eZ,onAutoRotationChange:e0,rotationInterval:e4,onRotationIntervalChange:e1,isCreateMode:!0})})}),(0,t.jsx)(y.Form.Item,{name:"duration",hidden:!0,initialValue:null,children:(0,t.jsx)(_.Input,{})})]}),(0,t.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(c.AccordionHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("b",{children:ea("createKey.advancedSettings")}),(0,t.jsx)(k.Tooltip,{title:(0,t.jsxs)("span",{children:["Learn more about advanced settings in our"," ",(0,t.jsx)("a",{href:J.proxyBaseUrl?`${J.proxyBaseUrl}/#/key%20management/generate_key_fn_key_generate_post`:"/#/key%20management/generate_key_fn_key_generate_post",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"documentation"})]}),children:(0,t.jsx)(r.InfoCircleOutlined,{className:"text-gray-400 hover:text-gray-300 cursor-help"})})]})}),(0,t.jsx)(o.AccordionBody,{children:(0,t.jsx)(P.default,{schemaComponent:"GenerateKeyRequest",form:ed,excludedFields:["key_alias","team_id","models","duration","metadata","tags","guardrails","max_budget","budget_duration","tpm_limit","rpm_limit"]})})]})]})]})}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(x.Button,{htmlType:"submit",disabled:ts,style:{opacity:ts?.5:1},children:"Create Key"})})]})}),eL&&(0,t.jsx)(j.Modal,{title:ea("createKey.createNewUser"),open:eL,onCancel:()=>eM(!1),footer:null,width:800,children:(0,t.jsx)(D.CreateUserButton,{userID:ei,accessToken:er,teams:et,possibleUIRoles:eV,onUserCreated:e=>{eE(e),ed.setFieldsValue({user_id:e}),eM(!1)},isEmbedded:!0})}),ep&&(0,t.jsx)(j.Modal,{open:eu,onOk:tt,onCancel:tl,footer:null,children:(0,t.jsxs)(m.Grid,{numItems:1,className:"gap-2 w-full",children:[(0,t.jsx)(g.Title,{children:ea("createKey.saveYourKey")}),(0,t.jsx)(u.Col,{numColSpan:1,children:null!=ep?(0,t.jsx)(Y.default,{apiKey:ep}):(0,t.jsx)(p.Text,{children:"Key being created, this might take 30s"})})]})})]})},"fetchTeamModels",0,Z,"fetchUserModels",0,ee])}]);